const __vite__fileDeps=["assets/chunks/VPLocalSearchBox.C6QseHvn.js","assets/chunks/framework.PWOYbXk_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as w,o as m,c as y,r as P,n as G,a as be,t as J,b as N,w as _,e as T,T as Qs,_ as O,u as gn,i as sd,f as od,g as Xs,h as D,j as F,k as Oe,l as R,m as C,p as te,q as re,s as lt,v as $s,x as Ie,y as Jn,z as Gn,A as pu,B as ad,C as cd,D as He,F as Q,E as ge,G as lu,H as Qn,I as A,J as yt,K as du,L as Xn,M as $n,N as Zn,O as ud,P as hu,Q as qs,R as pd,S as vu,U as Yn,V as ld,W as dd,X as hd,Y as fu,Z as gu,$ as vd,a0 as fd,a1 as gd,a2 as md,a3 as Sd,a4 as Un,a5 as Cd,a6 as zn}from"./framework.PWOYbXk_.js";const yd=w({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(r){return(e,t)=>(m(),y("span",{class:G(["VPBadge",e.type])},[P(e.$slots,"default",{},()=>[be(J(e.text),1)])],2))}}),Pd={key:0,class:"VPBackdrop"},Rd=w({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(r){return(e,t)=>(m(),N(Qs,{name:"fade"},{default:_(()=>[e.show?(m(),y("div",Pd)):T("",!0)]),_:1}))}}),_d=O(Rd,[["__scopeId","data-v-54a304ca"]]),V=gn;function Ed(r,e){let t,s=!1;return()=>{t&&clearTimeout(t),s?t=setTimeout(r,e):(r(),(s=!0)&&setTimeout(()=>s=!1,e))}}function Fs(r){return/^\//.test(r)?r:`/${r}`}function Zs(r){const{pathname:e,search:t,hash:s,protocol:c}=new URL(r,"http://a.com");if(sd(r)||r.startsWith("#")||!c.startsWith("http")||!od(e))return r;const{site:a}=V(),i=e.endsWith("/")||e.endsWith(".html")?r:r.replace(/(?:(^\.+)\/)?.*$/,`$1${e.replace(/(\.md)?$/,a.value.cleanUrls?"":".html")}${t}${s}`);return Xs(i)}function yn({removeCurrent:r=!0,correspondingLink:e=!1}={}){const{site:t,localeIndex:s,page:c,theme:a,hash:i}=V(),n=D(()=>{var u,p;return{index:s.value,label:(u=t.value.locales[s.value])==null?void 0:u.label,link:((p=t.value.locales[s.value])==null?void 0:p.link)||(s.value==="root"?"/":`/${s.value}/`)}});return{localeLinks:D(()=>Object.entries(t.value.locales).flatMap(([u,p])=>r&&n.value.label===p.label?[]:{index:u,text:p.label,link:Id(p.link||(u==="root"?"/":`/${u}/`),a.value.i18nRouting!==!1&&e,c.value.relativePath.slice(n.value.link.length-1),!t.value.cleanUrls)+i.value})),currentLang:n}}function Id(r,e,t,s){return e?r.replace(/\/$/,"")+Fs(t.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,s?".html":"")):r}const Td=r=>(te("data-v-d1e76dde"),r=r(),re(),r),bd={class:"NotFound"},wd={class:"code"},Ad={class:"title"},kd=Td(()=>R("div",{class:"divider"},null,-1)),Md={class:"quote"},Od={class:"action"},Dd=["href","aria-label"],Nd=w({__name:"NotFound",setup(r){const{site:e}=V(),{localeLinks:t}=yn({removeCurrent:!1}),s=F({link:"/",index:"root"});Oe(()=>{const a=window.location.pathname.replace(e.value.base,"").replace(/(^.*?\/).*$/,"/$1");t.value.length&&(s.value=t.value.find(({link:i})=>i.startsWith(a))||t.value[0])});const c=D(()=>{var a,i,n,o;return{code:404,title:"PAGE NOT FOUND",quote:"But if you don't change your direction, and if you keep looking, you may end up where you are heading.",linkLabel:"go to home",linkText:"Take me home",...s.value.index==="root"?(a=e.value.themeConfig)==null?void 0:a.notFound:(o=(n=(i=e.value.locales)==null?void 0:i[s.value.index])==null?void 0:n.themeConfig)==null?void 0:o.notFound}});return(a,i)=>(m(),y("div",bd,[R("p",wd,J(c.value.code),1),R("h1",Ad,J(c.value.title),1),kd,R("blockquote",Md,J(c.value.quote),1),R("div",Od,[R("a",{class:"link",href:C(Xs)(s.value.link),"aria-label":c.value.linkLabel},J(c.value.linkText),9,Dd)])]))}}),zd=O(Nd,[["__scopeId","data-v-d1e76dde"]]);function mu(r,e){if(Array.isArray(r))return qn(r);if(r==null)return[];e=Fs(e);const t=Object.keys(r).sort((c,a)=>a.split("/").length-c.split("/").length).find(c=>e.startsWith(Fs(c))),s=t?r[t]:[];return Array.isArray(s)?qn(s):qn(s.items,s.base)}function Ld(r){const e=[];let t=0;for(const s in r){const c=r[s];if(c.items){t=e.push(c);continue}e[t]||e.push({items:[]}),e[t].items.push(c)}return e}function jd(r){const e=[];function t(s){for(const c of s)c.text&&c.link&&e.push({text:c.text,link:c.link,docFooterText:c.docFooterText}),c.items&&t(c.items)}return t(r),e}function xs(r,e){return Array.isArray(e)?e.some(t=>xs(r,t)):lt(r,e.link)?!0:e.items?xs(r,e.items):!1}function qn(r,e){return[...r].map(t=>{const s={...t},c=s.base||e;return c&&s.link&&(s.link=c+s.link),s.items&&(s.items=qn(s.items,c)),s})}function Be(){const{frontmatter:r,page:e,theme:t}=V(),s=$s("(min-width: 960px)"),c=F(!1),a=D(()=>{const g=t.value.sidebar,f=e.value.relativePath;return g?mu(g,f):[]}),i=F(a.value);Ie(a,(g,f)=>{JSON.stringify(g)!==JSON.stringify(f)&&(i.value=a.value)});const n=D(()=>r.value.sidebar!==!1&&i.value.length>0&&r.value.layout!=="home"),o=D(()=>u?r.value.aside==null?t.value.aside==="left":r.value.aside==="left":!1),u=D(()=>r.value.layout==="home"?!1:r.value.aside!=null?!!r.value.aside:t.value.aside!==!1),p=D(()=>n.value&&s.value),l=D(()=>n.value?Ld(i.value):[]);function d(){c.value=!0}function h(){c.value=!1}function v(){c.value?h():d()}return{isOpen:c,sidebar:i,sidebarGroups:l,hasSidebar:n,hasAside:u,leftAside:o,isSidebarEnabled:p,open:d,close:h,toggle:v}}function Bd(r,e){let t;Jn(()=>{t=r.value?document.activeElement:void 0}),Oe(()=>{window.addEventListener("keyup",s)}),Gn(()=>{window.removeEventListener("keyup",s)});function s(c){c.key==="Escape"&&r.value&&(e(),t==null||t.focus())}}function $d(r){const{page:e,hash:t}=V(),s=F(!1),c=D(()=>r.value.collapsed!=null),a=D(()=>!!r.value.link),i=F(!1),n=()=>{i.value=lt(e.value.relativePath,r.value.link)};Ie([e,r,t],n),Oe(n);const o=D(()=>i.value?!0:r.value.items?xs(e.value.relativePath,r.value.items):!1),u=D(()=>!!(r.value.items&&r.value.items.length));Jn(()=>{s.value=!!(c.value&&r.value.collapsed)}),pu(()=>{(i.value||o.value)&&(s.value=!1)});function p(){c.value&&(s.value=!s.value)}return{collapsed:s,collapsible:c,isLink:a,isActiveLink:i,hasActiveLink:o,hasChildren:u,toggle:p}}function qd(){const{hasSidebar:r}=Be(),e=$s("(min-width: 960px)"),t=$s("(min-width: 1280px)");return{isAsideEnabled:D(()=>!t.value&&!e.value?!1:r.value?t.value:e.value)}}const Vs=[];function Su(r){return typeof r.outline=="object"&&!Array.isArray(r.outline)&&r.outline.label||r.outlineTitle||"On this page"}function Ys(r){const e=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(t=>t.id&&t.hasChildNodes()).map(t=>{const s=Number(t.tagName[1]);return{element:t,title:Fd(t),link:"#"+t.id,level:s}});return xd(e,r)}function Fd(r){let e="";for(const t of r.childNodes)if(t.nodeType===1){if(t.classList.contains("VPBadge")||t.classList.contains("header-anchor")||t.classList.contains("ignore-header"))continue;e+=t.textContent}else t.nodeType===3&&(e+=t.textContent);return e.trim()}function xd(r,e){if(e===!1)return[];const t=(typeof e=="object"&&!Array.isArray(e)?e.level:e)||2,[s,c]=typeof t=="number"?[t,t]:t==="deep"?[2,6]:t;r=r.filter(i=>i.level>=s&&i.level<=c),Vs.length=0;for(const{element:i,link:n}of r)Vs.push({element:i,link:n});const a=[];e:for(let i=0;i<r.length;i++){const n=r[i];if(i===0)a.push(n);else{for(let o=i-1;o>=0;o--){const u=r[o];if(u.level<n.level){(u.children||(u.children=[])).push(n);continue e}}a.push(n)}}return a}function Vd(r,e){const{isAsideEnabled:t}=qd(),s=Ed(a,100);let c=null;Oe(()=>{requestAnimationFrame(a),window.addEventListener("scroll",s)}),ad(()=>{i(location.hash)}),Gn(()=>{window.removeEventListener("scroll",s)});function a(){if(!t.value)return;const n=window.scrollY,o=window.innerHeight,u=document.body.offsetHeight,p=Math.abs(n+o-u)<1,l=Vs.map(({element:h,link:v})=>({link:v,top:Ud(h)})).filter(({top:h})=>!Number.isNaN(h)).sort((h,v)=>h.top-v.top);if(!l.length){i(null);return}if(n<1){i(null);return}if(p){i(l[l.length-1].link);return}let d=null;for(const{link:h,top:v}of l){if(v>n+cd()+4)break;d=h}i(d)}function i(n){c&&c.classList.remove("active"),n==null?c=null:c=r.value.querySelector(`a[href="${decodeURIComponent(n)}"]`);const o=c;o?(o.classList.add("active"),e.value.style.top=o.offsetTop+39+"px",e.value.style.opacity="1"):(e.value.style.top="33px",e.value.style.opacity="0")}}function Ud(r){let e=0;for(;r!==document.body;){if(r===null)return NaN;e+=r.offsetTop,r=r.offsetParent}return e}const Hd=["href","title"],Wd=w({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(r){function e({target:t}){const s=t.href.split("#")[1],c=document.getElementById(decodeURIComponent(s));c==null||c.focus({preventScroll:!0})}return(t,s)=>{const c=He("VPDocOutlineItem",!0);return m(),y("ul",{class:G(["VPDocOutlineItem",t.root?"root":"nested"])},[(m(!0),y(Q,null,ge(t.headers,({children:a,link:i,title:n})=>(m(),y("li",null,[R("a",{class:"outline-link",href:i,onClick:e,title:n},J(n),9,Hd),a!=null&&a.length?(m(),N(c,{key:0,headers:a},null,8,["headers"])):T("",!0)]))),256))],2)}}}),Cu=O(Wd,[["__scopeId","data-v-53c99d69"]]),Kd={class:"content"},Jd={"aria-level":"2",class:"outline-title",id:"doc-outline-aria-label",role:"heading"},Gd=w({__name:"VPDocAsideOutline",setup(r){const{frontmatter:e,theme:t}=V(),s=lu([]);Qn(()=>{s.value=Ys(e.value.outline??t.value.outline)});const c=F(),a=F();return Vd(c,a),(i,n)=>(m(),y("nav",{"aria-labelledby":"doc-outline-aria-label",class:G(["VPDocAsideOutline",{"has-outline":s.value.length>0}]),ref_key:"container",ref:c,role:"navigation"},[R("div",Kd,[R("div",{class:"outline-marker",ref_key:"marker",ref:a},null,512),R("div",Jd,J(C(Su)(C(t))),1),A(Cu,{headers:s.value,root:!0},null,8,["headers"])])],2))}}),Qd=O(Gd,[["__scopeId","data-v-269d7ea7"]]),Xd={class:"VPDocAsideCarbonAds"},Zd=w({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(r){const e=()=>null;return(t,s)=>(m(),y("div",Xd,[A(C(e),{"carbon-ads":t.carbonAds},null,8,["carbon-ads"])]))}}),Yd=r=>(te("data-v-cb998dce"),r=r(),re(),r),eh={class:"VPDocAside"},th=Yd(()=>R("div",{class:"spacer"},null,-1)),rh=w({__name:"VPDocAside",setup(r){const{theme:e}=V();return(t,s)=>(m(),y("div",eh,[P(t.$slots,"aside-top",{},void 0,!0),P(t.$slots,"aside-outline-before",{},void 0,!0),A(Qd),P(t.$slots,"aside-outline-after",{},void 0,!0),th,P(t.$slots,"aside-ads-before",{},void 0,!0),C(e).carbonAds?(m(),N(Zd,{key:0,"carbon-ads":C(e).carbonAds},null,8,["carbon-ads"])):T("",!0),P(t.$slots,"aside-ads-after",{},void 0,!0),P(t.$slots,"aside-bottom",{},void 0,!0)]))}}),nh=O(rh,[["__scopeId","data-v-cb998dce"]]);function ih(){const{theme:r,page:e}=V();return D(()=>{const{text:t="Edit this page",pattern:s=""}=r.value.editLink||{};let c;return typeof s=="function"?c=s(e.value):c=s.replace(/:path/g,e.value.filePath),{url:c,text:t}})}function sh(){const{page:r,theme:e,frontmatter:t}=V();return D(()=>{var u,p,l,d,h,v,g,f;const s=mu(e.value.sidebar,r.value.relativePath),c=jd(s),a=oh(c,S=>S.link.replace(/[?#].*$/,"")),i=a.findIndex(S=>lt(r.value.relativePath,S.link)),n=((u=e.value.docFooter)==null?void 0:u.prev)===!1&&!t.value.prev||t.value.prev===!1,o=((p=e.value.docFooter)==null?void 0:p.next)===!1&&!t.value.next||t.value.next===!1;return{prev:n?void 0:{text:(typeof t.value.prev=="string"?t.value.prev:typeof t.value.prev=="object"?t.value.prev.text:void 0)??((l=a[i-1])==null?void 0:l.docFooterText)??((d=a[i-1])==null?void 0:d.text),link:(typeof t.value.prev=="object"?t.value.prev.link:void 0)??((h=a[i-1])==null?void 0:h.link)},next:o?void 0:{text:(typeof t.value.next=="string"?t.value.next:typeof t.value.next=="object"?t.value.next.text:void 0)??((v=a[i+1])==null?void 0:v.docFooterText)??((g=a[i+1])==null?void 0:g.text),link:(typeof t.value.next=="object"?t.value.next.link:void 0)??((f=a[i+1])==null?void 0:f.link)}}})}function oh(r,e){const t=new Set;return r.filter(s=>{const c=e(s);return t.has(c)?!1:t.add(c)})}const Ee=w({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(r){const e=r,t=D(()=>e.tag??(e.href?"a":"span")),s=D(()=>e.href&&du.test(e.href));return(c,a)=>(m(),N(yt(t.value),{class:G(["VPLink",{link:c.href,"vp-external-link-icon":s.value,"no-icon":c.noIcon}]),href:c.href?C(Zs)(c.href):void 0,target:c.target??(s.value?"_blank":void 0),rel:c.rel??(s.value?"noreferrer":void 0)},{default:_(()=>[P(c.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),ah={class:"VPLastUpdated"},ch=["datetime"],uh=w({__name:"VPDocFooterLastUpdated",setup(r){const{theme:e,page:t,frontmatter:s,lang:c}=V(),a=D(()=>new Date(s.value.lastUpdated??t.value.lastUpdated)),i=D(()=>a.value.toISOString()),n=F("");return Oe(()=>{Jn(()=>{var o,u,p;n.value=new Intl.DateTimeFormat((u=(o=e.value.lastUpdated)==null?void 0:o.formatOptions)!=null&&u.forceLocale?c.value:void 0,((p=e.value.lastUpdated)==null?void 0:p.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(a.value)})}),(o,u)=>{var p;return m(),y("p",ah,[be(J(((p=C(e).lastUpdated)==null?void 0:p.text)||C(e).lastUpdatedText||"Last updated")+": ",1),R("time",{datetime:i.value},J(n.value),9,ch)])}}}),ph=O(uh,[["__scopeId","data-v-19a7ae4e"]]),yu=r=>(te("data-v-5941af80"),r=r(),re(),r),lh={key:0,class:"VPDocFooter"},dh={key:0,class:"edit-info"},hh={key:0,class:"edit-link"},vh=yu(()=>R("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),fh={key:1,class:"last-updated"},gh={key:1,class:"prev-next","aria-labelledby":"doc-footer-aria-label"},mh=yu(()=>R("span",{class:"visually-hidden",id:"doc-footer-aria-label"},"Pager",-1)),Sh={class:"pager"},Ch=["innerHTML"],yh=["innerHTML"],Ph={class:"pager"},Rh=["innerHTML"],_h=["innerHTML"],Eh=w({__name:"VPDocFooter",setup(r){const{theme:e,page:t,frontmatter:s}=V(),c=ih(),a=sh(),i=D(()=>e.value.editLink&&s.value.editLink!==!1),n=D(()=>t.value.lastUpdated&&s.value.lastUpdated!==!1),o=D(()=>i.value||n.value||a.value.prev||a.value.next);return(u,p)=>{var l,d,h,v;return o.value?(m(),y("footer",lh,[P(u.$slots,"doc-footer-before",{},void 0,!0),i.value||n.value?(m(),y("div",dh,[i.value?(m(),y("div",hh,[A(Ee,{class:"edit-link-button",href:C(c).url,"no-icon":!0},{default:_(()=>[vh,be(" "+J(C(c).text),1)]),_:1},8,["href"])])):T("",!0),n.value?(m(),y("div",fh,[A(ph)])):T("",!0)])):T("",!0),(l=C(a).prev)!=null&&l.link||(d=C(a).next)!=null&&d.link?(m(),y("nav",gh,[mh,R("div",Sh,[(h=C(a).prev)!=null&&h.link?(m(),N(Ee,{key:0,class:"pager-link prev",href:C(a).prev.link},{default:_(()=>{var g;return[R("span",{class:"desc",innerHTML:((g=C(e).docFooter)==null?void 0:g.prev)||"Previous page"},null,8,Ch),R("span",{class:"title",innerHTML:C(a).prev.text},null,8,yh)]}),_:1},8,["href"])):T("",!0)]),R("div",Ph,[(v=C(a).next)!=null&&v.link?(m(),N(Ee,{key:0,class:"pager-link next",href:C(a).next.link},{default:_(()=>{var g;return[R("span",{class:"desc",innerHTML:((g=C(e).docFooter)==null?void 0:g.next)||"Next page"},null,8,Rh),R("span",{class:"title",innerHTML:C(a).next.text},null,8,_h)]}),_:1},8,["href"])):T("",!0)])])):T("",!0)])):T("",!0)}}}),Ih=O(Eh,[["__scopeId","data-v-5941af80"]]),Th=r=>(te("data-v-e6f2a212"),r=r(),re(),r),bh={class:"container"},wh=Th(()=>R("div",{class:"aside-curtain"},null,-1)),Ah={class:"aside-container"},kh={class:"aside-content"},Mh={class:"content"},Oh={class:"content-container"},Dh={class:"main"},Nh=w({__name:"VPDoc",setup(r){const{theme:e}=V(),t=Xn(),{hasSidebar:s,hasAside:c,leftAside:a}=Be(),i=D(()=>t.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(n,o)=>{const u=He("Content");return m(),y("div",{class:G(["VPDoc",{"has-sidebar":C(s),"has-aside":C(c)}])},[P(n.$slots,"doc-top",{},void 0,!0),R("div",bh,[C(c)?(m(),y("div",{key:0,class:G(["aside",{"left-aside":C(a)}])},[wh,R("div",Ah,[R("div",kh,[A(nh,null,{"aside-top":_(()=>[P(n.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":_(()=>[P(n.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":_(()=>[P(n.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":_(()=>[P(n.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":_(()=>[P(n.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":_(()=>[P(n.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):T("",!0),R("div",Mh,[R("div",Oh,[P(n.$slots,"doc-before",{},void 0,!0),R("main",Dh,[A(u,{class:G(["vp-doc",[i.value,C(e).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),A(Ih,null,{"doc-footer-before":_(()=>[P(n.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),P(n.$slots,"doc-after",{},void 0,!0)])])]),P(n.$slots,"doc-bottom",{},void 0,!0)],2)}}}),zh=O(Nh,[["__scopeId","data-v-e6f2a212"]]),Lh=w({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(r){const e=r,t=D(()=>e.href&&du.test(e.href)),s=D(()=>e.tag||e.href?"a":"button");return(c,a)=>(m(),N(yt(s.value),{class:G(["VPButton",[c.size,c.theme]]),href:c.href?C(Zs)(c.href):void 0,target:e.target??(t.value?"_blank":void 0),rel:e.rel??(t.value?"noreferrer":void 0)},{default:_(()=>[be(J(c.text),1)]),_:1},8,["class","href","target","rel"]))}}),jh=O(Lh,[["__scopeId","data-v-c9cf0e3c"]]),Bh=["src","alt"],$h=w({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(r){return(e,t)=>{const s=He("VPImage",!0);return e.image?(m(),y(Q,{key:0},[typeof e.image=="string"||"src"in e.image?(m(),y("img",$n({key:0,class:"VPImage"},typeof e.image=="string"?e.$attrs:{...e.image,...e.$attrs},{src:C(Xs)(typeof e.image=="string"?e.image:e.image.src),alt:e.alt??(typeof e.image=="string"?"":e.image.alt||"")}),null,16,Bh)):(m(),y(Q,{key:1},[A(s,$n({class:"dark",image:e.image.dark,alt:e.image.alt},e.$attrs),null,16,["image","alt"]),A(s,$n({class:"light",image:e.image.light,alt:e.image.alt},e.$attrs),null,16,["image","alt"])],64))],64)):T("",!0)}}}),Hn=O($h,[["__scopeId","data-v-ab19afbb"]]),qh=r=>(te("data-v-b10c5094"),r=r(),re(),r),Fh={class:"container"},xh={class:"main"},Vh={key:0,class:"name"},Uh=["innerHTML"],Hh=["innerHTML"],Wh=["innerHTML"],Kh={key:0,class:"actions"},Jh={key:0,class:"image"},Gh={class:"image-container"},Qh=qh(()=>R("div",{class:"image-bg"},null,-1)),Xh=w({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(r){const e=Zn("hero-image-slot-exists");return(t,s)=>(m(),y("div",{class:G(["VPHero",{"has-image":t.image||C(e)}])},[R("div",Fh,[R("div",xh,[P(t.$slots,"home-hero-info-before",{},void 0,!0),P(t.$slots,"home-hero-info",{},()=>[t.name?(m(),y("h1",Vh,[R("span",{innerHTML:t.name,class:"clip"},null,8,Uh)])):T("",!0),t.text?(m(),y("p",{key:1,innerHTML:t.text,class:"text"},null,8,Hh)):T("",!0),t.tagline?(m(),y("p",{key:2,innerHTML:t.tagline,class:"tagline"},null,8,Wh)):T("",!0)],!0),P(t.$slots,"home-hero-info-after",{},void 0,!0),t.actions?(m(),y("div",Kh,[(m(!0),y(Q,null,ge(t.actions,c=>(m(),y("div",{key:c.link,class:"action"},[A(jh,{tag:"a",size:"medium",theme:c.theme,text:c.text,href:c.link,target:c.target,rel:c.rel},null,8,["theme","text","href","target","rel"])]))),128))])):T("",!0),P(t.$slots,"home-hero-actions-after",{},void 0,!0)]),t.image||C(e)?(m(),y("div",Jh,[R("div",Gh,[Qh,P(t.$slots,"home-hero-image",{},()=>[t.image?(m(),N(Hn,{key:0,class:"image-src",image:t.image},null,8,["image"])):T("",!0)],!0)])])):T("",!0)])],2))}}),Zh=O(Xh,[["__scopeId","data-v-b10c5094"]]),Yh=w({__name:"VPHomeHero",setup(r){const{frontmatter:e}=V();return(t,s)=>C(e).hero?(m(),N(Zh,{key:0,class:"VPHomeHero",name:C(e).hero.name,text:C(e).hero.text,tagline:C(e).hero.tagline,image:C(e).hero.image,actions:C(e).hero.actions},{"home-hero-info-before":_(()=>[P(t.$slots,"home-hero-info-before")]),"home-hero-info":_(()=>[P(t.$slots,"home-hero-info")]),"home-hero-info-after":_(()=>[P(t.$slots,"home-hero-info-after")]),"home-hero-actions-after":_(()=>[P(t.$slots,"home-hero-actions-after")]),"home-hero-image":_(()=>[P(t.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):T("",!0)}}),ev=r=>(te("data-v-bd37d1a2"),r=r(),re(),r),tv={class:"box"},rv={key:0,class:"icon"},nv=["innerHTML"],iv=["innerHTML"],sv=["innerHTML"],ov={key:4,class:"link-text"},av={class:"link-text-value"},cv=ev(()=>R("span",{class:"vpi-arrow-right link-text-icon"},null,-1)),uv=w({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(r){return(e,t)=>(m(),N(Ee,{class:"VPFeature",href:e.link,rel:e.rel,target:e.target,"no-icon":!0,tag:e.link?"a":"div"},{default:_(()=>[R("article",tv,[typeof e.icon=="object"&&e.icon.wrap?(m(),y("div",rv,[A(Hn,{image:e.icon,alt:e.icon.alt,height:e.icon.height||48,width:e.icon.width||48},null,8,["image","alt","height","width"])])):typeof e.icon=="object"?(m(),N(Hn,{key:1,image:e.icon,alt:e.icon.alt,height:e.icon.height||48,width:e.icon.width||48},null,8,["image","alt","height","width"])):e.icon?(m(),y("div",{key:2,class:"icon",innerHTML:e.icon},null,8,nv)):T("",!0),R("h2",{class:"title",innerHTML:e.title},null,8,iv),e.details?(m(),y("p",{key:3,class:"details",innerHTML:e.details},null,8,sv)):T("",!0),e.linkText?(m(),y("div",ov,[R("p",av,[be(J(e.linkText)+" ",1),cv])])):T("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),pv=O(uv,[["__scopeId","data-v-bd37d1a2"]]),lv={key:0,class:"VPFeatures"},dv={class:"container"},hv={class:"items"},vv=w({__name:"VPFeatures",props:{features:{}},setup(r){const e=r,t=D(()=>{const s=e.features.length;if(s){if(s===2)return"grid-2";if(s===3)return"grid-3";if(s%3===0)return"grid-6";if(s>3)return"grid-4"}else return});return(s,c)=>s.features?(m(),y("div",lv,[R("div",dv,[R("div",hv,[(m(!0),y(Q,null,ge(s.features,a=>(m(),y("div",{key:a.title,class:G(["item",[t.value]])},[A(pv,{icon:a.icon,title:a.title,details:a.details,link:a.link,"link-text":a.linkText,rel:a.rel,target:a.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):T("",!0)}}),fv=O(vv,[["__scopeId","data-v-b1eea84a"]]),gv=w({__name:"VPHomeFeatures",setup(r){const{frontmatter:e}=V();return(t,s)=>C(e).features?(m(),N(fv,{key:0,class:"VPHomeFeatures",features:C(e).features},null,8,["features"])):T("",!0)}}),mv=w({__name:"VPHomeContent",setup(r){const{width:e}=ud({includeScrollbar:!1});return(t,s)=>(m(),y("div",{class:"vp-doc container",style:hu(C(e)?{"--vp-offset":`calc(50% - ${C(e)/2}px)`}:{})},[P(t.$slots,"default",{},void 0,!0)],4))}}),Sv=O(mv,[["__scopeId","data-v-d59ac166"]]),Cv={class:"VPHome"},yv=w({__name:"VPHome",setup(r){const{frontmatter:e}=V();return(t,s)=>{const c=He("Content");return m(),y("div",Cv,[P(t.$slots,"home-hero-before",{},void 0,!0),A(Yh,null,{"home-hero-info-before":_(()=>[P(t.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":_(()=>[P(t.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":_(()=>[P(t.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":_(()=>[P(t.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":_(()=>[P(t.$slots,"home-hero-image",{},void 0,!0)]),_:3}),P(t.$slots,"home-hero-after",{},void 0,!0),P(t.$slots,"home-features-before",{},void 0,!0),A(gv),P(t.$slots,"home-features-after",{},void 0,!0),C(e).markdownStyles!==!1?(m(),N(Sv,{key:0},{default:_(()=>[A(c)]),_:1})):(m(),N(c,{key:1}))])}}}),Pv=O(yv,[["__scopeId","data-v-07b1ad08"]]),Rv={},_v={class:"VPPage"};function Ev(r,e){const t=He("Content");return m(),y("div",_v,[P(r.$slots,"page-top"),A(t),P(r.$slots,"page-bottom")])}const Iv=O(Rv,[["render",Ev]]),Tv=w({__name:"VPContent",setup(r){const{page:e,frontmatter:t}=V(),{hasSidebar:s}=Be();return(c,a)=>(m(),y("div",{class:G(["VPContent",{"has-sidebar":C(s),"is-home":C(t).layout==="home"}]),id:"VPContent"},[C(e).isNotFound?P(c.$slots,"not-found",{key:0},()=>[A(zd)],!0):C(t).layout==="page"?(m(),N(Iv,{key:1},{"page-top":_(()=>[P(c.$slots,"page-top",{},void 0,!0)]),"page-bottom":_(()=>[P(c.$slots,"page-bottom",{},void 0,!0)]),_:3})):C(t).layout==="home"?(m(),N(Pv,{key:2},{"home-hero-before":_(()=>[P(c.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":_(()=>[P(c.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":_(()=>[P(c.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":_(()=>[P(c.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":_(()=>[P(c.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":_(()=>[P(c.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":_(()=>[P(c.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":_(()=>[P(c.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":_(()=>[P(c.$slots,"home-features-after",{},void 0,!0)]),_:3})):C(t).layout&&C(t).layout!=="doc"?(m(),N(yt(C(t).layout),{key:3})):(m(),N(zh,{key:4},{"doc-top":_(()=>[P(c.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":_(()=>[P(c.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":_(()=>[P(c.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":_(()=>[P(c.$slots,"doc-before",{},void 0,!0)]),"doc-after":_(()=>[P(c.$slots,"doc-after",{},void 0,!0)]),"aside-top":_(()=>[P(c.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":_(()=>[P(c.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":_(()=>[P(c.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":_(()=>[P(c.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":_(()=>[P(c.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":_(()=>[P(c.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),bv=O(Tv,[["__scopeId","data-v-9a6c75ad"]]),wv={class:"container"},Av=["innerHTML"],kv=["innerHTML"],Mv=w({__name:"VPFooter",setup(r){const{theme:e,frontmatter:t}=V(),{hasSidebar:s}=Be();return(c,a)=>C(e).footer&&C(t).footer!==!1?(m(),y("footer",{key:0,class:G(["VPFooter",{"has-sidebar":C(s)}])},[R("div",wv,[C(e).footer.message?(m(),y("p",{key:0,class:"message",innerHTML:C(e).footer.message},null,8,Av)):T("",!0),C(e).footer.copyright?(m(),y("p",{key:1,class:"copyright",innerHTML:C(e).footer.copyright},null,8,kv)):T("",!0)])],2)):T("",!0)}}),Ov=O(Mv,[["__scopeId","data-v-566314d4"]]);function Dv(){const{theme:r,frontmatter:e}=V(),t=lu([]),s=D(()=>t.value.length>0);return Qn(()=>{t.value=Ys(e.value.outline??r.value.outline)}),{headers:t,hasLocalNav:s}}const Nv=r=>(te("data-v-883964e0"),r=r(),re(),r),zv={class:"menu-text"},Lv=Nv(()=>R("span",{class:"vpi-chevron-right icon"},null,-1)),jv={class:"header"},Bv={class:"outline"},$v=w({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(r){const e=r,{theme:t}=V(),s=F(!1),c=F(0),a=F(),i=F();function n(l){var d;(d=a.value)!=null&&d.contains(l.target)||(s.value=!1)}Ie(s,l=>{if(l){document.addEventListener("click",n);return}document.removeEventListener("click",n)}),qs("Escape",()=>{s.value=!1}),Qn(()=>{s.value=!1});function o(){s.value=!s.value,c.value=window.innerHeight+Math.min(window.scrollY-e.navHeight,0)}function u(l){l.target.classList.contains("outline-link")&&(i.value&&(i.value.style.transition="none"),pd(()=>{s.value=!1}))}function p(){s.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(l,d)=>(m(),y("div",{class:"VPLocalNavOutlineDropdown",style:hu({"--vp-vh":c.value+"px"}),ref_key:"main",ref:a},[l.headers.length>0?(m(),y("button",{key:0,onClick:o,class:G({open:s.value})},[R("span",zv,J(C(Su)(C(t))),1),Lv],2)):(m(),y("button",{key:1,onClick:p},J(C(t).returnToTopLabel||"Return to top"),1)),A(Qs,{name:"flyout"},{default:_(()=>[s.value?(m(),y("div",{key:0,ref_key:"items",ref:i,class:"items",onClick:u},[R("div",jv,[R("a",{class:"top-link",href:"#",onClick:p},J(C(t).returnToTopLabel||"Return to top"),1)]),R("div",Bv,[A(Cu,{headers:l.headers},null,8,["headers"])])],512)):T("",!0)]),_:1})],4))}}),qv=O($v,[["__scopeId","data-v-883964e0"]]),Fv=r=>(te("data-v-2488c25a"),r=r(),re(),r),xv={class:"container"},Vv=["aria-expanded"],Uv=Fv(()=>R("span",{class:"vpi-align-left menu-icon"},null,-1)),Hv={class:"menu-text"},Wv=w({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(r){const{theme:e,frontmatter:t}=V(),{hasSidebar:s}=Be(),{headers:c}=Dv(),{y:a}=vu(),i=F(0);Oe(()=>{i.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),Qn(()=>{c.value=Ys(t.value.outline??e.value.outline)});const n=D(()=>c.value.length===0),o=D(()=>n.value&&!s.value),u=D(()=>({VPLocalNav:!0,"has-sidebar":s.value,empty:n.value,fixed:o.value}));return(p,l)=>C(t).layout!=="home"&&(!o.value||C(a)>=i.value)?(m(),y("div",{key:0,class:G(u.value)},[R("div",xv,[C(s)?(m(),y("button",{key:0,class:"menu","aria-expanded":p.open,"aria-controls":"VPSidebarNav",onClick:l[0]||(l[0]=d=>p.$emit("open-menu"))},[Uv,R("span",Hv,J(C(e).sidebarMenuLabel||"Menu"),1)],8,Vv)):T("",!0),A(qv,{headers:C(c),navHeight:i.value},null,8,["headers","navHeight"])])],2)):T("",!0)}}),Kv=O(Wv,[["__scopeId","data-v-2488c25a"]]);function Jv(){const r=F(!1);function e(){r.value=!0,window.addEventListener("resize",c)}function t(){r.value=!1,window.removeEventListener("resize",c)}function s(){r.value?t():e()}function c(){window.outerWidth>=768&&t()}const a=Xn();return Ie(()=>a.path,t),{isScreenOpen:r,openScreen:e,closeScreen:t,toggleScreen:s}}const Gv={},Qv={class:"VPSwitch",type:"button",role:"switch"},Xv={class:"check"},Zv={key:0,class:"icon"};function Yv(r,e){return m(),y("button",Qv,[R("span",Xv,[r.$slots.default?(m(),y("span",Zv,[P(r.$slots,"default",{},void 0,!0)])):T("",!0)])])}const ef=O(Gv,[["render",Yv],["__scopeId","data-v-b4ccac88"]]),Pu=r=>(te("data-v-7df97737"),r=r(),re(),r),tf=Pu(()=>R("span",{class:"vpi-sun sun"},null,-1)),rf=Pu(()=>R("span",{class:"vpi-moon moon"},null,-1)),nf=w({__name:"VPSwitchAppearance",setup(r){const{isDark:e,theme:t}=V(),s=Zn("toggle-appearance",()=>{e.value=!e.value}),c=D(()=>e.value?t.value.lightModeSwitchTitle||"Switch to light theme":t.value.darkModeSwitchTitle||"Switch to dark theme");return(a,i)=>(m(),N(ef,{title:c.value,class:"VPSwitchAppearance","aria-checked":C(e),onClick:C(s)},{default:_(()=>[tf,rf]),_:1},8,["title","aria-checked","onClick"]))}}),eo=O(nf,[["__scopeId","data-v-7df97737"]]),sf={key:0,class:"VPNavBarAppearance"},of=w({__name:"VPNavBarAppearance",setup(r){const{site:e}=V();return(t,s)=>C(e).appearance&&C(e).appearance!=="force-dark"?(m(),y("div",sf,[A(eo)])):T("",!0)}}),af=O(of,[["__scopeId","data-v-283b26e9"]]),to=F();let Ru=!1,ms=0;function cf(r){const e=F(!1);if(Yn){!Ru&&uf(),ms++;const t=Ie(to,s=>{var c,a,i;s===r.el.value||(c=r.el.value)!=null&&c.contains(s)?(e.value=!0,(a=r.onFocus)==null||a.call(r)):(e.value=!1,(i=r.onBlur)==null||i.call(r))});Gn(()=>{t(),ms--,ms||pf()})}return ld(e)}function uf(){document.addEventListener("focusin",_u),Ru=!0,to.value=document.activeElement}function pf(){document.removeEventListener("focusin",_u)}function _u(){to.value=document.activeElement}const lf={class:"VPMenuLink"},df=w({__name:"VPMenuLink",props:{item:{}},setup(r){const{page:e}=V();return(t,s)=>(m(),y("div",lf,[A(Ee,{class:G({active:C(lt)(C(e).relativePath,t.item.activeMatch||t.item.link,!!t.item.activeMatch)}),href:t.item.link,target:t.item.target,rel:t.item.rel},{default:_(()=>[be(J(t.item.text),1)]),_:1},8,["class","href","target","rel"])]))}}),ei=O(df,[["__scopeId","data-v-f51f088d"]]),hf={class:"VPMenuGroup"},vf={key:0,class:"title"},ff=w({__name:"VPMenuGroup",props:{text:{},items:{}},setup(r){return(e,t)=>(m(),y("div",hf,[e.text?(m(),y("p",vf,J(e.text),1)):T("",!0),(m(!0),y(Q,null,ge(e.items,s=>(m(),y(Q,null,["link"in s?(m(),N(ei,{key:0,item:s},null,8,["item"])):T("",!0)],64))),256))]))}}),gf=O(ff,[["__scopeId","data-v-a6b0397c"]]),mf={class:"VPMenu"},Sf={key:0,class:"items"},Cf=w({__name:"VPMenu",props:{items:{}},setup(r){return(e,t)=>(m(),y("div",mf,[e.items?(m(),y("div",Sf,[(m(!0),y(Q,null,ge(e.items,s=>(m(),y(Q,{key:s.text},["link"in s?(m(),N(ei,{key:0,item:s},null,8,["item"])):(m(),N(gf,{key:1,text:s.text,items:s.items},null,8,["text","items"]))],64))),128))])):T("",!0),P(e.$slots,"default",{},void 0,!0)]))}}),yf=O(Cf,[["__scopeId","data-v-e42ed9b3"]]),Pf=r=>(te("data-v-af5898d3"),r=r(),re(),r),Rf=["aria-expanded","aria-label"],_f={key:0,class:"text"},Ef=["innerHTML"],If=Pf(()=>R("span",{class:"vpi-chevron-down text-icon"},null,-1)),Tf={key:1,class:"vpi-more-horizontal icon"},bf={class:"menu"},wf=w({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(r){const e=F(!1),t=F();cf({el:t,onBlur:s});function s(){e.value=!1}return(c,a)=>(m(),y("div",{class:"VPFlyout",ref_key:"el",ref:t,onMouseenter:a[1]||(a[1]=i=>e.value=!0),onMouseleave:a[2]||(a[2]=i=>e.value=!1)},[R("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":e.value,"aria-label":c.label,onClick:a[0]||(a[0]=i=>e.value=!e.value)},[c.button||c.icon?(m(),y("span",_f,[c.icon?(m(),y("span",{key:0,class:G([c.icon,"option-icon"])},null,2)):T("",!0),c.button?(m(),y("span",{key:1,innerHTML:c.button},null,8,Ef)):T("",!0),If])):(m(),y("span",Tf))],8,Rf),R("div",bf,[A(yf,{items:c.items},{default:_(()=>[P(c.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),ro=O(wf,[["__scopeId","data-v-af5898d3"]]),Af=["href","aria-label","innerHTML"],kf=w({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(r){const e=r,t=D(()=>typeof e.icon=="object"?e.icon.svg:`<span class="vpi-social-${e.icon}" />`);return(s,c)=>(m(),y("a",{class:"VPSocialLink no-icon",href:s.link,"aria-label":s.ariaLabel??(typeof s.icon=="string"?s.icon:""),target:"_blank",rel:"noopener",innerHTML:t.value},null,8,Af))}}),Mf=O(kf,[["__scopeId","data-v-358b6670"]]),Of={class:"VPSocialLinks"},Df=w({__name:"VPSocialLinks",props:{links:{}},setup(r){return(e,t)=>(m(),y("div",Of,[(m(!0),y(Q,null,ge(e.links,({link:s,icon:c,ariaLabel:a})=>(m(),N(Mf,{key:s,icon:c,link:s,ariaLabel:a},null,8,["icon","link","ariaLabel"]))),128))]))}}),ti=O(Df,[["__scopeId","data-v-e71e869c"]]),Nf={key:0,class:"group translations"},zf={class:"trans-title"},Lf={key:1,class:"group"},jf={class:"item appearance"},Bf={class:"label"},$f={class:"appearance-action"},qf={key:2,class:"group"},Ff={class:"item social-links"},xf=w({__name:"VPNavBarExtra",setup(r){const{site:e,theme:t}=V(),{localeLinks:s,currentLang:c}=yn({correspondingLink:!0}),a=D(()=>s.value.length&&c.value.label||e.value.appearance||t.value.socialLinks);return(i,n)=>a.value?(m(),N(ro,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:_(()=>[C(s).length&&C(c).label?(m(),y("div",Nf,[R("p",zf,J(C(c).label),1),(m(!0),y(Q,null,ge(C(s),o=>(m(),N(ei,{key:o.link,item:o},null,8,["item"]))),128))])):T("",!0),C(e).appearance&&C(e).appearance!=="force-dark"?(m(),y("div",Lf,[R("div",jf,[R("p",Bf,J(C(t).darkModeSwitchLabel||"Appearance"),1),R("div",$f,[A(eo)])])])):T("",!0),C(t).socialLinks?(m(),y("div",qf,[R("div",Ff,[A(ti,{class:"social-links-list",links:C(t).socialLinks},null,8,["links"])])])):T("",!0)]),_:1})):T("",!0)}}),Vf=O(xf,[["__scopeId","data-v-8e87c032"]]),Uf=r=>(te("data-v-6bee1efd"),r=r(),re(),r),Hf=["aria-expanded"],Wf=Uf(()=>R("span",{class:"container"},[R("span",{class:"top"}),R("span",{class:"middle"}),R("span",{class:"bottom"})],-1)),Kf=[Wf],Jf=w({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(r){return(e,t)=>(m(),y("button",{type:"button",class:G(["VPNavBarHamburger",{active:e.active}]),"aria-label":"mobile navigation","aria-expanded":e.active,"aria-controls":"VPNavScreen",onClick:t[0]||(t[0]=s=>e.$emit("click"))},Kf,10,Hf))}}),Gf=O(Jf,[["__scopeId","data-v-6bee1efd"]]),Qf=["innerHTML"],Xf=w({__name:"VPNavBarMenuLink",props:{item:{}},setup(r){const{page:e}=V();return(t,s)=>(m(),N(Ee,{class:G({VPNavBarMenuLink:!0,active:C(lt)(C(e).relativePath,t.item.activeMatch||t.item.link,!!t.item.activeMatch)}),href:t.item.link,noIcon:t.item.noIcon,target:t.item.target,rel:t.item.rel,tabindex:"0"},{default:_(()=>[R("span",{innerHTML:t.item.text},null,8,Qf)]),_:1},8,["class","href","noIcon","target","rel"]))}}),Zf=O(Xf,[["__scopeId","data-v-08fbf4b6"]]),Yf=w({__name:"VPNavBarMenuGroup",props:{item:{}},setup(r){const e=r,{page:t}=V(),s=a=>"link"in a?lt(t.value.relativePath,a.link,!!e.item.activeMatch):a.items.some(s),c=D(()=>s(e.item));return(a,i)=>(m(),N(ro,{class:G({VPNavBarMenuGroup:!0,active:C(lt)(C(t).relativePath,a.item.activeMatch,!!a.item.activeMatch)||c.value}),button:a.item.text,items:a.item.items},null,8,["class","button","items"]))}}),eg=r=>(te("data-v-f732b5d0"),r=r(),re(),r),tg={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},rg=eg(()=>R("span",{id:"main-nav-aria-label",class:"visually-hidden"},"Main Navigation",-1)),ng=w({__name:"VPNavBarMenu",setup(r){const{theme:e}=V();return(t,s)=>C(e).nav?(m(),y("nav",tg,[rg,(m(!0),y(Q,null,ge(C(e).nav,c=>(m(),y(Q,{key:c.text},["link"in c?(m(),N(Zf,{key:0,item:c},null,8,["item"])):(m(),N(Yf,{key:1,item:c},null,8,["item"]))],64))),128))])):T("",!0)}}),ig=O(ng,[["__scopeId","data-v-f732b5d0"]]);function sg(r){const{localeIndex:e,theme:t}=V();function s(c){var v,g,f;const a=c.split("."),i=(v=t.value.search)==null?void 0:v.options,n=i&&typeof i=="object",o=n&&((f=(g=i.locales)==null?void 0:g[e.value])==null?void 0:f.translations)||null,u=n&&i.translations||null;let p=o,l=u,d=r;const h=a.pop();for(const S of a){let I=null;const k=d==null?void 0:d[S];k&&(I=d=k);const L=l==null?void 0:l[S];L&&(I=l=L);const B=p==null?void 0:p[S];B&&(I=p=B),k||(d=I),L||(l=I),B||(p=I)}return(p==null?void 0:p[h])??(l==null?void 0:l[h])??(d==null?void 0:d[h])??""}return s}const og=["aria-label"],ag={class:"DocSearch-Button-Container"},cg=R("span",{class:"vp-icon DocSearch-Search-Icon"},null,-1),ug={class:"DocSearch-Button-Placeholder"},pg=R("span",{class:"DocSearch-Button-Keys"},[R("kbd",{class:"DocSearch-Button-Key"}),R("kbd",{class:"DocSearch-Button-Key"},"K")],-1),zo=w({__name:"VPNavBarSearchButton",setup(r){const t=sg({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(s,c)=>(m(),y("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":C(t)("button.buttonAriaLabel")},[R("span",ag,[cg,R("span",ug,J(C(t)("button.buttonText")),1)]),pg],8,og))}}),lg={class:"VPNavBarSearch"},dg={id:"local-search"},hg={key:1,id:"docsearch"},vg=w({__name:"VPNavBarSearch",setup(r){const e=dd(()=>hd(()=>import("./VPLocalSearchBox.C6QseHvn.js"),__vite__mapDeps([0,1]))),t=()=>null,{theme:s}=V(),c=F(!1),a=F(!1);Oe(()=>{});function i(){c.value||(c.value=!0,setTimeout(n,16))}function n(){const l=new Event("keydown");l.key="k",l.metaKey=!0,window.dispatchEvent(l),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||n()},16)}function o(l){const d=l.target,h=d.tagName;return d.isContentEditable||h==="INPUT"||h==="SELECT"||h==="TEXTAREA"}const u=F(!1);qs("k",l=>{(l.ctrlKey||l.metaKey)&&(l.preventDefault(),u.value=!0)}),qs("/",l=>{o(l)||(l.preventDefault(),u.value=!0)});const p="local";return(l,d)=>{var h;return m(),y("div",lg,[C(p)==="local"?(m(),y(Q,{key:0},[u.value?(m(),N(C(e),{key:0,onClose:d[0]||(d[0]=v=>u.value=!1)})):T("",!0),R("div",dg,[A(zo,{onClick:d[1]||(d[1]=v=>u.value=!0)})])],64)):C(p)==="algolia"?(m(),y(Q,{key:1},[c.value?(m(),N(C(t),{key:0,algolia:((h=C(s).search)==null?void 0:h.options)??C(s).algolia,onVnodeBeforeMount:d[2]||(d[2]=v=>a.value=!0)},null,8,["algolia"])):T("",!0),a.value?T("",!0):(m(),y("div",hg,[A(zo,{onClick:i})]))],64)):T("",!0)])}}}),fg=w({__name:"VPNavBarSocialLinks",setup(r){const{theme:e}=V();return(t,s)=>C(e).socialLinks?(m(),N(ti,{key:0,class:"VPNavBarSocialLinks",links:C(e).socialLinks},null,8,["links"])):T("",!0)}}),gg=O(fg,[["__scopeId","data-v-ef6192dc"]]),mg=["href","rel","target"],Sg={key:1},Cg={key:2},yg=w({__name:"VPNavBarTitle",setup(r){const{site:e,theme:t}=V(),{hasSidebar:s}=Be(),{currentLang:c}=yn(),a=D(()=>{var o;return typeof t.value.logoLink=="string"?t.value.logoLink:(o=t.value.logoLink)==null?void 0:o.link}),i=D(()=>{var o;return typeof t.value.logoLink=="string"||(o=t.value.logoLink)==null?void 0:o.rel}),n=D(()=>{var o;return typeof t.value.logoLink=="string"||(o=t.value.logoLink)==null?void 0:o.target});return(o,u)=>(m(),y("div",{class:G(["VPNavBarTitle",{"has-sidebar":C(s)}])},[R("a",{class:"title",href:a.value??C(Zs)(C(c).link),rel:i.value,target:n.value},[P(o.$slots,"nav-bar-title-before",{},void 0,!0),C(t).logo?(m(),N(Hn,{key:0,class:"logo",image:C(t).logo},null,8,["image"])):T("",!0),C(t).siteTitle?(m(),y("span",Sg,J(C(t).siteTitle),1)):C(t).siteTitle===void 0?(m(),y("span",Cg,J(C(e).title),1)):T("",!0),P(o.$slots,"nav-bar-title-after",{},void 0,!0)],8,mg)],2))}}),Pg=O(yg,[["__scopeId","data-v-0ad69264"]]),Rg={class:"items"},_g={class:"title"},Eg=w({__name:"VPNavBarTranslations",setup(r){const{theme:e}=V(),{localeLinks:t,currentLang:s}=yn({correspondingLink:!0});return(c,a)=>C(t).length&&C(s).label?(m(),N(ro,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:C(e).langMenuLabel||"Change language"},{default:_(()=>[R("div",Rg,[R("p",_g,J(C(s).label),1),(m(!0),y(Q,null,ge(C(t),i=>(m(),N(ei,{key:i.link,item:i},null,8,["item"]))),128))])]),_:1},8,["label"])):T("",!0)}}),Ig=O(Eg,[["__scopeId","data-v-acee064b"]]),Tg=r=>(te("data-v-844edcde"),r=r(),re(),r),bg={class:"wrapper"},wg={class:"container"},Ag={class:"title"},kg={class:"content"},Mg={class:"content-body"},Og=Tg(()=>R("div",{class:"divider"},[R("div",{class:"divider-line"})],-1)),Dg=w({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(r){const{y:e}=vu(),{hasSidebar:t}=Be(),{frontmatter:s}=V(),c=F({});return pu(()=>{c.value={"has-sidebar":t.value,home:s.value.layout==="home",top:e.value===0}}),(a,i)=>(m(),y("div",{class:G(["VPNavBar",c.value])},[R("div",bg,[R("div",wg,[R("div",Ag,[A(Pg,null,{"nav-bar-title-before":_(()=>[P(a.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":_(()=>[P(a.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),R("div",kg,[R("div",Mg,[P(a.$slots,"nav-bar-content-before",{},void 0,!0),A(vg,{class:"search"}),A(ig,{class:"menu"}),A(Ig,{class:"translations"}),A(af,{class:"appearance"}),A(gg,{class:"social-links"}),A(Vf,{class:"extra"}),P(a.$slots,"nav-bar-content-after",{},void 0,!0),A(Gf,{class:"hamburger",active:a.isScreenOpen,onClick:i[0]||(i[0]=n=>a.$emit("toggle-screen"))},null,8,["active"])])])])]),Og],2))}}),Ng=O(Dg,[["__scopeId","data-v-844edcde"]]),zg={key:0,class:"VPNavScreenAppearance"},Lg={class:"text"},jg=w({__name:"VPNavScreenAppearance",setup(r){const{site:e,theme:t}=V();return(s,c)=>C(e).appearance&&C(e).appearance!=="force-dark"?(m(),y("div",zg,[R("p",Lg,J(C(t).darkModeSwitchLabel||"Appearance"),1),A(eo)])):T("",!0)}}),Bg=O(jg,[["__scopeId","data-v-338d9b48"]]),$g=w({__name:"VPNavScreenMenuLink",props:{item:{}},setup(r){const e=Zn("close-screen");return(t,s)=>(m(),N(Ee,{class:"VPNavScreenMenuLink",href:t.item.link,target:t.item.target,rel:t.item.rel,onClick:C(e),innerHTML:t.item.text},null,8,["href","target","rel","onClick","innerHTML"]))}}),qg=O($g,[["__scopeId","data-v-1a934d60"]]),Fg=w({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(r){const e=Zn("close-screen");return(t,s)=>(m(),N(Ee,{class:"VPNavScreenMenuGroupLink",href:t.item.link,target:t.item.target,rel:t.item.rel,onClick:C(e)},{default:_(()=>[be(J(t.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),Eu=O(Fg,[["__scopeId","data-v-aea78dd1"]]),xg={class:"VPNavScreenMenuGroupSection"},Vg={key:0,class:"title"},Ug=w({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(r){return(e,t)=>(m(),y("div",xg,[e.text?(m(),y("p",Vg,J(e.text),1)):T("",!0),(m(!0),y(Q,null,ge(e.items,s=>(m(),N(Eu,{key:s.text,item:s},null,8,["item"]))),128))]))}}),Hg=O(Ug,[["__scopeId","data-v-f60dbfa7"]]),Wg=r=>(te("data-v-d2212c70"),r=r(),re(),r),Kg=["aria-controls","aria-expanded"],Jg=["innerHTML"],Gg=Wg(()=>R("span",{class:"vpi-plus button-icon"},null,-1)),Qg=["id"],Xg={key:1,class:"group"},Zg=w({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(r){const e=r,t=F(!1),s=D(()=>`NavScreenGroup-${e.text.replace(" ","-").toLowerCase()}`);function c(){t.value=!t.value}return(a,i)=>(m(),y("div",{class:G(["VPNavScreenMenuGroup",{open:t.value}])},[R("button",{class:"button","aria-controls":s.value,"aria-expanded":t.value,onClick:c},[R("span",{class:"button-text",innerHTML:a.text},null,8,Jg),Gg],8,Kg),R("div",{id:s.value,class:"items"},[(m(!0),y(Q,null,ge(a.items,n=>(m(),y(Q,{key:n.text},["link"in n?(m(),y("div",{key:n.text,class:"item"},[A(Eu,{item:n},null,8,["item"])])):(m(),y("div",Xg,[A(Hg,{text:n.text,items:n.items},null,8,["text","items"])]))],64))),128))],8,Qg)],2))}}),Yg=O(Zg,[["__scopeId","data-v-d2212c70"]]),em={key:0,class:"VPNavScreenMenu"},tm=w({__name:"VPNavScreenMenu",setup(r){const{theme:e}=V();return(t,s)=>C(e).nav?(m(),y("nav",em,[(m(!0),y(Q,null,ge(C(e).nav,c=>(m(),y(Q,{key:c.text},["link"in c?(m(),N(qg,{key:0,item:c},null,8,["item"])):(m(),N(Yg,{key:1,text:c.text||"",items:c.items},null,8,["text","items"]))],64))),128))])):T("",!0)}}),rm=w({__name:"VPNavScreenSocialLinks",setup(r){const{theme:e}=V();return(t,s)=>C(e).socialLinks?(m(),N(ti,{key:0,class:"VPNavScreenSocialLinks",links:C(e).socialLinks},null,8,["links"])):T("",!0)}}),Iu=r=>(te("data-v-516e4bc3"),r=r(),re(),r),nm=Iu(()=>R("span",{class:"vpi-languages icon lang"},null,-1)),im=Iu(()=>R("span",{class:"vpi-chevron-down icon chevron"},null,-1)),sm={class:"list"},om=w({__name:"VPNavScreenTranslations",setup(r){const{localeLinks:e,currentLang:t}=yn({correspondingLink:!0}),s=F(!1);function c(){s.value=!s.value}return(a,i)=>C(e).length&&C(t).label?(m(),y("div",{key:0,class:G(["VPNavScreenTranslations",{open:s.value}])},[R("button",{class:"title",onClick:c},[nm,be(" "+J(C(t).label)+" ",1),im]),R("ul",sm,[(m(!0),y(Q,null,ge(C(e),n=>(m(),y("li",{key:n.link,class:"item"},[A(Ee,{class:"link",href:n.link},{default:_(()=>[be(J(n.text),1)]),_:2},1032,["href"])]))),128))])],2)):T("",!0)}}),am=O(om,[["__scopeId","data-v-516e4bc3"]]),cm={class:"container"},um=w({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(r){const e=F(null),t=fu(Yn?document.body:null);return(s,c)=>(m(),N(Qs,{name:"fade",onEnter:c[0]||(c[0]=a=>t.value=!0),onAfterLeave:c[1]||(c[1]=a=>t.value=!1)},{default:_(()=>[s.open?(m(),y("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:e,id:"VPNavScreen"},[R("div",cm,[P(s.$slots,"nav-screen-content-before",{},void 0,!0),A(tm,{class:"menu"}),A(am,{class:"translations"}),A(Bg,{class:"appearance"}),A(rm,{class:"social-links"}),P(s.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):T("",!0)]),_:3}))}}),pm=O(um,[["__scopeId","data-v-57cce842"]]),lm={key:0,class:"VPNav"},dm=w({__name:"VPNav",setup(r){const{isScreenOpen:e,closeScreen:t,toggleScreen:s}=Jv(),{frontmatter:c}=V(),a=D(()=>c.value.navbar!==!1);return gu("close-screen",t),Jn(()=>{Yn&&document.documentElement.classList.toggle("hide-nav",!a.value)}),(i,n)=>a.value?(m(),y("header",lm,[A(Ng,{"is-screen-open":C(e),onToggleScreen:C(s)},{"nav-bar-title-before":_(()=>[P(i.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":_(()=>[P(i.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":_(()=>[P(i.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":_(()=>[P(i.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),A(pm,{open:C(e)},{"nav-screen-content-before":_(()=>[P(i.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":_(()=>[P(i.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):T("",!0)}}),hm=O(dm,[["__scopeId","data-v-7ad780c2"]]),Tu=r=>(te("data-v-c24f735a"),r=r(),re(),r),vm=["role","tabindex"],fm=Tu(()=>R("div",{class:"indicator"},null,-1)),gm=Tu(()=>R("span",{class:"vpi-chevron-right caret-icon"},null,-1)),mm=[gm],Sm={key:1,class:"items"},Cm=w({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(r){const e=r,{collapsed:t,collapsible:s,isLink:c,isActiveLink:a,hasActiveLink:i,hasChildren:n,toggle:o}=$d(D(()=>e.item)),u=D(()=>n.value?"section":"div"),p=D(()=>c.value?"a":"div"),l=D(()=>n.value?e.depth+2===7?"p":`h${e.depth+2}`:"p"),d=D(()=>c.value?void 0:"button"),h=D(()=>[[`level-${e.depth}`],{collapsible:s.value},{collapsed:t.value},{"is-link":c.value},{"is-active":a.value},{"has-active":i.value}]);function v(f){"key"in f&&f.key!=="Enter"||!e.item.link&&o()}function g(){e.item.link&&o()}return(f,S)=>{const I=He("VPSidebarItem",!0);return m(),N(yt(u.value),{class:G(["VPSidebarItem",h.value])},{default:_(()=>[f.item.text?(m(),y("div",$n({key:0,class:"item",role:d.value},fd(f.item.items?{click:v,keydown:v}:{},!0),{tabindex:f.item.items&&0}),[fm,f.item.link?(m(),N(Ee,{key:0,tag:p.value,class:"link",href:f.item.link,rel:f.item.rel,target:f.item.target},{default:_(()=>[(m(),N(yt(l.value),{class:"text",innerHTML:f.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(m(),N(yt(l.value),{key:1,class:"text",innerHTML:f.item.text},null,8,["innerHTML"])),f.item.collapsed!=null&&f.item.items&&f.item.items.length?(m(),y("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:g,onKeydown:vd(g,["enter"]),tabindex:"0"},mm,32)):T("",!0)],16,vm)):T("",!0),f.item.items&&f.item.items.length?(m(),y("div",Sm,[f.depth<5?(m(!0),y(Q,{key:0},ge(f.item.items,k=>(m(),N(I,{key:k.text,item:k,depth:f.depth+1},null,8,["item","depth"]))),128)):T("",!0)])):T("",!0)]),_:1},8,["class"])}}}),ym=O(Cm,[["__scopeId","data-v-c24f735a"]]),bu=r=>(te("data-v-4871f9f5"),r=r(),re(),r),Pm=bu(()=>R("div",{class:"curtain"},null,-1)),Rm={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},_m=bu(()=>R("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),Em=w({__name:"VPSidebar",props:{open:{type:Boolean}},setup(r){const{sidebarGroups:e,hasSidebar:t}=Be(),s=r,c=F(null),a=fu(Yn?document.body:null);return Ie([s,c],()=>{var i;s.open?(a.value=!0,(i=c.value)==null||i.focus()):a.value=!1},{immediate:!0,flush:"post"}),(i,n)=>C(t)?(m(),y("aside",{key:0,class:G(["VPSidebar",{open:i.open}]),ref_key:"navEl",ref:c,onClick:n[0]||(n[0]=gd(()=>{},["stop"]))},[Pm,R("nav",Rm,[_m,P(i.$slots,"sidebar-nav-before",{},void 0,!0),(m(!0),y(Q,null,ge(C(e),o=>(m(),y("div",{key:o.text,class:"group"},[A(ym,{item:o,depth:0},null,8,["item"])]))),128)),P(i.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):T("",!0)}}),Im=O(Em,[["__scopeId","data-v-4871f9f5"]]),Tm=w({__name:"VPSkipLink",setup(r){const e=Xn(),t=F();Ie(()=>e.path,()=>t.value.focus());function s({target:c}){const a=document.getElementById(decodeURIComponent(c.hash).slice(1));if(a){const i=()=>{a.removeAttribute("tabindex"),a.removeEventListener("blur",i)};a.setAttribute("tabindex","-1"),a.addEventListener("blur",i),a.focus(),window.scrollTo(0,0)}}return(c,a)=>(m(),y(Q,null,[R("span",{ref_key:"backToTop",ref:t,tabindex:"-1"},null,512),R("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:s}," Skip to content ")],64))}}),bm=O(Tm,[["__scopeId","data-v-c8291ffa"]]),wm=w({__name:"Layout",setup(r){const{isOpen:e,open:t,close:s}=Be(),c=Xn();Ie(()=>c.path,s),Bd(e,s);const{frontmatter:a}=V(),i=md(),n=D(()=>!!i["home-hero-image"]);return gu("hero-image-slot-exists",n),(o,u)=>{const p=He("Content");return C(a).layout!==!1?(m(),y("div",{key:0,class:G(["Layout",C(a).pageClass])},[P(o.$slots,"layout-top",{},void 0,!0),A(bm),A(_d,{class:"backdrop",show:C(e),onClick:C(s)},null,8,["show","onClick"]),A(hm,null,{"nav-bar-title-before":_(()=>[P(o.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":_(()=>[P(o.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":_(()=>[P(o.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":_(()=>[P(o.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":_(()=>[P(o.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":_(()=>[P(o.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),A(Kv,{open:C(e),onOpenMenu:C(t)},null,8,["open","onOpenMenu"]),A(Im,{open:C(e)},{"sidebar-nav-before":_(()=>[P(o.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":_(()=>[P(o.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),A(bv,null,{"page-top":_(()=>[P(o.$slots,"page-top",{},void 0,!0)]),"page-bottom":_(()=>[P(o.$slots,"page-bottom",{},void 0,!0)]),"not-found":_(()=>[P(o.$slots,"not-found",{},void 0,!0)]),"home-hero-before":_(()=>[P(o.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":_(()=>[P(o.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":_(()=>[P(o.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":_(()=>[P(o.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":_(()=>[P(o.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":_(()=>[P(o.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":_(()=>[P(o.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":_(()=>[P(o.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":_(()=>[P(o.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":_(()=>[P(o.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":_(()=>[P(o.$slots,"doc-before",{},void 0,!0)]),"doc-after":_(()=>[P(o.$slots,"doc-after",{},void 0,!0)]),"doc-top":_(()=>[P(o.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":_(()=>[P(o.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":_(()=>[P(o.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":_(()=>[P(o.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":_(()=>[P(o.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":_(()=>[P(o.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":_(()=>[P(o.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":_(()=>[P(o.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),A(Ov),P(o.$slots,"layout-bottom",{},void 0,!0)],2)):(m(),N(p,{key:1}))}}}),Am=O(wm,[["__scopeId","data-v-d8b57b2d"]]),km=r=>(te("data-v-acff304e"),r=r(),re(),r),Mm={class:"profile"},Om={class:"avatar"},Dm=["src","alt"],Nm={class:"data"},zm={class:"name"},Lm={key:0,class:"affiliation"},jm={key:0,class:"title"},Bm={key:1,class:"at"},$m=["innerHTML"],qm={key:2,class:"links"},Fm={key:0,class:"sp"},xm=km(()=>R("span",{class:"vpi-heart sp-icon"},null,-1)),Vm=w({__name:"VPTeamMembersItem",props:{size:{default:"medium"},member:{}},setup(r){return(e,t)=>(m(),y("article",{class:G(["VPTeamMembersItem",[e.size]])},[R("div",Mm,[R("figure",Om,[R("img",{class:"avatar-img",src:e.member.avatar,alt:e.member.name},null,8,Dm)]),R("div",Nm,[R("h1",zm,J(e.member.name),1),e.member.title||e.member.org?(m(),y("p",Lm,[e.member.title?(m(),y("span",jm,J(e.member.title),1)):T("",!0),e.member.title&&e.member.org?(m(),y("span",Bm," @ ")):T("",!0),e.member.org?(m(),N(Ee,{key:2,class:G(["org",{link:e.member.orgLink}]),href:e.member.orgLink,"no-icon":""},{default:_(()=>[be(J(e.member.org),1)]),_:1},8,["class","href"])):T("",!0)])):T("",!0),e.member.desc?(m(),y("p",{key:1,class:"desc",innerHTML:e.member.desc},null,8,$m)):T("",!0),e.member.links?(m(),y("div",qm,[A(ti,{links:e.member.links},null,8,["links"])])):T("",!0)])]),e.member.sponsor?(m(),y("div",Fm,[A(Ee,{class:"sp-link",href:e.member.sponsor,"no-icon":""},{default:_(()=>[xm,be(" "+J(e.member.actionText||"Sponsor"),1)]),_:1},8,["href"])])):T("",!0)],2))}}),Um=O(Vm,[["__scopeId","data-v-acff304e"]]),Hm={class:"container"},Wm=w({__name:"VPTeamMembers",props:{size:{default:"medium"},members:{}},setup(r){const e=r,t=D(()=>[e.size,`count-${e.members.length}`]);return(s,c)=>(m(),y("div",{class:G(["VPTeamMembers",t.value])},[R("div",Hm,[(m(!0),y(Q,null,ge(s.members,a=>(m(),y("div",{key:a.name,class:"item"},[A(Um,{size:s.size,member:a},null,8,["size","member"])]))),128))])],2))}}),M_=O(Wm,[["__scopeId","data-v-bf782009"]]),Lo={Layout:Am,enhanceApp:({app:r})=>{r.component("Badge",yd)}},mt=F(!1);var x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Km(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var c=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,c.get?c:{enumerable:!0,get:function(){return r[s]}})}),t}var Fn={},Ss={},ri={},Cs={},X={},It={},Te={},wu={},ni={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.default=Gm;let Ln;const Jm=new Uint8Array(16);function Gm(){if(!Ln&&(Ln=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ln))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ln(Jm)}var We={},vt={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.default=void 0;var Qm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;si.default=Qm;Object.defineProperty(vt,"__esModule",{value:!0});vt.default=void 0;var Xm=Zm(si);function Zm(r){return r&&r.__esModule?r:{default:r}}function Ym(r){return typeof r=="string"&&Xm.default.test(r)}var eS=Ym;vt.default=eS;Object.defineProperty(We,"__esModule",{value:!0});We.default=void 0;We.unsafeStringify=Au;var tS=rS(vt);function rS(r){return r&&r.__esModule?r:{default:r}}const se=[];for(let r=0;r<256;++r)se.push((r+256).toString(16).slice(1));function Au(r,e=0){return se[r[e+0]]+se[r[e+1]]+se[r[e+2]]+se[r[e+3]]+"-"+se[r[e+4]]+se[r[e+5]]+"-"+se[r[e+6]]+se[r[e+7]]+"-"+se[r[e+8]]+se[r[e+9]]+"-"+se[r[e+10]]+se[r[e+11]]+se[r[e+12]]+se[r[e+13]]+se[r[e+14]]+se[r[e+15]]}function nS(r,e=0){const t=Au(r,e);if(!(0,tS.default)(t))throw TypeError("Stringified UUID is invalid");return t}var iS=nS;We.default=iS;Object.defineProperty(ni,"__esModule",{value:!0});ni.default=void 0;var sS=aS(ii),oS=We;function aS(r){return r&&r.__esModule?r:{default:r}}let jo,ys,Ps=0,Rs=0;function cS(r,e,t){let s=e&&t||0;const c=e||new Array(16);r=r||{};let a=r.node||jo,i=r.clockseq!==void 0?r.clockseq:ys;if(a==null||i==null){const d=r.random||(r.rng||sS.default)();a==null&&(a=jo=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),i==null&&(i=ys=(d[6]<<8|d[7])&16383)}let n=r.msecs!==void 0?r.msecs:Date.now(),o=r.nsecs!==void 0?r.nsecs:Rs+1;const u=n-Ps+(o-Rs)/1e4;if(u<0&&r.clockseq===void 0&&(i=i+1&16383),(u<0||n>Ps)&&r.nsecs===void 0&&(o=0),o>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ps=n,Rs=o,ys=i,n+=122192928e5;const p=((n&268435455)*1e4+o)%4294967296;c[s++]=p>>>24&255,c[s++]=p>>>16&255,c[s++]=p>>>8&255,c[s++]=p&255;const l=n/4294967296*1e4&268435455;c[s++]=l>>>8&255,c[s++]=l&255,c[s++]=l>>>24&15|16,c[s++]=l>>>16&255,c[s++]=i>>>8|128,c[s++]=i&255;for(let d=0;d<6;++d)c[s+d]=a[d];return e||(0,oS.unsafeStringify)(c)}var uS=cS;ni.default=uS;var oi={},Ue={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.default=void 0;var pS=lS(vt);function lS(r){return r&&r.__esModule?r:{default:r}}function dS(r){if(!(0,pS.default)(r))throw TypeError("Invalid UUID");let e;const t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var hS=dS;Pn.default=hS;Object.defineProperty(Ue,"__esModule",{value:!0});Ue.URL=Ue.DNS=void 0;Ue.default=SS;var vS=We,fS=gS(Pn);function gS(r){return r&&r.__esModule?r:{default:r}}function mS(r){r=unescape(encodeURIComponent(r));const e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}const ku="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ue.DNS=ku;const Mu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ue.URL=Mu;function SS(r,e,t){function s(c,a,i,n){var o;if(typeof c=="string"&&(c=mS(c)),typeof a=="string"&&(a=(0,fS.default)(a)),((o=a)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+c.length);if(u.set(a),u.set(c,a.length),u=t(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,i){n=n||0;for(let p=0;p<16;++p)i[n+p]=u[p];return i}return(0,vS.unsafeStringify)(u)}try{s.name=r}catch{}return s.DNS=ku,s.URL=Mu,s}var ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.default=void 0;function CS(r){if(typeof r=="string"){const e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return yS(PS(RS(r),r.length*8))}function yS(r){const e=[],t=r.length*32,s="0123456789abcdef";for(let c=0;c<t;c+=8){const a=r[c>>5]>>>c%32&255,i=parseInt(s.charAt(a>>>4&15)+s.charAt(a&15),16);e.push(i)}return e}function Ou(r){return(r+64>>>9<<4)+14+1}function PS(r,e){r[e>>5]|=128<<e%32,r[Ou(e)-1]=e;let t=1732584193,s=-271733879,c=-1732584194,a=271733878;for(let i=0;i<r.length;i+=16){const n=t,o=s,u=c,p=a;t=pe(t,s,c,a,r[i],7,-680876936),a=pe(a,t,s,c,r[i+1],12,-389564586),c=pe(c,a,t,s,r[i+2],17,606105819),s=pe(s,c,a,t,r[i+3],22,-1044525330),t=pe(t,s,c,a,r[i+4],7,-176418897),a=pe(a,t,s,c,r[i+5],12,1200080426),c=pe(c,a,t,s,r[i+6],17,-1473231341),s=pe(s,c,a,t,r[i+7],22,-45705983),t=pe(t,s,c,a,r[i+8],7,1770035416),a=pe(a,t,s,c,r[i+9],12,-1958414417),c=pe(c,a,t,s,r[i+10],17,-42063),s=pe(s,c,a,t,r[i+11],22,-1990404162),t=pe(t,s,c,a,r[i+12],7,1804603682),a=pe(a,t,s,c,r[i+13],12,-40341101),c=pe(c,a,t,s,r[i+14],17,-1502002290),s=pe(s,c,a,t,r[i+15],22,1236535329),t=le(t,s,c,a,r[i+1],5,-165796510),a=le(a,t,s,c,r[i+6],9,-1069501632),c=le(c,a,t,s,r[i+11],14,643717713),s=le(s,c,a,t,r[i],20,-373897302),t=le(t,s,c,a,r[i+5],5,-701558691),a=le(a,t,s,c,r[i+10],9,38016083),c=le(c,a,t,s,r[i+15],14,-660478335),s=le(s,c,a,t,r[i+4],20,-405537848),t=le(t,s,c,a,r[i+9],5,568446438),a=le(a,t,s,c,r[i+14],9,-1019803690),c=le(c,a,t,s,r[i+3],14,-187363961),s=le(s,c,a,t,r[i+8],20,1163531501),t=le(t,s,c,a,r[i+13],5,-1444681467),a=le(a,t,s,c,r[i+2],9,-51403784),c=le(c,a,t,s,r[i+7],14,1735328473),s=le(s,c,a,t,r[i+12],20,-1926607734),t=de(t,s,c,a,r[i+5],4,-378558),a=de(a,t,s,c,r[i+8],11,-2022574463),c=de(c,a,t,s,r[i+11],16,1839030562),s=de(s,c,a,t,r[i+14],23,-35309556),t=de(t,s,c,a,r[i+1],4,-1530992060),a=de(a,t,s,c,r[i+4],11,1272893353),c=de(c,a,t,s,r[i+7],16,-155497632),s=de(s,c,a,t,r[i+10],23,-1094730640),t=de(t,s,c,a,r[i+13],4,681279174),a=de(a,t,s,c,r[i],11,-358537222),c=de(c,a,t,s,r[i+3],16,-722521979),s=de(s,c,a,t,r[i+6],23,76029189),t=de(t,s,c,a,r[i+9],4,-640364487),a=de(a,t,s,c,r[i+12],11,-421815835),c=de(c,a,t,s,r[i+15],16,530742520),s=de(s,c,a,t,r[i+2],23,-995338651),t=he(t,s,c,a,r[i],6,-198630844),a=he(a,t,s,c,r[i+7],10,1126891415),c=he(c,a,t,s,r[i+14],15,-1416354905),s=he(s,c,a,t,r[i+5],21,-57434055),t=he(t,s,c,a,r[i+12],6,1700485571),a=he(a,t,s,c,r[i+3],10,-1894986606),c=he(c,a,t,s,r[i+10],15,-1051523),s=he(s,c,a,t,r[i+1],21,-2054922799),t=he(t,s,c,a,r[i+8],6,1873313359),a=he(a,t,s,c,r[i+15],10,-30611744),c=he(c,a,t,s,r[i+6],15,-1560198380),s=he(s,c,a,t,r[i+13],21,1309151649),t=he(t,s,c,a,r[i+4],6,-145523070),a=he(a,t,s,c,r[i+11],10,-1120210379),c=he(c,a,t,s,r[i+2],15,718787259),s=he(s,c,a,t,r[i+9],21,-343485551),t=xe(t,n),s=xe(s,o),c=xe(c,u),a=xe(a,p)}return[t,s,c,a]}function RS(r){if(r.length===0)return[];const e=r.length*8,t=new Uint32Array(Ou(e));for(let s=0;s<e;s+=8)t[s>>5]|=(r[s/8]&255)<<s%32;return t}function xe(r,e){const t=(r&65535)+(e&65535);return(r>>16)+(e>>16)+(t>>16)<<16|t&65535}function _S(r,e){return r<<e|r>>>32-e}function ci(r,e,t,s,c,a){return xe(_S(xe(xe(e,r),xe(s,a)),c),t)}function pe(r,e,t,s,c,a,i){return ci(e&t|~e&s,r,e,c,a,i)}function le(r,e,t,s,c,a,i){return ci(e&s|t&~s,r,e,c,a,i)}function de(r,e,t,s,c,a,i){return ci(e^t^s,r,e,c,a,i)}function he(r,e,t,s,c,a,i){return ci(t^(e|~s),r,e,c,a,i)}var ES=CS;ai.default=ES;Object.defineProperty(oi,"__esModule",{value:!0});oi.default=void 0;var IS=Du(Ue),TS=Du(ai);function Du(r){return r&&r.__esModule?r:{default:r}}const bS=(0,IS.default)("v3",48,TS.default);var wS=bS;oi.default=wS;var ui={},pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.default=void 0;const AS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var kS={randomUUID:AS};pi.default=kS;Object.defineProperty(ui,"__esModule",{value:!0});ui.default=void 0;var Bo=Nu(pi),MS=Nu(ii),OS=We;function Nu(r){return r&&r.__esModule?r:{default:r}}function DS(r,e,t){if(Bo.default.randomUUID&&!e&&!r)return Bo.default.randomUUID();r=r||{};const s=r.random||(r.rng||MS.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){t=t||0;for(let c=0;c<16;++c)e[t+c]=s[c];return e}return(0,OS.unsafeStringify)(s)}var NS=DS;ui.default=NS;var li={},di={};Object.defineProperty(di,"__esModule",{value:!0});di.default=void 0;function zS(r,e,t,s){switch(r){case 0:return e&t^~e&s;case 1:return e^t^s;case 2:return e&t^e&s^t&s;case 3:return e^t^s}}function _s(r,e){return r<<e|r>>>32-e}function LS(r){const e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){const i=unescape(encodeURIComponent(r));r=[];for(let n=0;n<i.length;++n)r.push(i.charCodeAt(n))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);const s=r.length/4+2,c=Math.ceil(s/16),a=new Array(c);for(let i=0;i<c;++i){const n=new Uint32Array(16);for(let o=0;o<16;++o)n[o]=r[i*64+o*4]<<24|r[i*64+o*4+1]<<16|r[i*64+o*4+2]<<8|r[i*64+o*4+3];a[i]=n}a[c-1][14]=(r.length-1)*8/Math.pow(2,32),a[c-1][14]=Math.floor(a[c-1][14]),a[c-1][15]=(r.length-1)*8&4294967295;for(let i=0;i<c;++i){const n=new Uint32Array(80);for(let h=0;h<16;++h)n[h]=a[i][h];for(let h=16;h<80;++h)n[h]=_s(n[h-3]^n[h-8]^n[h-14]^n[h-16],1);let o=t[0],u=t[1],p=t[2],l=t[3],d=t[4];for(let h=0;h<80;++h){const v=Math.floor(h/20),g=_s(o,5)+zS(v,u,p,l)+d+e[v]+n[h]>>>0;d=l,l=p,p=_s(u,30)>>>0,u=o,o=g}t[0]=t[0]+o>>>0,t[1]=t[1]+u>>>0,t[2]=t[2]+p>>>0,t[3]=t[3]+l>>>0,t[4]=t[4]+d>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var jS=LS;di.default=jS;Object.defineProperty(li,"__esModule",{value:!0});li.default=void 0;var BS=zu(Ue),$S=zu(di);function zu(r){return r&&r.__esModule?r:{default:r}}const qS=(0,BS.default)("v5",80,$S.default);var FS=qS;li.default=FS;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.default=void 0;var xS="00000000-0000-0000-0000-000000000000";hi.default=xS;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.default=void 0;var VS=US(vt);function US(r){return r&&r.__esModule?r:{default:r}}function HS(r){if(!(0,VS.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}var WS=HS;vi.default=WS;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return i.default}});var e=p(ni),t=p(oi),s=p(ui),c=p(li),a=p(hi),i=p(vi),n=p(vt),o=p(We),u=p(Pn);function p(l){return l&&l.__esModule?l:{default:l}}})(wu);Object.defineProperty(Te,"__esModule",{value:!0});Te.createNoDashGuid=Te.createGuid=void 0;const KS=wu,Lu=()=>KS.v4();Te.createGuid=Lu;const JS=()=>Lu().replace(new RegExp("-","g"),"").toUpperCase();Te.createNoDashGuid=JS;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PlatformEvent=r.EventType=void 0;const e=Te;(function(s){s[s.Debug=0]="Debug",s[s.Info=1]="Info",s[s.Warning=2]="Warning",s[s.Error=3]="Error",s[s.None=4]="None"})(r.EventType||(r.EventType={}));class t{constructor(c,a){this.privName=c,this.privEventId=e.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=a,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}r.PlatformEvent=t})(It);Object.defineProperty(X,"__esModule",{value:!0});X.AudioStreamNodeErrorEvent=X.AudioStreamNodeDetachedEvent=X.AudioStreamNodeAttachedEvent=X.AudioStreamNodeAttachingEvent=X.AudioStreamNodeEvent=X.AudioSourceErrorEvent=X.AudioSourceOffEvent=X.AudioSourceReadyEvent=X.AudioSourceInitializingEvent=X.AudioSourceEvent=void 0;const Us=It;class Tt extends Us.PlatformEvent{constructor(e,t,s=Us.EventType.Info){super(e,s),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}X.AudioSourceEvent=Tt;class GS extends Tt{constructor(e){super("AudioSourceInitializingEvent",e)}}X.AudioSourceInitializingEvent=GS;class QS extends Tt{constructor(e){super("AudioSourceReadyEvent",e)}}X.AudioSourceReadyEvent=QS;class XS extends Tt{constructor(e){super("AudioSourceOffEvent",e)}}X.AudioSourceOffEvent=XS;class ZS extends Tt{constructor(e,t){super("AudioSourceErrorEvent",e,Us.EventType.Error),this.privError=t}get error(){return this.privError}}X.AudioSourceErrorEvent=ZS;class Rn extends Tt{constructor(e,t,s){super(e,t),this.privAudioNodeId=s}get audioNodeId(){return this.privAudioNodeId}}X.AudioStreamNodeEvent=Rn;class YS extends Rn{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}X.AudioStreamNodeAttachingEvent=YS;class eC extends Rn{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}X.AudioStreamNodeAttachedEvent=eC;class tC extends Rn{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}X.AudioStreamNodeDetachedEvent=tC;class rC extends Rn{constructor(e,t,s){super("AudioStreamNodeErrorEvent",e,t),this.privError=s}get error(){return this.privError}}X.AudioStreamNodeErrorEvent=rC;var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.ConnectionMessageSentEvent=Y.ConnectionMessageReceivedEvent=Y.ConnectionEstablishErrorEvent=Y.ConnectionErrorEvent=Y.ConnectionClosedEvent=Y.ConnectionEstablishedEvent=Y.ConnectionStartEvent=Y.ConnectionEvent=Y.ServiceEvent=void 0;const dt=It;class nC extends dt.PlatformEvent{constructor(e,t,s=dt.EventType.Info){super(e,s),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}Y.ServiceEvent=nC;class Ke extends dt.PlatformEvent{constructor(e,t,s=dt.EventType.Info){super(e,s),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}Y.ConnectionEvent=Ke;class iC extends Ke{constructor(e,t,s){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=s}get uri(){return this.privUri}get headers(){return this.privHeaders}}Y.ConnectionStartEvent=iC;class sC extends Ke{constructor(e){super("ConnectionEstablishedEvent",e)}}Y.ConnectionEstablishedEvent=sC;class oC extends Ke{constructor(e,t,s){super("ConnectionClosedEvent",e,dt.EventType.Debug),this.privReason=s,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Y.ConnectionClosedEvent=oC;class aC extends Ke{constructor(e,t,s){super("ConnectionErrorEvent",e,dt.EventType.Debug),this.privMessage=t,this.privType=s}get message(){return this.privMessage}get type(){return this.privType}}Y.ConnectionErrorEvent=aC;class cC extends Ke{constructor(e,t,s){super("ConnectionEstablishErrorEvent",e,dt.EventType.Error),this.privStatusCode=t,this.privReason=s}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Y.ConnectionEstablishErrorEvent=cC;class uC extends Ke{constructor(e,t,s){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=s}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}Y.ConnectionMessageReceivedEvent=uC;class pC extends Ke{constructor(e,t,s){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=s}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}Y.ConnectionMessageSentEvent=pC;var no={},ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.ObjectDisposedError=ae.InvalidOperationError=ae.ArgumentNullError=void 0;class lC extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}ae.ArgumentNullError=lC;class dC extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}ae.InvalidOperationError=dC;class hC extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}ae.ObjectDisposedError=hC;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionMessage=r.MessageType=void 0;const e=ae,t=Te;var s;(function(a){a[a.Text=0]="Text",a[a.Binary=1]="Binary"})(s=r.MessageType||(r.MessageType={}));class c{constructor(i,n,o,u){if(this.privBody=null,i===s.Text&&n&&typeof n!="string")throw new e.InvalidOperationError("Payload must be a string");if(i===s.Binary&&n&&!(n instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=i,this.privBody=n,this.privHeaders=o||{},this.privId=u||t.createNoDashGuid(),this.messageType){case s.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case s.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===s.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===s.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}r.ConnectionMessage=c})(no);var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.ConnectionOpenResponse=void 0;class vC{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}fi.ConnectionOpenResponse=vC;var gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.DeferralMap=void 0;class fC{constructor(){this.privMap={}}add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(s){this.privMap[e].reject(s)}finally{this.privMap[e]=void 0}}}gi.DeferralMap=fC;var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.SendingAgentContextMessageEvent=ht.DialogEvent=void 0;const $o=It;class ju extends $o.PlatformEvent{constructor(e,t=$o.EventType.Info){super(e,t)}}ht.DialogEvent=ju;class gC extends ju{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}ht.SendingAgentContextMessageEvent=gC;var mi={},_n={};Object.defineProperty(_n,"__esModule",{value:!0});_n.EventSource=void 0;const mC=ae,SC=Te;class CC{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new mC.ObjectDisposedError("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=SC.createNoDashGuid();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach(t=>e.onEvent(t))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(t=>e.onEvent(t)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}_n.EventSource=CC;Object.defineProperty(mi,"__esModule",{value:!0});mi.Events=void 0;const yC=ae,PC=_n;class mn{static setEventSource(e){if(!e)throw new yC.ArgumentNullError("eventSource");mn.privInstance=e}static get instance(){return mn.privInstance}}mi.Events=mn;mn.privInstance=new PC.EventSource;var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});var $u={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(r.ConnectionState||(r.ConnectionState={}))})($u);var qu={};Object.defineProperty(qu,"__esModule",{value:!0});var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});var xu={};Object.defineProperty(xu,"__esModule",{value:!0});var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});var En={};Object.defineProperty(En,"__esModule",{value:!0});En.List=void 0;const RC=ae;class qe{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),e===0?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const s=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),s}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(t=>{e.push(t)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();const t=[];for(let s=0;s<this.privList.length;s++)t.push(e(this.privList[s],s));return new qe(t)}where(e){this.throwIfDisposed();const t=new qe;for(let s=0;s<this.privList.length;s++)e(this.privList[s],s)&&t.add(this.privList[s]);return t}orderBy(e){this.throwIfDisposed();const s=this.toArray().sort(e);return new qe(s)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((t,s)=>e(s,t))}clone(){return this.throwIfDisposed(),new qe(this.toArray())}concat(e){return this.throwIfDisposed(),new qe(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new qe(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new RC.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}}En.List=qe;var io={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.marshalPromiseToCallbacks=r.Sink=r.Deferred=r.PromiseResultEventSource=r.PromiseResult=r.PromiseState=void 0;var e;(function(n){n[n.None=0]="None",n[n.Resolved=1]="Resolved",n[n.Rejected=2]="Rejected"})(e=r.PromiseState||(r.PromiseState={}));class t{constructor(o){this.throwIfError=()=>{if(this.isError)throw this.error},o.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}r.PromiseResult=t;class s{constructor(){this.setResult=o=>{this.privOnSetResult(o)},this.setError=o=>{this.privOnSetError(o)},this.on=(o,u)=>{this.privOnSetResult=o,this.privOnSetError=u}}}r.PromiseResultEventSource=s;class c{constructor(){this.resolve=o=>(this.privResolve(o),this),this.reject=o=>(this.privReject(o),this),this.privPromise=new Promise((o,u)=>{this.privResolve=o,this.privReject=u})}get promise(){return this.privPromise}}r.Deferred=c;class a{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new s,this.privPromiseResult=new t(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(o){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(o);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(o,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(o){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(o);for(const u of this.privErrorHandlers)this.executeErrorCallback(o,u);this.detachHandlers()}on(o,u){o==null&&(o=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(o),this.privErrorHandlers.push(u)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,o,u):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(o,u,p){try{u(o)}catch(l){this.executeErrorCallback(`'Unhandled callback error: ${l}'`,p)}}executeErrorCallback(o,u){if(u)try{u(o)}catch(p){throw new Error(`'Unhandled callback error: ${p}. InnerError: ${o}'`)}else throw new Error(`'Unhandled error: ${o}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}r.Sink=a;function i(n,o,u){n.then(p=>{try{o&&o(p)}catch(l){if(u)try{if(l instanceof Error){const d=l;u(d.name+": "+d.message)}else u(l)}catch{}}},p=>{if(u)try{if(p instanceof Error){const l=p;u(l.name+": "+l.message)}else u(p)}catch{}})}r.marshalPromiseToCallbacks=i})(io);var In={};Object.defineProperty(In,"__esModule",{value:!0});In.Queue=void 0;const Es=ae,Is=En,qo=io;var fn;(function(r){r[r.Dequeue=0]="Dequeue",r[r.Peek=1]="Peek"})(fn||(fn={}));class _C{constructor(e){this.privPromiseStore=new Is.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new Is.List,this.privDetachables=[],this.privSubscribers=new Is.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(t=>t(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(t=>{this.privList.add(t)},()=>{})}dequeue(){this.throwIfDispose();const e=new qo.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:fn.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new qo.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:fn.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(e,t){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const s=this.privSubscribers;if(s){for(;s.length()>0;)s.removeFirst().deferral.resolve(void 0);this.privSubscribers===s&&(this.privSubscribers=s)}for(const c of this.privDetachables)await c.detach();if(this.privPromiseStore.length()>0&&e){const c=[];return this.privPromiseStore.toArray().forEach(a=>{c.push(a)}),Promise.all(c).finally(()=>{this.privSubscribers=null,this.privList.forEach(a=>{e(a)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const s=e.removeFirst();if(s.type===fn.Peek)s.deferral.resolve(t.first());else{const c=t.removeFirst();s.deferral.resolve(c)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new Es.InvalidOperationError(this.privDisposeReason):new Es.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new Es.InvalidOperationError("Queue disposing")}}In.Queue=_C;var Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.RawWebsocketMessage=void 0;const jn=no,At=ae,EC=Te;class IC{constructor(e,t,s){if(this.privPayload=null,!t)throw new At.ArgumentNullError("payload");if(e===jn.MessageType.Binary&&Object.getPrototypeOf(t).constructor.name!=="ArrayBuffer")throw new At.InvalidOperationError("Payload must be ArrayBuffer");if(e===jn.MessageType.Text&&typeof t!="string")throw new At.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=s||EC.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===jn.MessageType.Binary)throw new At.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===jn.MessageType.Text)throw new At.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Si.RawWebsocketMessage=IC;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.RiffPcmEncoder=void 0;class TC{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const s=t.length*2,c=new ArrayBuffer(s),a=new DataView(c);return this.floatTo16BitPCM(a,0,t),c}setString(e,t,s){for(let c=0;c<s.length;c++)e.setUint8(t+c,s.charCodeAt(c))}floatTo16BitPCM(e,t,s){for(let c=0;c<s.length;c++,t+=2){const a=Math.max(-1,Math.min(1,s[c]));e.setInt16(t,a<0?a*32768:a*32767,!0)}}downSampleAudioFrame(e,t,s){if(!e)return null;if(s===t||s>t)return e;const c=t/s,a=Math.round(e.length/c),i=new Float32Array(a);let n=0,o=0;for(;o<a;){const u=Math.round((o+1)*c);let p=0,l=0;for(;n<u&&n<e.length;)p+=e[n++],l++;i[o++]=p/l}return i}}Ci.RiffPcmEncoder=TC;var yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.Stream=void 0;const Fo=ae,bC=Te,xo=In;class wC{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||bC.createNoDashGuid(),this.privReaderQueue=new xo.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new Fo.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async e=>((e===void 0||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new xo.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Fo.InvalidOperationError("Stream closed")}}yi.Stream=wC;var Pi={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r.TranslationStatus||(r.TranslationStatus={}))})(Pi);var kt={},Vo;function AC(){if(Vo)return kt;Vo=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.ChunkedArrayBufferStream=void 0;const r=M();let e=class extends r.Stream{constructor(s,c){super(c),this.privTargetChunkSize=s,this.privNextBufferReadyBytes=0}writeStreamChunk(s){if(s.isEnd||this.privNextBufferReadyBytes===0&&s.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(s);return}let c=0;for(;c<s.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=s.timeReceived);const a=Math.min(s.buffer.byteLength-c,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),n=new Uint8Array(s.buffer.slice(c,a+c));i.set(n,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=a,c+=a,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return kt.ChunkedArrayBufferStream=e,kt}var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.Timeout=void 0;class ve{static load(){const e=new Map([[0,()=>{}]]),t=new Map,c="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),a=new Worker(c);return a.addEventListener("message",({data:o})=>{if(ve.isCallNotification(o)){const{params:{timerId:u}}=o,p=e.get(u);if(typeof p=="number"){const l=t.get(p);if(l===void 0||l!==u)throw new Error("The timer is in an undefined state.")}else if(typeof p<"u")p(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(ve.isClearResponse(o)){const{id:u}=o,p=t.get(u);if(p===void 0)throw new Error("The timer is in an undefined state.");t.delete(u),e.delete(p)}else{const{error:{message:u}}=o;throw new Error(u)}}),{clearTimeout:o=>{const u=Math.random();t.set(u,o),e.set(o,u),a.postMessage({id:u,method:"clear",params:{timerId:o}})},setTimeout:(o,u)=>{const p=Math.random();return e.set(p,o),a.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p}}),p}}}static loadWorkerTimers(){return()=>(ve.workerTimers!==null||(ve.workerTimers=ve.load()),ve.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}}Ri.Timeout=ve;ve.workerTimers=null;ve.clearTimeout=r=>ve.timers().clearTimeout(r);ve.setTimeout=(r,e)=>ve.timers().setTimeout(r,e);ve.timers=ve.loadWorkerTimers();var K={};Object.defineProperty(K,"__esModule",{value:!0});K.OCSPCacheUpdateErrorEvent=K.OCSPResponseRetrievedEvent=K.OCSPCacheFetchErrorEvent=K.OCSPVerificationFailedEvent=K.OCSPCacheHitEvent=K.OCSPCacheEntryNeedsRefreshEvent=K.OCSPCacheEntryExpiredEvent=K.OCSPWSUpgradeStartedEvent=K.OCSPStapleReceivedEvent=K.OCSPCacheUpdateCompleteEvent=K.OCSPDiskCacheStoreEvent=K.OCSPMemoryCacheStoreEvent=K.OCSPCacheUpdateNeededEvent=K.OCSPDiskCacheHitEvent=K.OCSPCacheMissEvent=K.OCSPMemoryCacheHitEvent=K.OCSPEvent=void 0;const ce=It;class ue extends ce.PlatformEvent{constructor(e,t,s){super(e,t),this.privSignature=s}}K.OCSPEvent=ue;class kC extends ue{constructor(e){super("OCSPMemoryCacheHitEvent",ce.EventType.Debug,e)}}K.OCSPMemoryCacheHitEvent=kC;class MC extends ue{constructor(e){super("OCSPCacheMissEvent",ce.EventType.Debug,e)}}K.OCSPCacheMissEvent=MC;class OC extends ue{constructor(e){super("OCSPDiskCacheHitEvent",ce.EventType.Debug,e)}}K.OCSPDiskCacheHitEvent=OC;class DC extends ue{constructor(e){super("OCSPCacheUpdateNeededEvent",ce.EventType.Debug,e)}}K.OCSPCacheUpdateNeededEvent=DC;class NC extends ue{constructor(e){super("OCSPMemoryCacheStoreEvent",ce.EventType.Debug,e)}}K.OCSPMemoryCacheStoreEvent=NC;class zC extends ue{constructor(e){super("OCSPDiskCacheStoreEvent",ce.EventType.Debug,e)}}K.OCSPDiskCacheStoreEvent=zC;class LC extends ue{constructor(e){super("OCSPCacheUpdateCompleteEvent",ce.EventType.Debug,e)}}K.OCSPCacheUpdateCompleteEvent=LC;class jC extends ue{constructor(){super("OCSPStapleReceivedEvent",ce.EventType.Debug,"")}}K.OCSPStapleReceivedEvent=jC;class BC extends ue{constructor(e){super("OCSPWSUpgradeStartedEvent",ce.EventType.Debug,e)}}K.OCSPWSUpgradeStartedEvent=BC;class $C extends ue{constructor(e,t){super("OCSPCacheEntryExpiredEvent",ce.EventType.Debug,e),this.privExpireTime=t}}K.OCSPCacheEntryExpiredEvent=$C;class qC extends ue{constructor(e,t,s){super("OCSPCacheEntryNeedsRefreshEvent",ce.EventType.Debug,e),this.privExpireTime=s,this.privStartTime=t}}K.OCSPCacheEntryNeedsRefreshEvent=qC;class FC extends ue{constructor(e,t,s){super("OCSPCacheHitEvent",ce.EventType.Debug,e),this.privExpireTime=s,this.privExpireTimeString=new Date(s).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}K.OCSPCacheHitEvent=FC;class xC extends ue{constructor(e,t){super("OCSPVerificationFailedEvent",ce.EventType.Debug,e),this.privError=t}}K.OCSPVerificationFailedEvent=xC;class VC extends ue{constructor(e,t){super("OCSPCacheFetchErrorEvent",ce.EventType.Debug,e),this.privError=t}}K.OCSPCacheFetchErrorEvent=VC;class UC extends ue{constructor(e){super("OCSPResponseRetrievedEvent",ce.EventType.Debug,e)}}K.OCSPResponseRetrievedEvent=UC;class HC extends ue{constructor(e,t){super("OCSPCacheUpdateErrorEvent",ce.EventType.Debug,e),this.privError=t}}K.OCSPCacheUpdateErrorEvent=HC;var Mt={},Uo;function WC(){if(Uo)return Mt;Uo=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.BackgroundEvent=void 0;const r=M();class e extends r.PlatformEvent{constructor(s){super("BackgroundEvent",r.EventType.Error),this.privError=s}get error(){return this.privError}}return Mt.BackgroundEvent=e,Mt}var Ho;function M(){return Ho||(Ho=1,function(r){var e=x&&x.__createBinding||(Object.create?function(c,a,i,n){n===void 0&&(n=i),Object.defineProperty(c,n,{enumerable:!0,get:function(){return a[i]}})}:function(c,a,i,n){n===void 0&&(n=i),c[n]=a[i]}),t=x&&x.__exportStar||function(c,a){for(var i in c)i!=="default"&&!a.hasOwnProperty(i)&&e(a,c,i)};Object.defineProperty(r,"__esModule",{value:!0}),t(X,r),t(Y,r),t(no,r),t(fi,r),t(gi,r),t(ht,r),t(ae,r),t(mi,r),t(_n,r),t(Te,r),t(Bu,r),t($u,r),t(qu,r),t(Fu,r),t(xu,r),t(Vu,r),t(Uu,r),t(Hu,r),t(Wu,r),t(Ku,r),t(En,r),t(It,r),t(io,r),t(In,r),t(Si,r),t(Ci,r),t(yi,r);var s=Pi;Object.defineProperty(r,"TranslationStatus",{enumerable:!0,get:function(){return s.TranslationStatus}}),t(AC(),r),t(Ju,r),t(Ri,r),t(K,r),t(WC(),r)}(Cs)),Cs}var ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.HeaderNames=void 0;class we{}ne.HeaderNames=we;we.AuthKey="Ocp-Apim-Subscription-Key";we.Authorization="Authorization";we.SpIDAuthKey="Apim-Subscription-Id";we.ConnectionId="X-ConnectionId";we.ContentType="Content-Type";we.CustomCommandsAppId="X-CommandsAppId";we.Path="Path";we.RequestId="X-RequestId";we.RequestStreamId="X-StreamId";we.RequestTimestamp="X-Timestamp";var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.AuthInfo=void 0;class KC{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}bt.AuthInfo=KC;Object.defineProperty(ri,"__esModule",{value:!0});ri.CognitiveSubscriptionKeyAuthentication=void 0;const JC=M(),GC=ne,QC=bt;class XC{constructor(e){if(!e)throw new JC.ArgumentNullError("subscriptionKey");this.privAuthInfo=new QC.AuthInfo(GC.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}ri.CognitiveSubscriptionKeyAuthentication=XC;var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.CognitiveTokenAuthentication=void 0;const Wo=M(),Ko=bt,Jo=ne;class Sn{constructor(e,t){if(!e)throw new Wo.ArgumentNullError("fetchCallback");if(!t)throw new Wo.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then(t=>new Ko.AuthInfo(Jo.HeaderNames.Authorization,t===void 0?void 0:Sn.privTokenPrefix+t))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(t=>new Ko.AuthInfo(Jo.HeaderNames.Authorization,t===void 0?void 0:Sn.privTokenPrefix+t))}}_i.CognitiveTokenAuthentication=Sn;Sn.privTokenPrefix="Bearer ";var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});var Ot={},Ts={},Ei={};const ZC={},YC=Object.freeze(Object.defineProperty({__proto__:null,default:ZC},Symbol.toStringTag,{value:"Module"})),ft=Km(YC);var so={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LogLevel=void 0;const e=M();Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(so);var z={};Object.defineProperty(z,"__esModule",{value:!0});z.Contracts=void 0;class Fe{static throwIfNullOrUndefined(e,t){if(e==null)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(e===null)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(Fe.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,s){if(Fe.throwIfNullOrUndefined(e,t),(""+e).length>s)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+s.toString()+" characters)")}static throwIfNullOrTooShort(e,t,s){if(Fe.throwIfNullOrUndefined(e,t),(""+e).length<s)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+s.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(Fe.throwIfNullOrUndefined(e,t),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const s of e)Fe.throwIfNullOrWhitespace(s,t)}static throwIfFileDoesNotExist(e,t){Fe.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(e!==void 0)throw new Error("throwIfNotUndefined:"+t)}}z.Contracts=Fe;var ey=x&&x.__createBinding||(Object.create?function(r,e,t,s){s===void 0&&(s=t),Object.defineProperty(r,s,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}),ty=x&&x.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ry=x&&x.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&ey(e,r,t);return ty(e,r),e};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.ConsoleLoggingListener=void 0;const Go=ry(ft),Dt=so,ny=z;class iy{constructor(e=Dt.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){ny.Contracts.throwIfNullOrUndefined(Go.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);if(this.logCallback&&this.logCallback(t),this.privLogPath&&Go.writeFileSync(this.privLogPath,t+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case Dt.LogLevel.Debug:console.debug(t);break;case Dt.LogLevel.Info:console.info(t);break;case Dt.LogLevel.Warning:console.warn(t);break;case Dt.LogLevel.Error:console.error(t);break;default:console.log(t);break}}}toString(e){const t=[`${e.eventTime}`,`${e.name}`],s=e;for(const c in s)if(c&&e.hasOwnProperty(c)&&c!=="eventTime"&&c!=="eventType"&&c!=="eventId"&&c!=="name"&&c!=="constructor"){const a=s[c];let i="<NULL>";a!=null&&(typeof a=="number"||typeof a=="string"?i=a.toString():i=JSON.stringify(a)),t.push(`${c}: ${i}`)}return t.join(" | ")}}Ei.ConsoleLoggingListener=iy;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});var bs={},Je={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AudioStreamFormatImpl=r.AudioStreamFormat=r.AudioFormatTag=void 0;var e;(function(c){c[c.PCM=1]="PCM",c[c.MuLaw=2]="MuLaw",c[c.Siren=3]="Siren",c[c.MP3=4]="MP3",c[c.SILKSkype=5]="SILKSkype",c[c.OGG_OPUS=6]="OGG_OPUS",c[c.WEBM_OPUS=7]="WEBM_OPUS",c[c.ALaw=8]="ALaw",c[c.FLAC=9]="FLAC",c[c.OPUS=10]="OPUS"})(e=r.AudioFormatTag||(r.AudioFormatTag={}));class t{static getDefaultInputFormat(){return s.getDefaultInputFormat()}static getWaveFormat(a,i,n,o){return new s(a,i,n,o)}static getWaveFormatPCM(a,i,n){return new s(a,i,n)}}r.AudioStreamFormat=t;class s extends t{constructor(a=16e3,i=16,n=1,o=e.PCM){super();let u=!0;switch(o){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=i,this.samplesPerSec=a,this.channels=n,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const p=new DataView(this.privHeader);this.setString(p,0,"RIFF"),p.setUint32(4,0,!0),this.setString(p,8,"WAVEfmt "),p.setUint32(16,16,!0),p.setUint16(20,this.formatTag,!0),p.setUint16(22,this.channels,!0),p.setUint32(24,this.samplesPerSec,!0),p.setUint32(28,this.avgBytesPerSec,!0),p.setUint16(32,this.channels*(this.bitsPerSample/8),!0),p.setUint16(34,this.bitsPerSample,!0),this.setString(p,36,"data"),p.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new s}static getAudioContext(a){const i=window.AudioContext||window.webkitAudioContext||!1;if(i)return a!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new i({sampleRate:a}):new i;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(a,i,n){for(let o=0;o<n.length;o++)a.setUint8(i+o,n.charCodeAt(o))}}r.AudioStreamFormatImpl=s})(Je);var Qo;function sy(){return Qo||(Qo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MicAudioSource=r.AudioWorkletSourceURLPropertyName=void 0;const e=b(),t=M(),s=Je;r.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class c{constructor(i,n,o,u){this.privRecorder=i,this.deviceId=n,this.privStreams={},this.privOutputChunkSize=c.AUDIOFORMAT.avgBytesPerSec/10,this.privId=o||t.createNoDashGuid(),this.privEvents=new t.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(c.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new t.Deferred;try{this.createAudioContext()}catch(o){if(o instanceof Error){const u=o;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(o);return this.privInitializeDeferral.promise}const i=window.navigator;let n=i.getUserMedia||i.webkitGetUserMedia||i.mozGetUserMedia||i.msGetUserMedia;if(i.mediaDevices&&(n=(o,u,p)=>{i.mediaDevices.getUserMedia(o).then(u).catch(p)}),n){const o=()=>{this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new t.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):n({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new t.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const p=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(p),this.onEvent(new t.AudioSourceErrorEvent(this.privId,p))})};this.privContext.state==="suspended"?this.privContext.resume().then(o).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):o()}else{const o="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(o),this.onEvent(new t.AudioSourceErrorEvent(o,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(i){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,i)),this.listen(i).then(n=>(this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,i)),{detach:async()=>(n.readEnded(),delete this.privStreams[i],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,i)),this.turnOff()),id:()=>i,read:()=>n.read()}))}detach(i){i&&this.privStreams[i]&&(this.privStreams[i].close(),delete this.privStreams[i],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,i)))}async turnOff(){for(const i in this.privStreams)if(i){const n=this.privStreams[i];n&&n.close()}this.onEvent(new t.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(i=>({bitspersample:c.AUDIOFORMAT.bitsPerSample,channelcount:c.AUDIOFORMAT.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:i,samplerate:c.AUDIOFORMAT.samplesPerSec,type:e.type.Microphones}))}setProperty(i,n){if(i===r.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(n);else throw new Error("Property '"+i+"' is not supported on Microphone.")}getMicrophoneLabel(){const i="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(i);this.privMicrophoneLabel=i;const n=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(n===void 0)return Promise.resolve(this.privMicrophoneLabel);const o=new t.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const p of u)if(p.deviceId===n){this.privMicrophoneLabel=p.label;break}o.resolve(this.privMicrophoneLabel)},()=>o.resolve(this.privMicrophoneLabel)),o.promise}async listen(i){await this.turnOn();const n=new t.ChunkedArrayBufferStream(this.privOutputChunkSize,i);this.privStreams[i]=n;try{this.privRecorder.record(this.privContext,this.privMediaStream,n)}catch(u){throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,i,u)),u}return n}onEvent(i){this.privEvents.onEvent(i),t.Events.instance.onEvent(i)}createAudioContext(){this.privContext||(this.privContext=s.AudioStreamFormatImpl.getAudioContext(c.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let i=!1;"close"in this.privContext&&(i=!0),i?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}r.MicAudioSource=c,c.AUDIOFORMAT=s.AudioStreamFormat.getDefaultInputFormat()}(bs)),bs}var Nt={},Xo;function oy(){if(Xo)return Nt;Xo=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.FileAudioSource=void 0;const r=b(),e=M(),t=Je;let s=class{constructor(a,i,n){this.privStreams={},this.privHeaderEnd=44,this.privId=n||e.createNoDashGuid(),this.privEvents=new e.EventSource,this.privSource=a,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=a.name:this.privFilename=i||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const a=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(a,"")),Promise.reject(a)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(a){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,a));const i=await this.upload(a);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,a)),Promise.resolve({detach:async()=>{i.readEnded(),delete this.privStreams[a],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a)),await this.turnOff()},id:()=>a,read:()=>i.read()})}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a)))}turnOff(){for(const a in this.privStreams)if(a){const i=this.privStreams[a];i&&!i.isClosed&&i.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(a=>Promise.resolve({bitspersample:a.bitsPerSample,channelcount:a.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:a.samplesPerSec,type:r.type.File}))}readHeader(){const i=this.privSource.slice(0,4296),n=new e.Deferred,o=u=>{const p=new DataView(u),l=S=>String.fromCharCode(p.getUint8(S),p.getUint8(S+1),p.getUint8(S+2),p.getUint8(S+3));if(l(0)!=="RIFF"){n.reject("Invalid WAV header in file, RIFF was not found");return}if(l(8)!=="WAVE"||l(12)!=="fmt "){n.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=p.getInt32(16,!0),h=p.getUint16(22,!0),v=p.getUint32(24,!0),g=p.getUint16(34,!0);let f=36+Math.max(d-16,0);for(;l(f)!=="data";f+=2)if(f>4288){n.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=f+8,n.resolve(t.AudioStreamFormat.getWaveFormatPCM(v,g,h))};if(typeof window<"u"&&typeof Blob<"u"&&i instanceof Blob){const u=new FileReader;u.onload=p=>{const l=p.target.result;o(l)},u.readAsArrayBuffer(i)}else{const u=i;o(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return n.promise}async upload(a){const i=n=>{const o=`Error occurred while processing '${this.privFilename}'. ${n}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,a,o)),new Error(o)};try{await this.turnOn();const n=await this.privAudioFormatPromise,o=new e.ChunkedArrayBufferStream(n.avgBytesPerSec/10,a);this.privStreams[a]=o;const u=this.privSource.slice(this.privHeaderEnd),p=l=>{o.isClosed||(o.writeStreamChunk({buffer:l,isEnd:!1,timeReceived:Date.now()}),o.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const l=new FileReader;l.onerror=d=>i(d.toString()),l.onload=d=>{const h=d.target.result;p(h)},l.readAsArrayBuffer(u)}else{const l=u;p(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength))}return o}catch(n){i(n)}}onEvent(a){this.privEvents.onEvent(a),e.Events.instance.onEvent(a)}};return Nt.FileAudioSource=s,Nt}var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.PcmRecorder=void 0;const ay=M();class cy{constructor(e){this.privStopInputOnRelease=e}record(e,t,s){const a=new ay.RiffPcmEncoder(e.sampleRate,16e3),i=e.createMediaStreamSource(t),n=()=>{const u=(()=>{let p=0;try{return e.createScriptProcessor(p,1,1)}catch{p=2048;let d=e.sampleRate;for(;p<16384&&d>=32e3;)p<<=1,d>>=1;return e.createScriptProcessor(p,1,1)}})();u.onaudioprocess=p=>{const l=p.inputBuffer.getChannelData(0);if(s&&!s.isClosed){const d=a.encode(l);d&&s.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},i.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:i,stream:t}},o=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!o){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,p=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(p)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=p=>{const l=p.data;if(s&&!s.isClosed){const d=a.encode(l);d&&s.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},i.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:i,stream:t}}).catch(()=>{n()})}else try{n()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(t=>t.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}Ii.PcmRecorder=cy;var Ti={},Tn={},uy=x&&x.__createBinding||(Object.create?function(r,e,t,s){s===void 0&&(s=t),Object.defineProperty(r,s,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}),py=x&&x.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Zu=x&&x.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&uy(e,r,t);return py(e,r),e},oo=x&&x.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.WebsocketMessageAdapter=void 0;const ly=Zu(ft),dy=Zu(ft),hy=oo(ft),vy=oo(ft),fy=oo(ft),gy=ne,$=M();class Cn{constructor(e,t,s,c,a,i){if(!e)throw new $.ArgumentNullError("uri");if(!s)throw new $.ArgumentNullError("messageFormatter");this.proxyInfo=c,this.privConnectionEvents=new $.EventSource,this.privConnectionId=t,this.privMessageFormatter=s,this.privConnectionState=$.ConnectionState.None,this.privUri=e,this.privHeaders=a,this.privEnableCompression=i,this.privHeaders[gy.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===$.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new $.Deferred,this.privCertificateValidatedDeferral=new $.Deferred,this.privConnectionState=$.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Cn.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let s=new URL(this.privUri).protocol;(s==null?void 0:s.toLocaleLowerCase())==="wss:"?s="https:":(s==null?void 0:s.toLocaleLowerCase())==="ws:"&&(s="http:"),e.agent.protocol=s,this.privWebsocketClient=new fy.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new $.Queue,this.privDisconnectDeferral=new $.Deferred,this.privSendMessageQueue=new $.Queue,this.processSendQueue().catch(e=>{$.Events.instance.onEvent(new $.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new $.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new $.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=$.ConnectionState.Connected,this.onEvent(new $.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new $.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new $.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===$.ConnectionState.Connecting?(this.privConnectionState=$.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new $.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=$.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new $.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(t=>{$.Events.instance.onEvent(new $.BackgroundEvent(t))})},this.privWebsocketClient.onmessage=e=>{const t=new Date().toISOString();if(this.privConnectionState===$.ConnectionState.Connected){const s=new $.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(s.promise),e.data instanceof ArrayBuffer){const c=new $.RawWebsocketMessage($.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(c).then(a=>{this.onEvent(new $.ConnectionMessageReceivedEvent(this.privConnectionId,t,a)),s.resolve(a)},a=>{s.reject(`Invalid binary message format. Error: ${a}`)})}else{const c=new $.RawWebsocketMessage($.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(c).then(a=>{this.onEvent(new $.ConnectionMessageReceivedEvent(this.privConnectionId,t,a)),s.resolve(a)},a=>{s.reject(`Invalid text message format. Error: ${a}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==$.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${$.ConnectionState[this.privConnectionState]} state`);const t=new $.Deferred,s=new $.Deferred;return this.privSendMessageQueue.enqueueFromPromise(s.promise),this.privMessageFormatter.fromConnectionMessage(e).then(c=>{s.resolve({Message:e,RawWebsocketMessage:c,sendStatusDeferral:t})},c=>{s.reject(`Error formatting the message. ${c}`)}),t.promise}read(){return this.privConnectionState!==$.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==$.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new $.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(t){return Promise.reject(`websocket send error: ${t}`)}}async onClose(e,t){const s=`Connection closed. ${e}: ${t}`;this.privConnectionState=$.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},s),await this.privSendMessageQueue.drainAndDispose(c=>{c.sendStatusDeferral.reject(s)},s)}async processSendQueue(){for(;;){const t=await this.privSendMessageQueue.dequeue();if(!t)return;try{await this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(s){t.sendStatusDeferral.reject(s)}}}onEvent(e){this.privConnectionEvents.onEvent(e),$.Events.instance.onEvent(e)}getAgent(){const e=new hy.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new vy.default(t)}createConnection(e,t){let s;if(t={...t,requestOCSP:!0,servername:t.host},this.proxyInfo){const a=Cn.GetProxyAgent(this.proxyInfo);s=new Promise((i,n)=>{a.callback(e,t,(o,u)=>{o?n(o):i(u)})})}else t.secureEndpoint?s=Promise.resolve(dy.connect(t)):s=Promise.resolve(ly.connect(t));return s}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}Tn.WebsocketMessageAdapter=Cn;Cn.forceNpmWebSocket=!1;Object.defineProperty(Ti,"__esModule",{value:!0});Ti.WebsocketConnection=void 0;const ws=M(),my=Tn;class Sy{constructor(e,t,s,c,a,i=!1,n){if(this.privIsDisposed=!1,!e)throw new ws.ArgumentNullError("uri");if(!c)throw new ws.ArgumentNullError("messageFormatter");this.privMessageFormatter=c;let o="",u=0;if(t){for(const p in t)if(p){o+=u===0&&e.indexOf("?")===-1?"?":"&";const l=encodeURIComponent(p);o+=l;let d=t[p];d&&(d=encodeURIComponent(d),o+=`=${d}`),u++}}if(s){for(const p in s)if(p){o+=u===0&&e.indexOf("?")===-1?"?":"&";const l=encodeURIComponent(s[p]);o+=`${p}=${l}`,u++}}this.privUri=e+o,this.privId=n||ws.createNoDashGuid(),this.privConnectionMessageAdapter=new my.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,a,s,i)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}Ti.WebsocketConnection=Sy;var bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.ReplayableAudioNode=void 0;class Cy{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);t%2!==0&&t++;let s=0;for(;s<this.privBuffers.length&&t>=this.privBuffers[s].chunk.buffer.byteLength;)t-=this.privBuffers[s++].chunk.buffer.byteLength;if(s<this.privBuffers.length){const c=this.privBuffers[s].chunk.buffer.slice(t);return this.privReplayOffset+=c.byteLength/this.privBytesPerSecond*1e7,s===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:c,isEnd:!1,timeReceived:this.privBuffers[s].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new yy(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let s=Math.round(t*this.privBytesPerSecond*1e-7),c=0;for(;c<this.privBuffers.length&&s>=this.privBuffers[c].chunk.buffer.byteLength;)s-=this.privBuffers[c++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-s/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(c)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const t of this.privBuffers){const s=t.byteOffset/this.privBytesPerSecond*1e7,c=s+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=s&&e<=c)return t.chunk.timeReceived}return 0}}bi.ReplayableAudioNode=Cy;class yy{constructor(e,t,s){this.chunk=e,this.serial=t,this.byteOffset=s}}var zt={},As={},De={},bn={},Py=x&&x.__createBinding||(Object.create?function(r,e,t,s){s===void 0&&(s=t),Object.defineProperty(r,s,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}),Ry=x&&x.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),_y=x&&x.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&Py(e,r,t);return Ry(e,r),e};Object.defineProperty(bn,"__esModule",{value:!0});bn.AudioFileWriter=void 0;const Lt=_y(ft),ks=z;class Ey{constructor(e){ks.Contracts.throwIfNullOrUndefined(Lt.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=Lt.openSync(e,"w")}set format(e){ks.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=Lt.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){ks.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),Lt.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),Lt.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}bn.AudioFileWriter=Ey;var Pe={},Zo;function Yu(){if(Zo)return Pe;Zo=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.PullAudioInputStreamImpl=Pe.PullAudioInputStream=Pe.PushAudioInputStreamImpl=Pe.PushAudioInputStream=Pe.AudioInputStream=void 0;const r=b(),e=M(),t=Te,s=E(),c=Je;let a=class{constructor(){}static createPushStream(l){return i.create(l)}static createPullStream(l,d){return o.create(l,d)}};Pe.AudioInputStream=a;class i extends a{static create(l){return new n(l)}}Pe.PushAudioInputStream=i;class n extends i{constructor(l){super(),l===void 0?this.privFormat=c.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=l,this.privEvents=new e.EventSource,this.privId=t.createNoDashGuid(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(l){this.privStream.writeStreamChunk({buffer:l,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(l){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,l)),await this.turnOn();const d=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,l)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,l)),this.turnOff()),id:()=>l,read:()=>d.read()}}detach(l){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,l))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(l){this.privEvents.onEvent(l),e.Events.instance.onEvent(l)}toBuffer(l){const d=Buffer.alloc(l.byteLength),h=new Uint8Array(l);for(let v=0;v<d.length;++v)d[v]=h[v];return d}}Pe.PushAudioInputStreamImpl=n;class o extends a{constructor(){super()}static create(l,d){return new u(l,d)}}Pe.PullAudioInputStream=o;class u extends o{constructor(l,d){super(),d===void 0?this.privFormat=s.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new e.EventSource,this.privId=t.createNoDashGuid(),this.privCallback=l,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(l){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,l)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,l)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,l)),this.turnOff()),id:()=>l,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const v=new ArrayBuffer(this.privBufferSize-d),g=this.privCallback.read(v);if(h===void 0?h=v:new Int8Array(h).set(new Int8Array(v),d),g===0)break;d+=g}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(l){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,l))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(l){this.privEvents.onEvent(l),e.Events.instance.onEvent(l)}}return Pe.PullAudioInputStreamImpl=u,Pe}var oe={},Ge={},ao={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(r.SpeechSynthesisOutputFormat||(r.SpeechSynthesisOutputFormat={}))})(ao);Object.defineProperty(Ge,"__esModule",{value:!0});Ge.AudioOutputFormatImpl=void 0;const H=ao,q=Je;class j extends q.AudioStreamFormatImpl{constructor(e,t,s,c,a,i,n,o,u){super(s,i,t,e),this.formatTag=e,this.avgBytesPerSec=c,this.blockAlign=a,this.priAudioFormatString=n,this.priRequestAudioFormatString=o,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?j.getDefaultOutputFormat():j.fromSpeechSynthesisOutputFormatString(j.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new j(q.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new j(q.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new j(q.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new j(q.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new j(q.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new j(q.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new j(q.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new j(q.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new j(q.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new j(q.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"riff-16khz-16bit-mono-pcm":default:return new j(q.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return j.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}}Ge.AudioOutputFormatImpl=j;j.SpeechSynthesisOutputFormatToString={[H.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[H.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[H.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[H.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[H.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[H.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[H.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[H.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[H.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[H.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[H.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[H.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[H.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[H.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[H.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[H.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[H.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[H.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[H.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[H.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[H.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[H.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[H.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[H.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[H.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[H.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[H.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"};Object.defineProperty(oe,"__esModule",{value:!0});oe.PushAudioOutputStreamImpl=oe.PushAudioOutputStream=oe.PullAudioOutputStreamImpl=oe.PullAudioOutputStream=oe.AudioOutputStream=void 0;const Hs=M(),Iy=z,Ty=Ge;class co{constructor(){}static createPullStream(){return uo.create()}}oe.AudioOutputStream=co;class uo extends co{static create(){return new ep}}oe.PullAudioOutputStream=uo;class ep extends uo{constructor(){super(),this.privId=Hs.createNoDashGuid(),this.privStream=new Hs.Stream}set format(e){e==null&&(this.privFormat=Ty.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){const t=new Int8Array(e);let s=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),s=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;s<e.byteLength&&!this.privStream.isReadEnded;){const c=await this.privStream.read();if(c!==void 0&&!c.isEnd){let a;c.buffer.byteLength>e.byteLength-s?(a=c.buffer.slice(0,e.byteLength-s),this.privLastChunkView=new Int8Array(c.buffer.slice(e.byteLength-s))):a=c.buffer,t.set(new Int8Array(a),s),s+=a.byteLength}else this.privStream.readEnded()}return s}write(e){Iy.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}oe.PullAudioOutputStreamImpl=ep;class tp extends co{constructor(){super()}static create(e){return new rp(e)}}oe.PushAudioOutputStream=tp;class rp extends tp{constructor(e){super(),this.privId=Hs.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}oe.PushAudioOutputStreamImpl=rp;var Yo;function ip(){if(Yo)return De;Yo=1,Object.defineProperty(De,"__esModule",{value:!0}),De.AudioOutputConfigImpl=De.AudioConfigImpl=De.AudioConfig=void 0;const r=ie(),e=z,t=E(),s=bn,c=Yu(),a=oe;let i=class np{static fromDefaultMicrophoneInput(){const p=new r.PcmRecorder(!0);return new n(new r.MicAudioSource(p))}static fromMicrophoneInput(p){const l=new r.PcmRecorder(!0);return new n(new r.MicAudioSource(l,p))}static fromWavFileInput(p,l="unnamedBuffer.wav"){return new n(new r.FileAudioSource(p,l))}static fromStreamInput(p){if(p instanceof t.PullAudioInputStreamCallback)return new n(new c.PullAudioInputStreamImpl(p));if(p instanceof t.AudioInputStream)return new n(p);if(typeof MediaStream<"u"&&p instanceof MediaStream){const l=new r.PcmRecorder(!1);return new n(new r.MicAudioSource(l,null,null,p))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new o(new t.SpeakerAudioDestination)}static fromSpeakerOutput(p){if(p===void 0)return np.fromDefaultSpeakerOutput();if(p instanceof t.SpeakerAudioDestination)return new o(p);throw new Error("Not Supported Type")}static fromAudioFileOutput(p){return new o(new s.AudioFileWriter(p))}static fromStreamOutput(p){if(p instanceof t.PushAudioOutputStreamCallback)return new o(new a.PushAudioOutputStreamImpl(p));if(p instanceof t.PushAudioOutputStream)return new o(p);if(p instanceof t.PullAudioOutputStream)return new o(p);throw new Error("Not Supported Type")}};De.AudioConfig=i;class n extends i{constructor(p){super(),this.privSource=p}get format(){return this.privSource.format}close(p,l){this.privSource.turnOff().then(()=>{p&&p()},d=>{l&&l(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(p){return this.privSource.attach(p)}detach(p){return this.privSource.detach(p)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(p,l){if(e.Contracts.throwIfNull(l,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(p,l);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(p,l){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(p,l);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}De.AudioConfigImpl=n;class o extends i{constructor(p){super(),this.privDestination=p}set format(p){this.privDestination.format=p}write(p){this.privDestination.write(p)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return De.AudioOutputConfigImpl=o,De}var sp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(r.CancellationReason||(r.CancellationReason={}))})(sp);var wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.PullAudioInputStreamCallback=void 0;class by{}wi.PullAudioInputStreamCallback=by;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.PushAudioOutputStreamCallback=void 0;class wy{}Ai.PushAudioOutputStreamCallback=wy;var ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.KeywordRecognitionModel=void 0;const ea=z;class Ay{constructor(){this.privDisposed=!1}static fromFile(e){throw ea.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw ea.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}ki.KeywordRecognitionModel=Ay;var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.SessionEventArgs=void 0;class ky{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}Mi.SessionEventArgs=ky;var jt={},ta;function My(){if(ta)return jt;ta=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.RecognitionEventArgs=void 0;const r=E();let e=class extends r.SessionEventArgs{constructor(s,c){super(c),this.privOffset=s}get offset(){return this.privOffset}};return jt.RecognitionEventArgs=e,jt}var op={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(r.OutputFormat||(r.OutputFormat={}))})(op);var Bt={},ra;function Oy(){if(ra)return Bt;ra=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.IntentRecognitionEventArgs=void 0;const r=E();let e=class extends r.RecognitionEventArgs{constructor(s,c,a){super(c,a),this.privResult=s}get result(){return this.privResult}};return Bt.IntentRecognitionEventArgs=e,Bt}var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.RecognitionResult=void 0;class Dy{constructor(e,t,s,c,a,i,n,o,u,p){this.privResultId=e,this.privReason=t,this.privText=s,this.privDuration=c,this.privOffset=a,this.privLanguage=i,this.privLanguageDetectionConfidence=n,this.privErrorDetails=o,this.privJson=u,this.privProperties=p}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}Oi.RecognitionResult=Dy;var $t={},na;function Ny(){if(na)return $t;na=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.SpeechRecognitionResult=void 0;const r=E();let e=class extends r.RecognitionResult{constructor(s,c,a,i,n,o,u,p,l,d,h){super(s,c,a,i,n,o,u,l,d,h),this.privSpeakerId=p}get speakerId(){return this.privSpeakerId}};return $t.SpeechRecognitionResult=e,$t}var qt={},ia;function zy(){if(ia)return qt;ia=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.IntentRecognitionResult=void 0;const r=E();let e=class extends r.SpeechRecognitionResult{constructor(s,c,a,i,n,o,u,p,l,d,h){super(c,a,i,n,o,u,p,void 0,l,d,h),this.privIntentId=s}get intentId(){return this.privIntentId}};return qt.IntentRecognitionResult=e,qt}var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.LanguageUnderstandingModelImpl=Pt.LanguageUnderstandingModel=void 0;const St=z;class ap{constructor(){}static fromEndpoint(e){St.Contracts.throwIfNull(e,"uri"),St.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const t=new xn,s=e.host.indexOf(".");if(s===-1)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,s);const c=e.pathname.lastIndexOf("/")+1;if(c===-1)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(c),t.subscriptionKey=e.searchParams.get("subscription-key"),t.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){St.Contracts.throwIfNullOrWhitespace(e,"appId");const t=new xn;return t.appId=e,t}static fromSubscription(e,t,s){St.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),St.Contracts.throwIfNullOrWhitespace(t,"appId"),St.Contracts.throwIfNullOrWhitespace(s,"region");const c=new xn;return c.appId=t,c.region=s,c.subscriptionKey=e,c}}Pt.LanguageUnderstandingModel=ap;class xn extends ap{}Pt.LanguageUnderstandingModelImpl=xn;var Ne={},sa;function Ly(){if(sa)return Ne;sa=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.MeetingTranscriptionEventArgs=Ne.ConversationTranscriptionEventArgs=Ne.SpeechRecognitionEventArgs=void 0;const r=E();let e=class extends r.RecognitionEventArgs{constructor(a,i,n){super(i,n),this.privResult=a}get result(){return this.privResult}};Ne.SpeechRecognitionEventArgs=e;class t extends r.RecognitionEventArgs{constructor(a,i,n){super(i,n),this.privResult=a}get result(){return this.privResult}}Ne.ConversationTranscriptionEventArgs=t;class s extends e{}return Ne.MeetingTranscriptionEventArgs=s,Ne}var Ft={},xt={},oa;function wn(){if(oa)return xt;oa=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.CancellationEventArgsBase=void 0;const r=E();let e=class extends r.RecognitionEventArgs{constructor(s,c,a,i,n){super(i,n),this.privReason=s,this.privErrorDetails=c,this.privErrorCode=a}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return xt.CancellationEventArgsBase=e,xt}var aa;function jy(){if(aa)return Ft;aa=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.SpeechRecognitionCanceledEventArgs=void 0;const r=wn();let e=class extends r.CancellationEventArgsBase{};return Ft.SpeechRecognitionCanceledEventArgs=e,Ft}var Vt={},ca;function By(){if(ca)return Vt;ca=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.TranslationRecognitionEventArgs=void 0;const r=E();let e=class extends r.RecognitionEventArgs{constructor(s,c,a){super(c,a),this.privResult=s}get result(){return this.privResult}};return Vt.TranslationRecognitionEventArgs=e,Vt}var Ut={},ua;function $y(){if(ua)return Ut;ua=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.TranslationSynthesisEventArgs=void 0;const r=E();let e=class extends r.SessionEventArgs{constructor(s,c){super(c),this.privResult=s}get result(){return this.privResult}};return Ut.TranslationSynthesisEventArgs=e,Ut}var Ht={},pa;function up(){if(pa)return Ht;pa=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.TranslationRecognitionResult=void 0;const r=E();let e=class cp extends r.SpeechRecognitionResult{constructor(s,c,a,i,n,o,u,p,l,d,h){super(c,a,i,n,o,u,p,void 0,l,d,h),this.privTranslations=s}static fromSpeechRecognitionResult(s){return new cp(void 0,s.resultId,s.reason,s.text,s.duration,s.offset,s.language,s.languageDetectionConfidence,s.errorDetails,s.json,s.properties)}get translations(){return this.privTranslations}};return Ht.TranslationRecognitionResult=e,Ht}var Di={};Object.defineProperty(Di,"__esModule",{value:!0});Di.TranslationSynthesisResult=void 0;class qy{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}Di.TranslationSynthesisResult=qy;var pp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(r.ResultReason||(r.ResultReason={}))})(pp);var Qe={},la;function Fy(){if(la)return Qe;la=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.SpeechConfigImpl=Qe.SpeechConfig=void 0;const r=b(),e=z,t=E();let s=class{constructor(){}static fromSubscription(i,n){e.Contracts.throwIfNullOrWhitespace(i,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(n,"region");const o=new c;return o.setProperty(t.PropertyId.SpeechServiceConnection_Region,n),o.setProperty(t.PropertyId.SpeechServiceConnection_IntentRegion,n),o.setProperty(t.PropertyId.SpeechServiceConnection_Key,i),o}static fromEndpoint(i,n){e.Contracts.throwIfNull(i,"endpoint");const o=new c;return o.setProperty(t.PropertyId.SpeechServiceConnection_Endpoint,i.href),n!==void 0&&o.setProperty(t.PropertyId.SpeechServiceConnection_Key,n),o}static fromHost(i,n){e.Contracts.throwIfNull(i,"hostName");const o=new c;return o.setProperty(t.PropertyId.SpeechServiceConnection_Host,i.protocol+"//"+i.hostname+(i.port===""?"":":"+i.port)),n!==void 0&&o.setProperty(t.PropertyId.SpeechServiceConnection_Key,n),o}static fromAuthorizationToken(i,n){e.Contracts.throwIfNull(i,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(n,"region");const o=new c;return o.setProperty(t.PropertyId.SpeechServiceConnection_Region,n),o.setProperty(t.PropertyId.SpeechServiceConnection_IntentRegion,n),o.authorizationToken=i,o}close(){}};Qe.SpeechConfig=s;class c extends s{constructor(){super(),this.privProperties=new t.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=t.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){this.privProperties.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,i)}get speechRecognitionLanguage(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(i){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,i)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(i){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,i)}get outputFormat(){return t.OutputFormat[this.privProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(i){this.privProperties.setProperty(r.OutputFormatPropertyName,t.OutputFormat[i])}get endpointId(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(i){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_EndpointId,i)}setProperty(i,n){e.Contracts.throwIfNull(n,"value"),this.privProperties.setProperty(i,n)}getProperty(i,n){return this.privProperties.getProperty(i,n)}setProxy(i,n,o,u){this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyHostName],i),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyPort],n),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyUserName],o),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(i,n){const o=JSON.parse(this.privProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));o[i]=n,this.privProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(o))}setProfanity(i){this.privProperties.setProperty(t.PropertyId.SpeechServiceResponse_ProfanityOption,t.ProfanityOption[i])}enableAudioLogging(){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(r.ForceDictationPropertyName,"true")}clone(){const i=new c;return i.privProperties=this.privProperties.clone(),i}get speechSynthesisLanguage(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(i){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthLanguage,i)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(i){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthVoice,i)}get speechSynthesisOutputFormat(){return t.SpeechSynthesisOutputFormat[this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(i){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthOutputFormat,t.SpeechSynthesisOutputFormat[i])}}return Qe.SpeechConfigImpl=c,Qe}var Xe={},da;function xy(){if(da)return Xe;da=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.SpeechTranslationConfigImpl=Xe.SpeechTranslationConfig=void 0;const r=b(),e=z,t=E();let s=class extends t.SpeechConfig{constructor(){super()}static fromSubscription(i,n){e.Contracts.throwIfNullOrWhitespace(i,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(n,"region");const o=new c;return o.properties.setProperty(t.PropertyId.SpeechServiceConnection_Key,i),o.properties.setProperty(t.PropertyId.SpeechServiceConnection_Region,n),o}static fromAuthorizationToken(i,n){e.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(n,"region");const o=new c;return o.properties.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,i),o.properties.setProperty(t.PropertyId.SpeechServiceConnection_Region,n),o}static fromHost(i,n){e.Contracts.throwIfNull(i,"hostName");const o=new c;return o.setProperty(t.PropertyId.SpeechServiceConnection_Host,i.protocol+"//"+i.hostname+(i.port===""?"":":"+i.port)),n!==void 0&&o.setProperty(t.PropertyId.SpeechServiceConnection_Key,n),o}static fromEndpoint(i,n){e.Contracts.throwIfNull(i,"endpoint"),e.Contracts.throwIfNull(n,"subscriptionKey");const o=new c;return o.properties.setProperty(t.PropertyId.SpeechServiceConnection_Endpoint,i.href),o.properties.setProperty(t.PropertyId.SpeechServiceConnection_Key,n),o}};Xe.SpeechTranslationConfig=s;class c extends s{constructor(){super(),this.privSpeechProperties=new t.PropertyCollection,this.outputFormat=t.OutputFormat.Simple}set authorizationToken(i){e.Contracts.throwIfNullOrWhitespace(i,"value"),this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,i)}set speechRecognitionLanguage(i){e.Contracts.throwIfNullOrWhitespace(i,"value"),this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,i)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return t.OutputFormat[this.privSpeechProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(i){this.privSpeechProperties.setProperty(r.OutputFormatPropertyName,t.OutputFormat[i])}get endpointId(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(i){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_EndpointId,i)}addTargetLanguage(i){e.Contracts.throwIfNullOrWhitespace(i,"value");const n=this.targetLanguages;n.includes(i)||(n.push(i),this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(i){e.Contracts.throwIfNullOrWhitespace(i,"value"),this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_TranslationVoice,i)}get region(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_Region)}setProxy(i,n,o,u){this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyHostName],i),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyPort],n),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyUserName],o),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(i,n){return this.privSpeechProperties.getProperty(i,n)}setProperty(i,n){this.privSpeechProperties.setProperty(i,n)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(i,n){const o=JSON.parse(this.privSpeechProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));o[i]=n,this.privSpeechProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(o))}setProfanity(i){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceResponse_ProfanityOption,t.ProfanityOption[i])}enableAudioLogging(){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(r.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(i){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthLanguage,i)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(i){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthVoice,i)}get speechSynthesisOutputFormat(){return t.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(i){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthOutputFormat,t.SpeechSynthesisOutputFormat[i])}}return Xe.SpeechTranslationConfigImpl=c,Xe}var Wt={},ha;function dp(){if(ha)return Wt;ha=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.PropertyCollection=void 0;const r=E();let e=class lp{constructor(){this.privKeys=[],this.privValues=[]}getProperty(s,c){let a;typeof s=="string"?a=s:a=r.PropertyId[s];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===a)return this.privValues[i];if(c!==void 0)return String(c)}setProperty(s,c){let a;typeof s=="string"?a=s:a=r.PropertyId[s];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===a){this.privValues[i]=c;return}this.privKeys.push(a),this.privValues.push(c)}clone(){const s=new lp;for(let c=0;c<this.privKeys.length;c++)s.privKeys.push(this.privKeys[c]),s.privValues.push(this.privValues[c]);return s}mergeTo(s){this.privKeys.forEach(c=>{if(s.getProperty(c,void 0)===void 0){const a=this.getProperty(c);s.setProperty(c,a)}})}get keys(){return this.privKeys}};return Wt.PropertyCollection=e,Wt}var Ni={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=67]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(r.PropertyId||(r.PropertyId={}))})(Ni);var Kt={},va;function Vy(){if(va)return Kt;va=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.Recognizer=void 0;const r=b(),e=M(),t=z,s=E();let c=class hp{constructor(i,n,o){this.audioConfig=i!==void 0?i:s.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=n.clone(),this.privConnectionFactory=o,this.implCommonRecognizerSetup()}close(i,n){t.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),i,n)}get internalData(){return this.privReco}async dispose(i){this.privDisposed||(this.privDisposed=!0,i&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return r.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(i){r.ServiceRecognizerBase.telemetryDataEnabled=i}implCommonRecognizerSetup(){let i=typeof window<"u"?"Browser":"Node",n="unknown",o="unknown";typeof navigator<"u"&&(i=i+"/"+navigator.platform,n=navigator.userAgent,o=navigator.appVersion);const u=this.createRecognizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(i,n,o))));this.privReco=this.createServiceRecognizer(hp.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(i){t.Contracts.throwIfDisposed(this.privDisposed);const n=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(i,n.resolve,n.reject);const o=await n.promise;return await this.implRecognizerStop(),o}async startContinuousRecognitionAsyncImpl(i){t.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(i,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){t.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(i){const n=i.getProperty(s.PropertyId.SpeechServiceConnection_Key,void 0);return n&&n!==""?new r.CognitiveSubscriptionKeyAuthentication(n):new r.CognitiveTokenAuthentication(()=>{const u=i.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=i.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return Kt.Recognizer=c,Kt}var Jt={},fa;function Uy(){if(fa)return Jt;fa=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.SpeechRecognizer=void 0;const r=b(),e=M(),t=z,s=E();let c=class vp extends s.Recognizer{constructor(i,n){const o=i;t.Contracts.throwIfNull(o,"speechConfig"),t.Contracts.throwIfNullOrWhitespace(o.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,o.properties,new r.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(i,n,o){const u=i;return n.properties.mergeTo(u.properties),new vp(i,o)}get endpointId(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){t.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,i)}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple])===s.OutputFormat[s.OutputFormat.Simple]?s.OutputFormat.Simple:s.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(i,n){e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),i,n)}startContinuousRecognitionAsync(i,n){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),i,n)}stopContinuousRecognitionAsync(i,n){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),i,n)}startKeywordRecognitionAsync(i,n,o){t.Contracts.throwIfNull(i,"model"),o&&o("Not yet implemented.")}stopKeywordRecognitionAsync(i){i&&i()}close(i,n){t.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),i,n)}async dispose(i){this.privDisposedRecognizer||(i&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(i))}createRecognizerConfig(i){return new r.RecognizerConfig(i,this.privProperties)}createServiceRecognizer(i,n,o,u){const p=o;return new r.SpeechServiceRecognizer(i,n,p,u,this)}};return Jt.SpeechRecognizer=c,Jt}var Gt={},ga;function Hy(){if(ga)return Gt;ga=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.IntentRecognizer=void 0;const r=b(),e=M(),t=z,s=E();let c=class extends s.Recognizer{constructor(i,n){t.Contracts.throwIfNullOrUndefined(i,"speechConfig");const o=i;t.Contracts.throwIfNullOrUndefined(o,"speechConfig"),super(n,o.properties,new r.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=o.properties,t.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,i)}get properties(){return this.privProperties}recognizeOnceAsync(i,n){if(t.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const o=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",o.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(o.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),i,n)}startContinuousRecognitionAsync(i,n){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const o=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",o.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(o.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),i,n)}stopContinuousRecognitionAsync(i,n){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),i,n)}startKeywordRecognitionAsync(i,n,o){t.Contracts.throwIfNull(i,"model"),o&&o("Not yet implemented.")}stopKeywordRecognitionAsync(i,n){if(i)try{i()}catch(o){n&&n(o)}}addIntent(i,n){t.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),t.Contracts.throwIfNullOrWhitespace(n,"intentId"),t.Contracts.throwIfNullOrWhitespace(i,"simplePhrase"),this.privAddedIntents.push([n,i])}addIntentWithLanguageModel(i,n,o){t.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),t.Contracts.throwIfNullOrWhitespace(i,"intentId"),t.Contracts.throwIfNull(n,"model");const u=n;t.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[i]=new r.AddedLmIntent(u,o)}addAllIntents(i,n){t.Contracts.throwIfNull(i,"model");const o=i;t.Contracts.throwIfNullOrWhitespace(o.appId,"model.appId"),this.privUmbrellaIntent=new r.AddedLmIntent(o,n)}close(i,n){t.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),i,n)}createRecognizerConfig(i){return new r.RecognizerConfig(i,this.privProperties)}createServiceRecognizer(i,n,o,u){const p=o;return new r.IntentServiceRecognizer(i,n,p,u,this)}async dispose(i){this.privDisposedIntentRecognizer||i&&(this.privDisposedIntentRecognizer=!0,await super.dispose(i))}buildSpeechContext(){let i,n,o;const u=[];this.privUmbrellaIntent!==void 0&&(i=this.privUmbrellaIntent.modelImpl.appId,n=this.privUmbrellaIntent.modelImpl.region,o=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const p of Object.keys(this.privAddedLmIntents)){const l=this.privAddedLmIntents[p];if(i===void 0)i=l.modelImpl.appId;else if(i!==l.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(n===void 0)n=l.modelImpl.region;else if(n!==l.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(o===void 0)o=l.modelImpl.subscriptionKey;else if(o!==l.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+i+"-PRODUCTION#"+p;u.push(d)}return{Intent:{id:i,key:o===void 0?this.privProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key]):o,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+i+"-PRODUCTION"]}}};return Gt.IntentRecognizer=c,Gt}var fp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(r.VoiceProfileType||(r.VoiceProfileType={}))})(fp);var Qt={},Xt={},Ze={},ma;function gp(){if(ma)return Ze;ma=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.ConnectionMessageImpl=Ze.ConnectionMessage=void 0;const r=ne,e=M(),t=dp(),s=Ni;let c=class{};Ze.ConnectionMessage=c;class a{constructor(n){this.privConnectionMessage=n,this.privProperties=new t.PropertyCollection,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]&&this.privProperties.setProperty(s.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(o=>{this.privProperties.setProperty(o,this.privConnectionMessage.headers[o])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(n=>n.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Ze.ConnectionMessageImpl=a,Ze}var Sa;function mp(){if(Sa)return Xt;Sa=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.Connection=void 0;const r=b(),e=M(),t=gp(),s=z,c=E();let a=class Ws{static fromRecognizer(n){const o=n.internalData,u=new Ws;return u.privInternalData=o,u.setupEvents(),u}static fromSynthesizer(n){const o=n.internalData,u=new Ws;return u.privInternalData=o,u.setupEvents(),u}openConnection(n,o){e.marshalPromiseToCallbacks(this.privInternalData.connect(),n,o)}closeConnection(n,o){if(this.privInternalData instanceof r.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");e.marshalPromiseToCallbacks(this.privInternalData.disconnect(),n,o)}setMessageProperty(n,o,u){if(s.Contracts.throwIfNullOrWhitespace(o,"propertyName"),this.privInternalData instanceof r.ServiceRecognizerBase){if(n.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(o,u)}else if(this.privInternalData instanceof r.SynthesisAdapterBase){if(n.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(o,u)}}sendMessageAsync(n,o,u,p){e.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(n,o),u,p)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(n=>{n.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new c.ConnectionEventArgs(n.connectionId)):n.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new c.ConnectionEventArgs(n.connectionId)):n.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new c.ConnectionMessageEventArgs(new t.ConnectionMessageImpl(n.message))):n.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new c.ConnectionMessageEventArgs(new t.ConnectionMessageImpl(n.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(n=>{this.receivedServiceMessage&&this.receivedServiceMessage(new c.ServiceEventArgs(n.jsonString,n.name))})}};return Xt.Connection=a,Xt}var Ca;function Wy(){if(Ca)return Qt;Ca=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.TranslationRecognizer=void 0;const r=b(),e=M(),t=mp(),s=z,c=E();let a=class Sp extends c.Recognizer{constructor(n,o,u){const p=n;s.Contracts.throwIfNull(p,"speechConfig"),super(o,p.properties,u||new r.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationVoice),c.PropertyId[c.PropertyId.SpeechServiceConnection_TranslationVoice]),s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages),c.PropertyId[c.PropertyId.SpeechServiceConnection_TranslationToLanguages]),s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage),c.PropertyId[c.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(n,o,u){const p=n;return o.properties.mergeTo(p.properties),new Sp(n,u)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,n)}recognizeOnceAsync(n,o){s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),n,o)}startContinuousRecognitionAsync(n,o){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),n,o)}stopContinuousRecognitionAsync(n,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),n,o)}removeTargetLanguage(n){if(s.Contracts.throwIfNullOrUndefined(n,"language to be removed"),this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const o=this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=o.indexOf(n);u>-1&&(o.splice(u,1),this.properties.setProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")),this.updateLanguages(o))}}addTargetLanguage(n){s.Contracts.throwIfNullOrUndefined(n,"language to be added");let o=[];this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(o=this.properties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),o.includes(n)||(o.push(n),this.properties.setProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")))):(this.properties.setProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages,n),o=[n]),this.updateLanguages(o)}close(n,o){s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),n,o)}onConnection(){}async dispose(n){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,n&&(await this.implRecognizerStop(),await super.dispose(n)))}createRecognizerConfig(n){return new r.RecognizerConfig(n,this.privProperties)}createServiceRecognizer(n,o,u,p){const l=u;return new r.TranslationServiceRecognizer(n,o,l,p,this)}updateLanguages(n){const o=t.Connection.fromRecognizer(this);o&&(o.setMessageProperty("speech.context","translationcontext",{to:n}),o.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:n})))}};return Qt.TranslationRecognizer=a,Qt}var Zt={},ya;function Ky(){if(ya)return Zt;ya=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.Translations=void 0;const r=E();let e=class{constructor(){this.privMap=new r.PropertyCollection}get languages(){return this.privMap.keys}get(s,c){return this.privMap.getProperty(s,c)}set(s,c){this.privMap.setProperty(s,c)}};return Zt.Translations=e,Zt}var Cp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(r.NoMatchReason||(r.NoMatchReason={}))})(Cp);var Yt={},Pa;function Jy(){if(Pa)return Yt;Pa=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.NoMatchDetails=void 0;const r=b(),e=E();let t=class yp{constructor(c){this.privReason=c}static fromResult(c){const a=r.SimpleSpeechPhrase.fromJSON(c.json);let i=e.NoMatchReason.NotRecognized;switch(a.RecognitionStatus){case r.RecognitionStatus.BabbleTimeout:i=e.NoMatchReason.InitialBabbleTimeout;break;case r.RecognitionStatus.InitialSilenceTimeout:i=e.NoMatchReason.InitialSilenceTimeout;break;default:i=e.NoMatchReason.NotRecognized;break}return new yp(i)}get reason(){return this.privReason}};return Yt.NoMatchDetails=t,Yt}var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.TranslationRecognitionCanceledEventArgs=void 0;class Gy{constructor(e,t,s,c,a){this.privCancelReason=t,this.privErrorDetails=s,this.privResult=a,this.privSessionId=e,this.privErrorCode=c}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}zi.TranslationRecognitionCanceledEventArgs=Gy;var er={},Ra;function Qy(){if(Ra)return er;Ra=1,Object.defineProperty(er,"__esModule",{value:!0}),er.IntentRecognitionCanceledEventArgs=void 0;const r=E();let e=class extends r.IntentRecognitionEventArgs{constructor(s,c,a,i,n,o){super(i,n,o),this.privReason=s,this.privErrorDetails=c,this.privErrorCode=a}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return er.IntentRecognitionCanceledEventArgs=e,er}var An={};Object.defineProperty(An,"__esModule",{value:!0});An.CancellationDetailsBase=void 0;class Xy{constructor(e,t,s){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=s}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}An.CancellationDetailsBase=Xy;var tr={},_a;function Zy(){if(_a)return tr;_a=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.CancellationDetails=void 0;const r=b(),e=An,t=E();let s=class Pp extends e.CancellationDetailsBase{constructor(a,i,n){super(a,i,n)}static fromResult(a){let i=t.CancellationReason.Error,n=t.CancellationErrorCode.NoError;if(a instanceof t.RecognitionResult&&a.json){const o=r.SimpleSpeechPhrase.fromJSON(a.json);i=r.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus)}return a.properties&&(n=t.CancellationErrorCode[a.properties.getProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new Pp(i,a.errorDetails||r.EnumTranslation.implTranslateErrorDetails(n),n)}};return tr.CancellationDetails=s,tr}var Rp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(r.CancellationErrorCode||(r.CancellationErrorCode={}))})(Rp);var rr={},Ea;function Yy(){if(Ea)return rr;Ea=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.ConnectionEventArgs=void 0;const r=E();let e=class extends r.SessionEventArgs{};return rr.ConnectionEventArgs=e,rr}var nr={},Ia;function eP(){if(Ia)return nr;Ia=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.ServiceEventArgs=void 0;const r=E();let e=class extends r.SessionEventArgs{constructor(s,c,a){super(a),this.privJsonResult=s,this.privEventName=c}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return nr.ServiceEventArgs=e,nr}var Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.PhraseListGrammar=void 0;class po{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new po(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}Li.PhraseListGrammar=po;var Ye={},Ta;function lo(){if(Ta)return Ye;Ta=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.DialogServiceConfigImpl=Ye.DialogServiceConfig=void 0;const r=z,e=E();let t=class{constructor(){}set applicationId(a){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};Ye.DialogServiceConfig=t;class s extends t{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(a){r.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechConfig.speechRecognitionLanguage=a}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(a){this.privSpeechConfig.outputFormat=a}setProperty(a,i){this.privSpeechConfig.setProperty(a,i)}getProperty(a,i){return this.privSpeechConfig.getProperty(a)}setProxy(a,i,n,o){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,a),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${i}`),n&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,n),o&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,o)}setServiceProperty(a,i,n){this.privSpeechConfig.setServiceProperty(a,i)}close(){}}return Ye.DialogServiceConfigImpl=s,Ye}var ir={},ba;function tP(){if(ba)return ir;ba=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.BotFrameworkConfig=void 0;const r=z,e=lo(),t=E();let s=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(a,i,n){r.Contracts.throwIfNullOrWhitespace(a,"subscription"),r.Contracts.throwIfNullOrWhitespace(i,"region");const o=new e.DialogServiceConfigImpl;return o.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(t.PropertyId.SpeechServiceConnection_Key,a),o.setProperty(t.PropertyId.SpeechServiceConnection_Region,i),n&&o.setProperty(t.PropertyId.Conversation_ApplicationId,n),o}static fromAuthorizationToken(a,i,n){r.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(i,"region");const o=new e.DialogServiceConfigImpl;return o.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,a),o.setProperty(t.PropertyId.SpeechServiceConnection_Region,i),n&&o.setProperty(t.PropertyId.Conversation_ApplicationId,n),o}static fromHost(a,i,n){r.Contracts.throwIfNullOrUndefined(a,"host");const o=a instanceof URL?a:new URL(`wss://${a}.convai.speech.azure.us`);r.Contracts.throwIfNullOrUndefined(o,"resolvedHost");const u=new e.DialogServiceConfigImpl;return u.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(t.PropertyId.SpeechServiceConnection_Host,o.toString()),i!==void 0&&u.setProperty(t.PropertyId.SpeechServiceConnection_Key,i),u}static fromEndpoint(a,i){r.Contracts.throwIfNull(a,"endpoint");const n=new e.DialogServiceConfigImpl;return n.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(t.PropertyId.SpeechServiceConnection_Endpoint,a.toString()),i!==void 0&&n.setProperty(t.PropertyId.SpeechServiceConnection_Key,i),n}};return ir.BotFrameworkConfig=s,ir}var sr={},wa;function rP(){if(wa)return sr;wa=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.CustomCommandsConfig=void 0;const r=z,e=lo(),t=E();let s=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(a,i,n){r.Contracts.throwIfNullOrWhitespace(a,"applicationId"),r.Contracts.throwIfNullOrWhitespace(i,"subscription"),r.Contracts.throwIfNullOrWhitespace(n,"region");const o=new e.DialogServiceConfigImpl;return o.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),o.setProperty(t.PropertyId.Conversation_ApplicationId,a),o.setProperty(t.PropertyId.SpeechServiceConnection_Key,i),o.setProperty(t.PropertyId.SpeechServiceConnection_Region,n),o}static fromAuthorizationToken(a,i,n){r.Contracts.throwIfNullOrWhitespace(a,"applicationId"),r.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(n,"region");const o=new e.DialogServiceConfigImpl;return o.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),o.setProperty(t.PropertyId.Conversation_ApplicationId,a),o.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,i),o.setProperty(t.PropertyId.SpeechServiceConnection_Region,n),o}set applicationId(a){r.Contracts.throwIfNullOrWhitespace(a,"value"),this.setProperty(t.PropertyId.Conversation_ApplicationId,a)}get applicationId(){return this.getProperty(t.PropertyId.Conversation_ApplicationId)}};return sr.CustomCommandsConfig=s,sr}var or={},ar={},cr={},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.QueryParameterNames=void 0;class Z{}Ae.QueryParameterNames=Z;Z.BotId="botid";Z.CustomSpeechDeploymentId="cid";Z.CustomVoiceDeploymentId="deploymentId";Z.EnableAudioLogging="storeAudio";Z.EnableLanguageId="lidEnabled";Z.EnableWordLevelTimestamps="wordLevelTimestamps";Z.EndSilenceTimeoutMs="endSilenceTimeoutMs";Z.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";Z.Format="format";Z.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";Z.Language="language";Z.Profanity="profanity";Z.RequestBotStatusMessages="enableBotMessageStatus";Z.StableIntermediateThreshold="stableIntermediateThreshold";Z.StableTranslation="stableTranslation";Z.TestHooks="testhooks";Z.Postprocessing="postprocessing";Z.CtsMeetingId="meetingId";Z.CtsDeviceId="deviceId";Z.CtsIsParticipant="isParticipant";Z.EnableAvatar="enableTalkingAvatar";var Aa;function ke(){if(Aa)return cr;Aa=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.ConnectionFactoryBase=void 0;const r=b(),e=E(),t=Ae;let s=class{static getHostSuffix(a){if(a){if(a.toLowerCase().startsWith("china"))return".azure.cn";if(a.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(a,i,n){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,t.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,t.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,t.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,t.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,t.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,t.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,t.QueryParameterNames.EnableWordLevelTimestamps],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,t.QueryParameterNames.StableIntermediateThreshold]]).forEach((p,l)=>{this.setUrlParameter(l,p,a,i,n)});const u=JSON.parse(a.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(p=>{i[p]=u[p]})}setUrlParameter(a,i,n,o,u){const p=n.parameters.getProperty(a,void 0);p&&(!u||u.search(i)===-1)&&(o[i]=p.toLocaleLowerCase())}};return cr.ConnectionFactoryBase=s,cr}var ka;function nP(){if(ka)return ar;ka=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.DialogConnectionFactory=void 0;const r=ie(),e=b(),t=E(),s=ke(),c=b(),a=ne,i=Ae;class n extends s.ConnectionFactoryBase{create(u,p,l){const d=u.parameters.getProperty(t.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(t.PropertyId.Conversation_DialogType),v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),g=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),f=u.parameters.getProperty(t.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),S={};S[a.HeaderNames.ConnectionId]=l,S[i.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple]).toLowerCase(),S[i.QueryParameterNames.Language]=g,S[i.QueryParameterNames.RequestBotStatusMessages]=f,d&&(S[i.QueryParameterNames.BotId]=d,h===t.DialogServiceConfig.DialogTypes.CustomCommands&&(S[a.HeaderNames.CustomCommandsAppId]=d));const I=h===t.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",k=h===t.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===t.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",L={};p.token!=null&&p.token!==""&&(L[p.headerName]=p.token);let B=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,"");if(!B){const ee=s.ConnectionFactoryBase.getHostSuffix(v),W=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${v}.${n.BaseUrl}${ee}`);B=`${W.endsWith("/")?W:W+"/"}${I}${n.ApiKey}/${k}`}this.setCommonUrlParams(u,S,B);const U=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(B,S,L,new c.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),U,l)}}return ar.DialogConnectionFactory=n,n.ApiKey="api",n.BaseUrl="convai.speech",ar}var Ma;function iP(){if(Ma)return or;Ma=1,Object.defineProperty(or,"__esModule",{value:!0}),or.DialogServiceConnector=void 0;const r=nP(),e=b(),t=M(),s=z,c=E(),a=Ni;let i=class extends c.Recognizer{constructor(o,u){const p=o;s.Contracts.throwIfNull(o,"dialogConfig"),super(u,p.properties,new r.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=p.properties.clone();const l=this.buildAgentConfig();this.privReco.agentConfig.set(l)}connect(o,u){t.marshalPromiseToCallbacks(this.privReco.connect(),o,u)}disconnect(o,u){t.marshalPromiseToCallbacks(this.privReco.disconnect(),o,u)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){s.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(o){this.properties.setProperty(a.PropertyId.Conversation_Speech_Activity_Template,o)}listenOnceAsync(o,u){if(this.isTurnComplete){s.Contracts.throwIfDisposed(this.privIsDisposed);const l=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new t.Deferred;await this.privReco.recognize(e.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();l.catch(()=>{this.dispose(!0).catch(()=>{})}),t.marshalPromiseToCallbacks(l.finally(()=>{this.isTurnComplete=!0}),o,u)}}sendActivityAsync(o,u,p){t.marshalPromiseToCallbacks(this.privReco.sendMessage(o),u,p)}close(o,u){s.Contracts.throwIfDisposed(this.privIsDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),o,u)}async dispose(o){this.privIsDisposed||o&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(o))}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,u,p,l){const d=p;return new e.DialogServiceAdapter(o,u,d,l,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(a.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(a.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(a.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return or.DialogServiceConnector=i,or}var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.ActivityReceivedEventArgs=void 0;class sP{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}ji.ActivityReceivedEventArgs=sP;var Bi={},$i={};Object.defineProperty($i,"__esModule",{value:!0});$i.TurnStatusResponsePayload=void 0;class ho{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new ho(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}$i.TurnStatusResponsePayload=ho;Object.defineProperty(Bi,"__esModule",{value:!0});Bi.TurnStatusReceivedEventArgs=void 0;const oP=$i;class aP{constructor(e){this.privTurnStatus=oP.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}Bi.TurnStatusReceivedEventArgs=aP;var _p={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(r.ServicePropertyChannel||(r.ServicePropertyChannel={}))})(_p);var Ep={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(r.ProfanityOption||(r.ProfanityOption={}))})(Ep);var ur={},Oa;function cP(){if(Oa)return ur;Oa=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.BaseAudioPlayer=void 0;const r=ae,e=E(),t=Je;let s=class{constructor(a){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,a===void 0&&(a=e.AudioStreamFormat.getDefaultInputFormat()),this.init(a)}playAudioSample(a,i,n){try{this.ensureInitializedContext();const o=this.formatAudioData(a),u=new Float32Array(this.samples.length+o.length);u.set(this.samples,0),u.set(o,this.samples.length),this.samples=u,i&&i()}catch(o){n&&n(o)}}stopAudio(a,i){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{a&&a()},n=>{i&&i(n)}),this.audioContext=null)}init(a){this.audioFormat=a,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const a=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},a)}}createAudioContext(){this.audioContext=t.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(a){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(a),128);case 16:return this.formatArrayBuffer(new Int16Array(a),32768);case 32:return this.formatArrayBuffer(new Int32Array(a),2147483648);default:throw new r.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(a,i){const n=new Float32Array(a.length);for(let o=0;o<a.length;o++)n[o]=a[o]/i;return n}updateAudioBuffer(){if(this.samples.length===0)return;const a=this.audioFormat.channels,i=this.audioContext.createBufferSource(),n=this.samples.length/a,o=this.audioContext.createBuffer(a,n,this.audioFormat.samplesPerSec);for(let u=0;u<a;u++){let p=u;const l=o.getChannelData(u);for(let d=0;d<this.samples.length;d++,p+=a)l[d]=this.samples[p]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),i.buffer=o,i.connect(this.gainNode),i.start(this.startTime),this.startTime+=o.duration,this.samples=new Float32Array}async playAudio(a){this.audioContext===null&&this.createAudioContext();const i=this.audioContext.createBufferSource(),n=this.audioContext.destination;await this.audioContext.decodeAudioData(a,o=>{i.buffer=o,i.connect(n),i.start(0)})}};return ur.BaseAudioPlayer=s,ur}var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.ConnectionMessageEventArgs=void 0;class uP{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}qi.ConnectionMessageEventArgs=uP;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.VoiceProfile=void 0;class pP{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}}Fi.VoiceProfile=pP;var et={},Da;function lP(){if(Da)return et;Da=1,Object.defineProperty(et,"__esModule",{value:!0}),et.VoiceProfileEnrollmentCancellationDetails=et.VoiceProfileEnrollmentResult=void 0;const r=b(),e=E();let t=class Ks{constructor(a,i,n){this.privReason=a,this.privProperties=new e.PropertyCollection,this.privReason!==e.ResultReason.Canceled?i&&(this.privDetails=JSON.parse(i),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=e.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=n,this.privProperties.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(a){const i=[];for(const n of a.value){const o=n.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:n.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Ks(o,null,null);u.privDetails=this.getIdentificationDetails(n),i.push(u)}return i}static FromVerificationProfileList(a){const i=[];for(const n of a.value){const o=n.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:n.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Ks(o,null,null);u.privDetails=this.getVerificationDetails(n),i.push(u)}return i}static getIdentificationDetails(a){return{audioLength:a.audioLength?parseFloat(a.audioLength):0,audioSpeechLength:a.audioSpeechLength?parseFloat(a.audioSpeechLength):0,enrollmentStatus:a.enrollmentStatus,enrollmentsCount:a.enrollmentsCount||0,enrollmentsLength:a.enrollmentsLength?parseFloat(a.enrollmentsLength):0,enrollmentsSpeechLength:a.enrollmentsSpeechLength?parseFloat(a.enrollmentsSpeechLength):0,profileId:a.profileId||a.identificationProfileId,remainingEnrollmentsSpeechLength:a.remainingEnrollmentsSpeechLength?parseFloat(a.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(a){return{audioLength:a.audioLength?parseFloat(a.audioLength):0,audioSpeechLength:a.audioSpeechLength?parseFloat(a.audioSpeechLength):0,enrollmentStatus:a.enrollmentStatus,enrollmentsCount:a.enrollmentsCount,enrollmentsLength:a.enrollmentsLength?parseFloat(a.enrollmentsLength):0,enrollmentsSpeechLength:a.enrollmentsSpeechLength?parseFloat(a.enrollmentsSpeechLength):0,profileId:a.profileId||a.verificationProfileId,remainingEnrollmentsCount:a.remainingEnrollments||a.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:a.remainingEnrollmentsSpeechLength?parseFloat(a.remainingEnrollmentsSpeechLength):0}}};et.VoiceProfileEnrollmentResult=t;class s extends e.CancellationDetailsBase{constructor(a,i,n){super(a,i,n)}static fromResult(a){const i=e.CancellationReason.Error;let n=e.CancellationErrorCode.NoError;return a.properties&&(n=e.CancellationErrorCode[a.properties.getProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.NoError])]),new s(i,a.errorDetails,n)}}return et.VoiceProfileEnrollmentCancellationDetails=s,et}var tt={},Na;function dP(){if(Na)return tt;Na=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.VoiceProfileCancellationDetails=tt.VoiceProfileResult=void 0;const r=b(),e=z,t=E();let s=class{constructor(i,n){this.privReason=i,this.privProperties=new t.PropertyCollection,i===t.ResultReason.Canceled&&(e.Contracts.throwIfNullOrUndefined(n,"statusText"),this.privErrorDetails=n,this.privProperties.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};tt.VoiceProfileResult=s;class c extends t.CancellationDetailsBase{constructor(i,n,o){super(i,n,o)}static fromResult(i){const n=t.CancellationReason.Error;let o=t.CancellationErrorCode.NoError;return i.properties&&(o=t.CancellationErrorCode[i.properties.getProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new c(n,i.errorDetails,o)}}return tt.VoiceProfileCancellationDetails=c,tt}var pr={},za;function hP(){if(za)return pr;za=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.VoiceProfilePhraseResult=void 0;const r=z,e=E();let t=class extends e.VoiceProfileResult{constructor(c,a,i,n){super(c,a),this.privPhrases=[],r.Contracts.throwIfNullOrUndefined(n,"phrase array"),this.privType=i,n&&n[0]&&(this.privPhrases=n)}get phrases(){return this.privPhrases}get type(){return this.privType}};return pr.VoiceProfilePhraseResult=t,pr}var lr={},La;function vP(){if(La)return lr;La=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.VoiceProfileClient=void 0;const r=b(),e=ip(),t=z,s=E();let c=class extends s.Recognizer{constructor(i){t.Contracts.throwIfNullOrUndefined(i,"speechConfig");const n=i;t.Contracts.throwIfNull(n,"speechConfig"),super(e.AudioConfig.fromStreamInput(s.AudioInputStream.createPushStream()),n.properties,new r.VoiceProfileConnectionFactory),this.privProperties=n.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){t.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,i)}async createProfileAsync(i,n){const o=await this.privVoiceAdapter.createProfile(i,n);return new s.VoiceProfile(o[0],i)}async retrieveEnrollmentResultAsync(i){return this.privVoiceAdapter.retrieveEnrollmentResult(i)}async getAllProfilesAsync(i){return this.privVoiceAdapter.getAllProfiles(i)}async getActivationPhrasesAsync(i,n){return this.privVoiceAdapter.getActivationPhrases(i,n)}async enrollProfileAsync(i,n){const o=n;return t.Contracts.throwIfNullOrUndefined(o,"audioConfig"),this.audioConfig=n,this.privVoiceAdapter.SpeakerAudioSource=o,this.privVoiceAdapter.enrollProfile(i)}async deleteProfileAsync(i){return this.privVoiceAdapter.deleteProfile(i)}async resetProfileAsync(i){return this.privVoiceAdapter.resetProfile(i)}async close(){await this.dispose(!0)}createServiceRecognizer(i,n,o,u){const p=o;return new r.VoiceServiceRecognizer(i,n,p,u,this)}async dispose(i){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,i&&await super.dispose(i))}createRecognizerConfig(i){return new r.RecognizerConfig(i,this.properties)}getResult(i,n){return new s.VoiceProfileResult(i.ok?n:s.ResultReason.Canceled,i.statusText)}};return lr.VoiceProfileClient=c,lr}var dr={},ja;function fP(){if(ja)return dr;ja=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.SpeakerRecognizer=void 0;const r=b(),e=z,t=E();let s=class extends t.Recognizer{constructor(a,i){e.Contracts.throwIfNullOrUndefined(a,"speechConfig");const n=a;e.Contracts.throwIfNullOrUndefined(n,"speechConfig"),super(i,n.properties,new r.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=i,e.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=n.properties}get authorizationToken(){return this.properties.getProperty(t.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}async recognizeOnceAsync(a){return e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(a)}async close(){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(a){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const i=await this.privReco.recognizeSpeaker(a);return await this.implRecognizerStop(),i}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(a){return new r.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,i,n,o){const u=n;return new r.SpeakerServiceRecognizer(a,i,u,o,this)}async dispose(a){this.privDisposedSpeakerRecognizer||a&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(a))}};return dr.SpeakerRecognizer=s,dr}var hr={},Ba;function gP(){if(Ba)return hr;Ba=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.SpeakerIdentificationModel=void 0;const r=z,e=E();let t=class Ip{constructor(c){if(this.privVoiceProfiles=[],this.privProfileIds=[],r.Contracts.throwIfNullOrUndefined(c,"VoiceProfiles"),c.length===0)throw new Error("Empty Voice Profiles array");for(const a of c){if(a.profileType!==e.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+a.profileId);this.privVoiceProfiles.push(a),this.privProfileIds.push(a.profileId)}}static fromProfiles(c){return new Ip(c)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return hr.SpeakerIdentificationModel=t,hr}var vr={},$a;function mP(){if($a)return vr;$a=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.SpeakerVerificationModel=void 0;const r=z,e=E();let t=class Tp{constructor(c){if(r.Contracts.throwIfNullOrUndefined(c,"VoiceProfile"),c.profileType===e.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=c}static fromProfile(c){return new Tp(c)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===e.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return vr.SpeakerVerificationModel=t,vr}var fr={},vo={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(r.LanguageIdMode||(r.LanguageIdMode={}))})(vo);var qa;function SP(){if(qa)return fr;qa=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.AutoDetectSourceLanguageConfig=void 0;const r=b(),e=z,t=E(),s=vo;let c=class Vn{constructor(){this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=s.LanguageIdMode.AtStart}static fromOpenRange(){const i=new Vn;return i.properties.setProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.AutoDetectSourceLanguagesOpenRangeOptionName),i}static fromLanguages(i){e.Contracts.throwIfArrayEmptyOrWhitespace(i,"languages");const n=new Vn;return n.properties.setProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,i.join()),n}static fromSourceLanguageConfigs(i){if(i.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const n=new Vn,o=[];return i.forEach(u=>{if(o.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const p=u.language+t.PropertyId.SpeechServiceConnection_EndpointId.toString();n.properties.setProperty(p,u.endpointId)}}),n.properties.setProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,o.join()),n}get properties(){return this.privProperties}set mode(i){i===s.LanguageIdMode.Continuous?(this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=i}};return fr.AutoDetectSourceLanguageConfig=c,fr}var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.AutoDetectSourceLanguageResult=void 0;const Fa=z;class Wn{constructor(e,t){Fa.Contracts.throwIfNullOrUndefined(e,"language"),Fa.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new Wn(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new Wn(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}xi.AutoDetectSourceLanguageResult=Wn;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.SourceLanguageConfig=void 0;const CP=z;class fo{constructor(e,t){CP.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new fo(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}Vi.SourceLanguageConfig=fo;var Ms={},xa;function yP(){return xa||(xa=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeakerRecognitionCancellationDetails=r.SpeakerRecognitionResult=r.SpeakerRecognitionResultType=void 0;const e=b(),t=E();var s;(function(i){i[i.Verify=0]="Verify",i[i.Identify=1]="Identify"})(s=r.SpeakerRecognitionResultType||(r.SpeakerRecognitionResultType={}));class c{constructor(n,o=t.ResultReason.RecognizedSpeaker,u=t.CancellationErrorCode.NoError,p=""){this.privProperties=new t.PropertyCollection;const l=n.scenario==="TextIndependentIdentification"?s.Identify:s.Verify;this.privReason=o,this.privReason!==t.ResultReason.Canceled?l===s.Identify?(this.privProfileId=n.identificationResult.identifiedProfile.profileId,this.privScore=n.identificationResult.identifiedProfile.score,this.privReason=t.ResultReason.RecognizedSpeakers):(this.privScore=n.verificationResult.score,n.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=t.ResultReason.NoMatch),n.verificationResult.profileId!==void 0&&n.verificationResult.profileId!==""&&(this.privProfileId=n.verificationResult.profileId)):(this.privErrorDetails=p,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[u])),this.privProperties.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(n))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}r.SpeakerRecognitionResult=c;class a extends t.CancellationDetailsBase{constructor(n,o,u){super(n,o,u)}static fromResult(n){const o=t.CancellationReason.Error;let u=t.CancellationErrorCode.NoError;return n.properties&&(u=t.CancellationErrorCode[n.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new a(o,n.errorDetails,u)}}r.SpeakerRecognitionCancellationDetails=a}(Ms)),Ms}var Os={},rt={},Va;function bp(){if(Va)return rt;Va=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.ConversationImpl=rt.Conversation=void 0;const r=b(),e=M(),t=z,s=E();let c=class{constructor(){}static createConversationAsync(n,o,u,p){t.Contracts.throwIfNullOrUndefined(n,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrUndefined(n.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!n.subscriptionKey&&!n.getProperty(s.PropertyId[s.PropertyId.SpeechServiceAuthorization_Token])&&t.Contracts.throwIfNullOrUndefined(n.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let l,d,h;return typeof o=="string"?(l=new a(n,o),e.marshalPromiseToCallbacks((async()=>{})(),u,p)):(l=new a(n),d=o,h=u,l.createConversationAsync(()=>{d&&d()},v=>{h&&h(v)})),l}};rt.Conversation=c;class a extends c{constructor(n,o){if(super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=l=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,l)}catch{}},this.onDisconnected=l=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,l)}catch{}finally{this.close(!1)}},this.onCanceled=(l,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(l,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case r.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case r.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(l,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(l,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(l,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(l,d)=>{try{switch(d.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new s.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new s.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new s.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(l,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(s.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(l,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new s.PropertyCollection,this.privManager=new r.ConversationManager,n.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])||n.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=n.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),o)this.privConversationId=o;else{n.targetLanguages.length===0&&n.addTargetLanguage(this.privLanguage),n.getProperty(s.PropertyId[s.PropertyId.SpeechServiceResponse_ProfanityOption])||n.setProfanity(s.ProfanityOption.Masked);let d=n.getProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),t.Contracts.throwIfNullOrTooLong(d,"nickname",50),t.Contracts.throwIfNullOrTooShort(d,"nickname",2),n.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],d)}this.privConfig=n;const p=n;t.Contracts.throwIfNull(p,"speechConfig"),this.privProperties=p.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var n,o;return(n=this.privParticipants.me)!=null&&n.isHost?!1:(o=this.privParticipants.me)==null?void 0:o.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const n=this.conversationId,o=this.participants.map(l=>({id:l.id,preferredLanguage:l.preferredLanguage,voice:l.voice})),u={};for(const l of r.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(l,"");d!==""&&(u[l]=d)}return{id:n,participants:o,conversationProperties:u}}get canSend(){var n;return this.privIsConnected&&!((n=this.privParticipants.me)!=null&&n.isMuted)}get canSendAsHost(){var n;return this.privIsConnected&&((n=this.privParticipants.me)==null?void 0:n.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(n){t.Contracts.throwIfNullOrWhitespace(n,"authorizationToken"),this.privToken=n}set conversationTranslator(n){this.privConversationTranslator=n}onToken(n){this.privConversationTranslator.onToken(n)}createConversationAsync(n,o){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),o),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),o),this.privRoom=u,this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}startConversationAsync(n,o){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),o),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=r.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}addParticipantAsync(n,o,u){t.Contracts.throwIfNullOrUndefined(n,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(n),o,u)}joinConversationAsync(n,o,u,p,l){try{t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","conversationId")),t.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),t.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,n,d=>{t.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,p&&p(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,l)})}catch(d){this.handleError(d,l)}}deleteConversationAsync(n,o){e.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),n,o)}async deleteConversationImplAsync(){t.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),t.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(n,o){e.marshalPromiseToCallbacks(this.endConversationImplAsync(),n,o)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(n,o){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),o),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}muteAllParticipantsAsync(n,o){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),o),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}muteParticipantAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==n&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(n,!0),()=>{this.handleCallback(o,u)},l=>{this.handleError(l,u)})}catch(p){this.handleError(p,u)}}removeParticipantAsync(n,o,u){try{if(t.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&n.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(n),o,u);else{t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let p="";typeof n=="string"?p=n:n.hasOwnProperty("id")?p=n.id:n.hasOwnProperty("userId")&&(p=n.userId),t.Contracts.throwIfNullOrWhitespace(p,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===p)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(p),()=>{this.handleCallback(o,u)},d=>{this.handleError(d,u)})}}catch(p){this.handleError(p,u)}}unlockConversationAsync(n,o){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),o),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}unmuteAllParticipantsAsync(n,o){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),o),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}unmuteParticipantAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==n&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(n,!1),()=>{this.handleCallback(o,u)},l=>{this.handleError(l,u)})}catch(p){this.handleError(p,u)}}sendTextMessageAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","message")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),n.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(n),()=>{this.handleCallback(o,u)},p=>{this.handleError(p,u)})}catch(p){this.handleError(p,u)}}setTranslatedLanguagesAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfArrayEmptyOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","languages")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(n),()=>{this.handleCallback(o,u)},p=>{this.handleError(p,u)})}catch(p){this.handleError(p,u)}}changeNicknameAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(n),()=>{this.handleCallback(o,u)},p=>{this.handleError(p,u)})}catch(p){this.handleError(p,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(n){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await n.enforceAudioGating(),this.privTranscriberRecognizer=n,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const n=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:n,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(n){if(this.privParticipants.addOrUpdateParticipant(n)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[n],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(n){this.privParticipants.deleteParticipant(n.id);const o=this.conversationInfo;return o.participants=[n],this.privTranscriberRecognizer.pushConversationEvent(o,"leave")}async close(n){var o;try{this.privIsConnected=!1,await((o=this.privConversationRecognizer)==null?void 0:o.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}n&&this.dispose()}handleCallback(n,o){if(n){try{n()}catch(u){o&&o(u)}n=void 0}}handleError(n,o){if(o)if(n instanceof Error){const u=n;o(u.name+": "+u.message)}else o(n)}toParticipants(n){const o=this.privParticipants.participants.map(u=>this.toParticipant(u));return n?o:o.filter(u=>u.isHost===!1)}toParticipant(n){return new s.Participant(n.id,n.avatar,n.displayName,n.isHost,n.isMuted,n.isUsingTts,n.preferredLanguage,n.voice)}getMuteAllCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getMuteCommand(n,o){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),t.Contracts.throwIfNullOrWhitespace(n,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:n,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getLockCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getEjectCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),t.Contracts.throwIfNullOrWhitespace(n,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:n,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getChangeNicknameCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),t.Contracts.throwIfNullOrWhitespace(n,"nickname"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:n,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getMessageCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),t.Contracts.throwIfNullOrWhitespace(n,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:n,type:r.ConversationTranslatorMessageTypes.instantMessage})}}return rt.ConversationImpl=a,rt}var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.ConversationCommon=void 0;class PP{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(s){t&&t(s)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const s=e;t(s.name+": "+s.message)}else t(e)}}Ui.ConversationCommon=PP;var gr={},Ua;function RP(){if(Ua)return gr;Ua=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.ConversationExpirationEventArgs=void 0;const r=E();let e=class extends r.SessionEventArgs{constructor(s,c){super(c),this.privExpirationTime=s}get expirationTime(){return this.privExpirationTime}};return gr.ConversationExpirationEventArgs=e,gr}var mr={},Ha;function _P(){if(Ha)return mr;Ha=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.ConversationParticipantsChangedEventArgs=void 0;const r=E();let e=class extends r.SessionEventArgs{constructor(s,c,a){super(a),this.privReason=s,this.privParticipant=c}get reason(){return this.privReason}get participants(){return this.privParticipant}};return mr.ConversationParticipantsChangedEventArgs=e,mr}var Sr={},Wa;function EP(){if(Wa)return Sr;Wa=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.ConversationTranslationCanceledEventArgs=void 0;const r=wn();let e=class extends r.CancellationEventArgsBase{};return Sr.ConversationTranslationCanceledEventArgs=e,Sr}var Cr={},Ka;function IP(){if(Ka)return Cr;Ka=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.ConversationTranslationEventArgs=void 0;const r=E();let e=class extends r.RecognitionEventArgs{constructor(s,c,a){super(c,a),this.privResult=s}get result(){return this.privResult}};return Cr.ConversationTranslationEventArgs=e,Cr}var yr={},Ja;function TP(){if(Ja)return yr;Ja=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.ConversationTranslationResult=void 0;const r=up();let e=class extends r.TranslationRecognitionResult{constructor(s,c,a,i,n,o,u,p,l,d,h){super(c,i,n,o,u,p,void 0,void 0,l,d,h),this.privId=s,this.privOrigLang=a}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return yr.ConversationTranslationResult=e,yr}var Ds={},Pr={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.StringUtils=void 0;class bP{static formatString(e,t){if(!e)return"";if(!t)return e;let s="",c="";const a=o=>{s+=o},i=o=>{c+=o};let n=a;for(let o=0;o<e.length;o++){const u=e[o],p=o+1<e.length?e[o+1]:"";switch(u){case"{":p==="{"?(n("{"),o++):n=i;break;case"}":p==="}"?(n("}"),o++):(t.hasOwnProperty(c)&&(s+=t[c]),n=a,c="");break;default:n(u);break}}return s}}kn.StringUtils=bP;var Ga;function wP(){if(Ga)return Pr;Ga=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.ConversationTranslatorConnectionFactory=void 0;const r=ie(),e=kn,t=z,s=E(),c=ne,a=Ae,i=ke(),n=b();let o=class wp extends i.ConnectionFactoryBase{constructor(p){super(),t.Contracts.throwIfNullOrUndefined(p,"convGetter"),this.privConvGetter=p}create(p,l,d){const h=p.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",v=this.privConvGetter().room,g=v.cognitiveSpeechRegion||p.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,""),f={hostSuffix:i.ConnectionFactoryBase.getHostSuffix(g),path:wp.CTS_VIRT_MIC_PATH,region:encodeURIComponent(g)};f[a.QueryParameterNames.Language]=encodeURIComponent(p.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"")),f[a.QueryParameterNames.CtsMeetingId]=encodeURIComponent(v.roomId),f[a.QueryParameterNames.CtsDeviceId]=encodeURIComponent(v.participantId),f[a.QueryParameterNames.CtsIsParticipant]=v.isHost?"":"&"+a.QueryParameterNames.CtsIsParticipant;let S="";const I={},k={};if(h){S=p.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint),S||(S="wss://"+p.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),S=e.StringUtils.formatString(S,f);const B=new URL(S);B.searchParams.forEach((ee,W)=>{I[W]=ee}),new n.TranscriberConnectionFactory().setQueryParams(I,p,S),I[a.QueryParameterNames.CtsMeetingId]=f[a.QueryParameterNames.CtsMeetingId],I[a.QueryParameterNames.CtsDeviceId]=f[a.QueryParameterNames.CtsDeviceId],v.isHost||(I[a.QueryParameterNames.CtsIsParticipant]=""),a.QueryParameterNames.Format in I||(I[a.QueryParameterNames.Format]="simple"),B.searchParams.forEach((ee,W)=>{B.searchParams.set(W,I[W]),delete I[W]}),S=B.toString()}else{const B=new n.TranslationConnectionFactory;S=B.getEndpointUrl(p,!0),S=e.StringUtils.formatString(S,f),B.setQueryParams(I,p,S)}k[c.HeaderNames.ConnectionId]=d,k[r.RestConfigBase.configParams.token]=v.token,l.token&&(k[l.headerName]=l.token);const L=p.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new r.WebsocketConnection(S,I,k,new n.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(p),L,d)}};return Pr.ConversationTranslatorConnectionFactory=o,o.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",Pr}var Qa;function AP(){return Qa||(Qa=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationTranslator=r.SpeechState=void 0;const e=b(),t=wP(),s=M(),c=z,a=E(),i=bp(),n=go();var o;(function(l){l[l.Inactive=0]="Inactive",l[l.Connecting=1]="Connecting",l[l.Connected=2]="Connected"})(o=r.SpeechState||(r.SpeechState={}));class u extends a.TranslationRecognizer{constructor(d,h,v,g){super(d,h,new t.ConversationTranslatorConnectionFactory(g)),this.privSpeechState=o.Inactive,v&&(this.privTranslator=v,this.sessionStarted=()=>{this.privSpeechState=o.Connected},this.sessionStopped=()=>{this.privSpeechState=o.Inactive},this.recognizing=(f,S)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,S)},this.recognized=async(f,S)=>{var I;(I=S.result)!=null&&I.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(S.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,S)},this.canceled=async()=>{if(this.privSpeechState!==o.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=o.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=o.Connected}async onCancelSpeech(){this.privSpeechState=o.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new n.ConversationTranslationCanceledEventArgs(a.CancellationReason.Error,d,a.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=o.Inactive}catch{}}}class p extends n.ConversationCommon{constructor(d){super(d),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new a.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===o.Connected||this.privCTRecognizer.state===o.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const v=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));v[d]=h,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(v))}joinConversationAsync(d,h,v,g,f){try{if(typeof d=="string"){c.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),c.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),f);let S=v;(S==null||S==="")&&(S=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=a.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(a.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(S),this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage],S),this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.ConversationTranslator_Name],h);const I=[a.PropertyId.SpeechServiceConnection_Host,a.PropertyId.ConversationTranslator_Host,a.PropertyId.SpeechServiceConnection_Endpoint,a.PropertyId.SpeechServiceConnection_ProxyHostName,a.PropertyId.SpeechServiceConnection_ProxyPassword,a.PropertyId.SpeechServiceConnection_ProxyPort,a.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const L of I){const B=this.privProperties.getProperty(L);if(B){const U=typeof L=="string"?L:a.PropertyId[L];this.privSpeechTranslationConfig.setProperty(U,B)}}const k=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(const L of Object.keys(k))this.privSpeechTranslationConfig.setServiceProperty(L,k[L],a.ServicePropertyChannel.UriQueryParameter);this.privConversation=new i.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,S,L=>{L||this.handleError(new Error(this.privErrors.permissionDeniedConnect),f),this.privSpeechTranslationConfig.authorizationToken=L,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(g,f)},B=>{this.handleError(B,f)})},L=>{this.handleError(L,f)})}else typeof d=="object"?(c.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),c.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(a.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,c.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),c.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(v,g)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),g)}catch(S){this.handleError(S,typeof v=="string"?f:g)}}leaveConversationAsync(d,h){s.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,v){try{c.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),c.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,v)}catch(g){this.handleError(g,v)}}startTranscribingAsync(d,h){s.marshalPromiseToCallbacks((async()=>{try{c.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),c.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),c.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(v){throw this.privIsSpeaking=!1,await this.cancelSpeech(),v}})(),d,h)}stopTranscribingAsync(d,h){s.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((v,g)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(v,g)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,v){s.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,v)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=a.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}r.ConversationTranslator=p}(Ds)),Ds}var Rr={},Xa;function kP(){if(Xa)return Rr;Xa=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.ConversationTranscriber=void 0;const r=b(),e=M(),t=z,s=E();let c=class Ap extends s.Recognizer{constructor(i,n){const o=i;t.Contracts.throwIfNull(o,"speechConfig"),t.Contracts.throwIfNullOrWhitespace(o.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,o.properties,new r.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(i,n,o){const u=i;return n.properties.mergeTo(u.properties),new Ap(i,o)}get endpointId(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){t.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,i)}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple])===s.OutputFormat[s.OutputFormat.Simple]?s.OutputFormat.Simple:s.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(i,n){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),i,n)}stopTranscribingAsync(i,n){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),i,n)}close(i,n){t.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),i,n)}async dispose(i){this.privDisposedRecognizer||(i&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(i))}createRecognizerConfig(i){return new r.RecognizerConfig(i,this.privProperties)}createServiceRecognizer(i,n,o,u){const p=o;return u.isSpeakerDiarizationEnabled=!0,new r.ConversationTranscriptionServiceRecognizer(i,n,p,u,this)}};return Rr.ConversationTranscriber=c,Rr}var nt={},Za;function MP(){if(Za)return nt;Za=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.Participant=nt.User=void 0;const r=E();class e{constructor(c){this.privUserId=c}get userId(){return this.privUserId}}nt.User=e;class t{constructor(c,a,i,n,o,u,p,l){this.privId=c,this.privAvatar=a,this.privDisplayName=i,this.privIsHost=n,this.privIsMuted=o,this.privIsUsingTts=u,this.privPreferredLanguage=p,this.privVoice=l,this.privProperties=new r.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(c,a,i){return new t(c,"",c,!1,!1,!1,a,i)}}return nt.Participant=t,nt}var kp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(r.ParticipantChangedReason||(r.ParticipantChangedReason={}))})(kp);var it={},Ya;function OP(){if(Ya)return it;Ya=1,Object.defineProperty(it,"__esModule",{value:!0}),it.MeetingImpl=it.Meeting=void 0;const r=b(),e=M(),t=z,s=E();let c=class{constructor(){}static createMeetingAsync(n,o,u,p){if(t.Contracts.throwIfNullOrUndefined(n,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrUndefined(n.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),t.Contracts.throwIfNull(o,"meetingId"),o.length===0)throw new Error("meetingId cannot be empty");!n.subscriptionKey&&!n.getProperty(s.PropertyId[s.PropertyId.SpeechServiceAuthorization_Token])&&t.Contracts.throwIfNullOrUndefined(n.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const l=new a(n,o);return e.marshalPromiseToCallbacks((async()=>{})(),u,p),l}};it.Meeting=c;class a extends c{constructor(n,o){super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=l=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,l)}catch{}},this.onDisconnected=l=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,l)}catch{}finally{this.close(!1)}},this.onCanceled=(l,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(l,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case r.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case r.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(l,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(l,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(l,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(l,d)=>{try{switch(d.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new s.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new s.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new s.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(l,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(s.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(l,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new s.PropertyCollection,this.privManager=new r.ConversationManager,n.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])||n.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=n.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=o,this.privConfig=n;const p=n;t.Contracts.throwIfNull(p,"speechConfig"),this.privProperties=p.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var n,o;return(n=this.privParticipants.me)!=null&&n.isHost?!1:(o=this.privParticipants.me)==null?void 0:o.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const n=this.meetingId,o=this.participants.map(l=>({id:l.id,preferredLanguage:l.preferredLanguage,voice:l.voice})),u={};for(const l of r.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(l,"");d!==""&&(u[l]=d)}return{id:n,participants:o,meetingProperties:u}}get canSend(){var n;return this.privIsConnected&&!((n=this.privParticipants.me)!=null&&n.isMuted)}get canSendAsHost(){var n;return this.privIsConnected&&((n=this.privParticipants.me)==null?void 0:n.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(n){t.Contracts.throwIfNullOrWhitespace(n,"authorizationToken"),this.privToken=n}createMeetingAsync(n,o){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),o),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),o),this.privRoom=u,this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}startMeetingAsync(n,o){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),o),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}addParticipantAsync(n,o,u){t.Contracts.throwIfNullOrUndefined(n,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(n),o,u)}joinMeetingAsync(n,o,u,p,l){try{t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","conversationId")),t.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),t.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,n,d=>{t.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,p&&p(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,l)})}catch(d){this.handleError(d,l)}}deleteMeetingAsync(n,o){e.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),n,o)}async deleteMeetingImplAsync(){t.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),t.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(n,o){e.marshalPromiseToCallbacks(this.endMeetingImplAsync(),n,o)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(n,o){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),o),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}muteAllParticipantsAsync(n,o){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),o),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}muteParticipantAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==n&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(n,!0),()=>{this.handleCallback(o,u)},l=>{this.handleError(l,u)})}catch(p){this.handleError(p,u)}}removeParticipantAsync(n,o,u){try{if(t.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&n.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(n),o,u);else{t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let p="";typeof n=="string"?p=n:n.hasOwnProperty("id")?p=n.id:n.hasOwnProperty("userId")&&(p=n.userId),t.Contracts.throwIfNullOrWhitespace(p,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===p)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(p),()=>{this.handleCallback(o,u)},d=>{this.handleError(d,u)})}}catch(p){this.handleError(p,u)}}unlockMeetingAsync(n,o){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),o),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}unmuteAllParticipantsAsync(n,o){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),o),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(n,o)},u=>{this.handleError(u,o)})}catch(u){this.handleError(u,o)}}unmuteParticipantAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==n&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(n,!1),()=>{this.handleCallback(o,u)},l=>{this.handleError(l,u)})}catch(p){this.handleError(p,u)}}sendTextMessageAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","message")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),n.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(n),()=>{this.handleCallback(o,u)},p=>{this.handleError(p,u)})}catch(p){this.handleError(p,u)}}setTranslatedLanguagesAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfArrayEmptyOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","languages")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(n),()=>{this.handleCallback(o,u)},p=>{this.handleError(p,u)})}catch(p){this.handleError(p,u)}}changeNicknameAsync(n,o,u){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),t.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),t.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(n),()=>{this.handleCallback(o,u)},p=>{this.handleError(p,u)})}catch(p){this.handleError(p,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(n){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await n.enforceAudioGating(),this.privTranscriberRecognizer=n,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const n=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:n,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(n){if(this.privParticipants.addOrUpdateParticipant(n)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[n],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(n){this.privParticipants.deleteParticipant(n.id);const o=this.meetingInfo;return o.participants=[n],this.privTranscriberRecognizer.pushMeetingEvent(o,"leave")}async close(n){var o;try{this.privIsConnected=!1,await((o=this.privConversationRecognizer)==null?void 0:o.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}n&&this.dispose()}handleCallback(n,o){if(n){try{n()}catch(u){o&&o(u)}n=void 0}}handleError(n,o){if(o)if(n instanceof Error){const u=n;o(u.name+": "+u.message)}else o(n)}toParticipants(n){const o=this.privParticipants.participants.map(u=>this.toParticipant(u));return n?o:o.filter(u=>u.isHost===!1)}toParticipant(n){return new s.Participant(n.id,n.avatar,n.displayName,n.isHost,n.isMuted,n.isUsingTts,n.preferredLanguage,n.voice)}getMuteAllCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getMuteCommand(n,o){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),t.Contracts.throwIfNullOrWhitespace(n,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:n,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:o})}getLockCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getEjectCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),t.Contracts.throwIfNullOrWhitespace(n,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:n,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getChangeNicknameCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),t.Contracts.throwIfNullOrWhitespace(n,"nickname"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:n,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getMessageCommand(n){return t.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),t.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),t.Contracts.throwIfNullOrWhitespace(n,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:n,type:r.ConversationTranslatorMessageTypes.instantMessage})}}return it.MeetingImpl=a,it}var _r={},ec;function DP(){if(ec)return _r;ec=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.MeetingTranscriptionCanceledEventArgs=void 0;const r=wn();class e extends r.CancellationEventArgsBase{}return _r.MeetingTranscriptionCanceledEventArgs=e,_r}var Er={},tc;function NP(){if(tc)return Er;tc=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.MeetingTranscriber=void 0;const r=b(),e=M(),t=z,s=E(),c=go();let a=class{constructor(n){this.privAudioConfig=n,this.privProperties=new s.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return s.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){t.Contracts.throwIfNullOrWhitespace(n,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,n)}joinMeetingAsync(n,o,u){const p=n;t.Contracts.throwIfNullOrUndefined(c.MeetingImpl,"Meeting"),this.privRecognizer=new r.TranscriberRecognizer(n.config,this.privAudioConfig),t.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),e.marshalPromiseToCallbacks(p.connectTranscriberRecognizer(this.privRecognizer),o,u)}startTranscribingAsync(n,o){this.privRecognizer.startContinuousRecognitionAsync(n,o)}stopTranscribingAsync(n,o){this.privRecognizer.stopContinuousRecognitionAsync(n,o)}leaveMeetingAsync(n,o){this.privRecognizer.disconnectCallbacks(),e.marshalPromiseToCallbacks((async()=>{})(),n,o)}close(n,o){t.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),n,o)}async dispose(n){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),n&&(this.privDisposedRecognizer=!0))}};return Er.MeetingTranscriber=a,Er}var Ir={},rc;function zP(){if(rc)return Ir;rc=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.ConversationTranscriptionResult=void 0;const r=E();let e=class extends r.RecognitionResult{constructor(s,c,a,i,n,o,u,p,l,d,h){super(s,c,a,i,n,o,u,l,d,h),this.privSpeakerId=p}get speakerId(){return this.privSpeakerId}};return Ir.ConversationTranscriptionResult=e,Ir}var nc;function go(){return nc||(nc=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=bp();Object.defineProperty(r,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(r,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var t=Ui;Object.defineProperty(r,"ConversationCommon",{enumerable:!0,get:function(){return t.ConversationCommon}});var s=RP();Object.defineProperty(r,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return s.ConversationExpirationEventArgs}});var c=_P();Object.defineProperty(r,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return c.ConversationParticipantsChangedEventArgs}});var a=EP();Object.defineProperty(r,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationCanceledEventArgs}});var i=IP();Object.defineProperty(r,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return i.ConversationTranslationEventArgs}});var n=TP();Object.defineProperty(r,"ConversationTranslationResult",{enumerable:!0,get:function(){return n.ConversationTranslationResult}});var o=AP();Object.defineProperty(r,"ConversationTranslator",{enumerable:!0,get:function(){return o.ConversationTranslator}});var u=kP();Object.defineProperty(r,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var p=MP();Object.defineProperty(r,"Participant",{enumerable:!0,get:function(){return p.Participant}}),Object.defineProperty(r,"User",{enumerable:!0,get:function(){return p.User}});var l=kp;Object.defineProperty(r,"ParticipantChangedReason",{enumerable:!0,get:function(){return l.ParticipantChangedReason}});var d=OP();Object.defineProperty(r,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(r,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=DP();Object.defineProperty(r,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var v=NP();Object.defineProperty(r,"MeetingTranscriber",{enumerable:!0,get:function(){return v.MeetingTranscriber}});var g=zP();Object.defineProperty(r,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return g.ConversationTranscriptionResult}})}(Os)),Os}var st={},ic;function mo(){if(ic)return st;ic=1,Object.defineProperty(st,"__esModule",{value:!0}),st.SynthesisRequest=st.Synthesizer=void 0;const r=b(),e=M(),t=z,s=E();let c=class Mp{constructor(n){const o=n;t.Contracts.throwIfNull(o,"speechConfig"),this.privProperties=o.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){t.Contracts.throwIfNullOrWhitespace(n,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,n)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===r.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(n){const o={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),p=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,""),l=Mp.XMLEncode(n);return this.autoDetectSourceLanguage?u="en-US":p=p||o[u],p&&(l=`<voice name='${p}'>${l}</voice>`),l=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${l}</speak>`,l}async dispose(n){this.privDisposed||(n&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const n=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(n.text,n.isSSML,n.requestId,n.cb,n.err,n.dataStream)}}createSynthesizerConfig(n){return new r.SynthesizerConfig(n,this.privProperties)}implCommonSynthesizeSetup(){let n=typeof window<"u"?"Browser":"Node",o="unknown",u="unknown";typeof navigator<"u"&&(n=n+"/"+navigator.platform,o=navigator.userAgent,u=navigator.appVersion);const p=this.createSynthesizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(n,o,u)))),l=this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Key,void 0),d=l&&l!==""?new r.CognitiveSubscriptionKeyAuthentication(l):new r.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,p),this.privRestAdapter=this.createRestSynthesisAdapter(d,p)}static XMLEncode(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};st.Synthesizer=c;class a{constructor(n,o,u,p,l,d){this.requestId=n,this.text=o,this.isSSML=u,this.cb=p,this.err=l,this.dataStream=d}}return st.SynthesisRequest=a,st}var Tr={},sc;function LP(){if(sc)return Tr;sc=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.SpeechSynthesizer=void 0;const r=b(),e=M(),t=bn,s=Ge,c=oe,a=z,i=E(),n=mo();let o=class Op extends i.Synthesizer{constructor(p,l){super(p),l!==null&&(l===void 0?this.audioConfig=typeof window>"u"?void 0:i.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=l),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(p,l,d){const h=p;return l.properties.mergeTo(h.properties),new Op(p,d)}speakTextAsync(p,l,d,h){this.speakImpl(p,!1,l,d,h)}speakSsmlAsync(p,l,d,h){this.speakImpl(p,!0,l,d,h)}async getVoicesAsync(p=""){return this.getVoices(p)}close(p,l){a.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),p,l)}get internalData(){return this.privAdapter}createSynthesisAdapter(p,l,d){return new r.SpeechSynthesisAdapter(p,l,d,this,this.audioConfig)}createRestSynthesisAdapter(p,l){return new r.SynthesisRestAdapter(l,p)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat[this.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(p,l,d,h,v){try{a.Contracts.throwIfDisposed(this.privDisposed);const g=e.createNoDashGuid();let f;v instanceof i.PushAudioOutputStreamCallback?f=new c.PushAudioOutputStreamImpl(v):v instanceof i.PullAudioOutputStream?f=v:v!==void 0?f=new t.AudioFileWriter(v):f=void 0,this.synthesisRequestQueue.enqueue(new n.SynthesisRequest(g,p,l,S=>{if(this.privSynthesizing=!1,d)try{d(S)}catch(I){h&&h(I)}d=void 0,this.adapterSpeak().catch(()=>{})},S=>{h&&h(S)},f)),this.adapterSpeak().catch(()=>{})}catch(g){if(h)if(g instanceof Error){const f=g;h(f.name+": "+f.message)}else h(g);this.dispose(!0).catch(()=>{})}}async getVoices(p){const l=e.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(l);if(d.ok&&Array.isArray(d.json)){let h=d.json;return p&&p.length>0&&(h=h.filter(v=>!!v.Locale&&v.Locale.toLowerCase()===p.toLowerCase())),new i.SynthesisVoicesResult(l,h,void 0)}else return new i.SynthesisVoicesResult(l,void 0,`Error: ${d.status}: ${d.statusText}`)}};return Tr.SpeechSynthesizer=o,Tr}var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.SynthesisResult=void 0;class jP{constructor(e,t,s,c){this.privResultId=e,this.privReason=t,this.privErrorDetails=s,this.privProperties=c}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}Hi.SynthesisResult=jP;var br={},oc;function BP(){if(oc)return br;oc=1,Object.defineProperty(br,"__esModule",{value:!0}),br.SpeechSynthesisResult=void 0;const r=E();let e=class extends r.SynthesisResult{constructor(s,c,a,i,n,o){super(s,c,i,n),this.privAudioData=a,this.privAudioDuration=o}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return br.SpeechSynthesisResult=e,br}var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.SpeechSynthesisEventArgs=void 0;class $P{constructor(e){this.privResult=e}get result(){return this.privResult}}Wi.SpeechSynthesisEventArgs=$P;var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.SpeechSynthesisWordBoundaryEventArgs=void 0;class qP{constructor(e,t,s,c,a,i){this.privAudioOffset=e,this.privDuration=t,this.privText=s,this.privWordLength=c,this.privTextOffset=a,this.privBoundaryType=i}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}Ki.SpeechSynthesisWordBoundaryEventArgs=qP;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.SpeechSynthesisBookmarkEventArgs=void 0;class FP{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}Ji.SpeechSynthesisBookmarkEventArgs=FP;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.SpeechSynthesisVisemeEventArgs=void 0;class xP{constructor(e,t,s){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=s}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}Gi.SpeechSynthesisVisemeEventArgs=xP;var Dp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(r.SpeechSynthesisBoundaryType||(r.SpeechSynthesisBoundaryType={}))})(Dp);var wr={},ac;function VP(){if(ac)return wr;ac=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.SynthesisVoicesResult=void 0;const r=E();let e=class extends r.SynthesisResult{constructor(s,c,a){if(Array.isArray(c)){super(s,r.ResultReason.VoicesListRetrieved,void 0,new r.PropertyCollection),this.privVoices=[];for(const i of c)this.privVoices.push(new r.VoiceInfo(i))}else super(s,r.ResultReason.Canceled,a||"Error information unavailable",new r.PropertyCollection)}get voices(){return this.privVoices}};return wr.SynthesisVoicesResult=e,wr}var Np={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VoiceInfo=r.SynthesisVoiceType=r.SynthesisVoiceGender=void 0;var e;(function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"})(e=r.SynthesisVoiceGender||(r.SynthesisVoiceGender={}));var t;(function(a){a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard"})(t=r.SynthesisVoiceType||(r.SynthesisVoiceType={}));const s={[e[e.Neutral]]:e.Neutral,[e[e.Male]]:e.Male,[e[e.Female]]:e.Female};class c{constructor(i){if(this.privStyleList=[],i){if(this.privName=i.Name,this.privLocale=i.Locale,this.privShortName=i.ShortName,this.privLocaleName=i.LocaleName,this.privDisplayName=i.DisplayName,this.privLocalName=i.LocalName,this.privVoiceType=i.VoiceType.endsWith("Standard")?t.OnlineStandard:t.OnlineNeural,this.privGender=s[i.Gender]||e.Unknown,i.StyleList&&Array.isArray(i.StyleList))for(const n of i.StyleList)this.privStyleList.push(n);this.privSampleRateHertz=i.SampleRateHertz,this.privStatus=i.Status,i.ExtendedPropertyMap&&(this.privExtendedPropertyMap=i.ExtendedPropertyMap),this.privWordsPerMinute=i.WordsPerMinute,Array.isArray(i.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...i.SecondaryLocaleList]),Array.isArray(i.RolePlayList)&&(this.privRolePlayList=[...i.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}r.VoiceInfo=c})(Np);var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.SpeakerAudioDestination=void 0;const ot=M(),UP=oe,_e=Je,HP=60*30,cc={[_e.AudioFormatTag.PCM]:"audio/wav",[_e.AudioFormatTag.MuLaw]:"audio/x-wav",[_e.AudioFormatTag.MP3]:"audio/mpeg",[_e.AudioFormatTag.OGG_OPUS]:"audio/ogg",[_e.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[_e.AudioFormatTag.ALaw]:"audio/x-wav",[_e.AudioFormatTag.FLAC]:"audio/flac"};class WP{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||ot.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,s){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},c=>{s&&s(c)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},s=>{t&&t(s)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===_e.AudioFormatTag.PCM||this.privFormat.formatTag===_e.AudioFormatTag.MuLaw||this.privFormat.formatTag===_e.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let s=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(s).then(()=>{s=this.privFormat.addHeader(s);const c=new Blob([s],{type:cc[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(c),this.notifyPlayback().then(()=>{e&&e()},a=>{t&&t(a)})},c=>{t&&t(c)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;const t=cc[this.privFormat.formatTag];t===void 0?console.warn(`Unknown mimeType for format ${_e.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=HP,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(s=>{ot.Events.instance.onEvent(new ot.BackgroundEvent(s))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(s=>{ot.Events.instance.onEvent(new ot.BackgroundEvent(s))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(s=>{ot.Events.instance.onEvent(new ot.BackgroundEvent(s))})):(console.warn(`Format ${_e.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new UP.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e;return((e=this.privAudio)==null?void 0:e.volume)??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},s=>{t&&t(s)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}Qi.SpeakerAudioDestination=WP;var Ar={},uc;function KP(){if(uc)return Ar;uc=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.ConversationTranscriptionCanceledEventArgs=void 0;const r=wn();let e=class extends r.CancellationEventArgsBase{};return Ar.ConversationTranscriptionCanceledEventArgs=e,Ar}var kr={},pc;function JP(){if(pc)return kr;pc=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.MeetingTranscriptionCanceledEventArgs=void 0;const r=wn();let e=class extends r.CancellationEventArgsBase{};return kr.MeetingTranscriptionCanceledEventArgs=e,kr}var zp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(r.PronunciationAssessmentGradingSystem||(r.PronunciationAssessmentGradingSystem={}))})(zp);var Lp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(r.PronunciationAssessmentGranularity||(r.PronunciationAssessmentGranularity={}))})(Lp);var Mr={},lc;function GP(){if(lc)return Mr;lc=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.PronunciationAssessmentConfig=void 0;const r=z,e=E();let t=class jp{constructor(c,a=e.PronunciationAssessmentGradingSystem.FivePoint,i=e.PronunciationAssessmentGranularity.Phoneme,n=!1){r.Contracts.throwIfNullOrUndefined(c,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,c),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[a]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[i]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(n))}static fromJSON(c){r.Contracts.throwIfNullOrUndefined(c,"json");const a=new jp("");return a.privProperties=new e.PropertyCollection,a.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,c),a}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(c){this.updateJson();const a=c.internalData;a.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,a.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,a.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(c){r.Contracts.throwIfNullOrWhitespace(c,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,c)}set phonemeAlphabet(c){r.Contracts.throwIfNullOrWhitespace(c,"phonemeAlphabet"),this.privPhonemeAlphabet=c}set enableMiscue(c){const a=c?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,a)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(c){this.privNBestPhonemeCount=c}set enableProsodyAssessment(c){this.privEnableProsodyAssessment=c}enableContentAssessmentWithTopic(c){this.privContentAssessmentTopic=c}get properties(){return this.privProperties}updateJson(){const c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),a=JSON.parse(c),i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);i&&(a.referenceText=i);const n=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);n&&(a.gradingSystem=n);const o=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);o&&(a.granularity=o),this.privPhonemeAlphabet&&(a.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(a.nbestPhonemeCount=this.privNBestPhonemeCount),a.enableProsodyAssessment=this.privEnableProsodyAssessment,a.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(a.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(a))}};return Mr.PronunciationAssessmentConfig=t,Mr}var at={},dc;function QP(){if(dc)return at;dc=1,Object.defineProperty(at,"__esModule",{value:!0}),at.PronunciationAssessmentResult=at.ContentAssessmentResult=void 0;const r=z,e=E();class t{constructor(a){this.privPronJson=a}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}at.ContentAssessmentResult=t;let s=class Bp{constructor(a){const i=JSON.parse(a);r.Contracts.throwIfNullOrUndefined(i.NBest[0],"NBest"),this.privPronJson=i.NBest[0]}static fromResult(a){r.Contracts.throwIfNullOrUndefined(a,"result");const i=a.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return r.Contracts.throwIfNullOrUndefined(i,"json"),new Bp(i)}get detailResult(){return this.privPronJson}get accuracyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.AccuracyScore}get pronunciationScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.PronScore}get completenessScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.CompletenessScore}get fluencyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.FluencyScore}get prosodyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new t(this.detailResult)}};return at.PronunciationAssessmentResult=s,at}var Or={},hc;function XP(){if(hc)return Or;hc=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.AvatarConfig=void 0;const r=z,e=E();let t=class{constructor(c,a,i){this.privCustomized=!1,r.Contracts.throwIfNullOrWhitespace(c,"character"),this.character=c,this.style=a,i===void 0&&(i=new e.AvatarVideoFormat),this.videoFormat=i}get customized(){return this.privCustomized}set customized(c){this.privCustomized=c}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(c){this.privBackgroundColor=c}};return Or.AvatarConfig=t,Or}var $p={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AvatarEventArgs=r.AvatarEventTypes=void 0,function(t){t.SwitchedToSpeaking="SwitchedToSpeaking",t.SwitchedToIdle="SwitchedToIdle",t.SessionClosed="SessionClosed"}(r.AvatarEventTypes||(r.AvatarEventTypes={}));class e{constructor(s,c){this.privOffset=s,this.privDescription=c}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}r.AvatarEventArgs=e})($p);var Dr={},Nr={},vc;function qp(){if(vc)return Nr;vc=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.SpeechSynthesisConnectionFactory=void 0;const r=ie(),e=E(),t=ke(),s=b(),c=ne,a=Ae;let i=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(o,u,p){let l=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),h=t.ConnectionFactoryBase.getHostSuffix(d),v=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=v===void 0?"tts":"voice",f=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+g+".speech"+h),S={},I={};u.token!==void 0&&u.token!==""&&(I[u.headerName]=u.token),I[c.HeaderNames.ConnectionId]=p,v!==void 0&&v!==""&&(!l||l.search(a.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomVoiceDeploymentId]=v),o.avatarEnabled&&(!l||l.search(a.QueryParameterNames.EnableAvatar)===-1)&&(S[a.QueryParameterNames.EnableAvatar]="true"),l||(l=f+this.synthesisUri),o.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,l);const k=o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(l,S,I,new s.WebsocketMessageFormatter,r.ProxyInfo.fromParameters(o.parameters),k,p)}};return Nr.SpeechSynthesisConnectionFactory=i,Nr}var fc;function ZP(){if(fc)return Dr;fc=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.AvatarSynthesizer=void 0;const r=qp(),e=b(),t=M(),s=Ge,c=E(),a=z,i=mo();let n=class extends c.Synthesizer{constructor(u,p){super(u),a.Contracts.throwIfNullOrUndefined(p,"avatarConfig"),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.privAvatarConfig=p,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(c.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){a.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,a.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const p=new t.Deferred;u.onicegatheringstatechange=()=>{t.Events.instance.onEvent(new t.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,t.EventType.Debug)),u.iceGatheringState==="complete"&&(t.Events.instance.onEvent(new t.PlatformEvent("peer connection: ice gathering complete.",t.EventType.Info)),p.resolve())},u.onicecandidate=g=>{g.candidate?t.Events.instance.onEvent(new t.PlatformEvent("peer connection: ice candidate: "+g.candidate.candidate,t.EventType.Debug)):(t.Events.instance.onEvent(new t.PlatformEvent("peer connection: ice candidate: complete",t.EventType.Debug)),p.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(t.Events.instance.onEvent(new t.PlatformEvent("peer connection: ice gathering timeout.",t.EventType.Warning)),p.resolve())},2e3);const l=await u.createOffer();await u.setLocalDescription(l),await p.promise,t.Events.instance.onEvent(new t.PlatformEvent("peer connection: got local SDP.",t.EventType.Info)),this.privProperties.setProperty(c.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==c.ResultReason.SynthesizingAudioCompleted)return new c.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(c.PropertyId.TalkingAvatarService_WebRTC_SDP)),v=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(v),new c.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const p=await this.speak(u,!1);return new c.SynthesisResult(p.resultId,p.reason,p.errorDetails,p.properties)}async speakSsmlAsync(u){const p=await this.speak(u,!0);return new c.SynthesisResult(p.resultId,p.reason,p.errorDetails,p.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return a.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,p,l){return new e.AvatarSynthesisAdapter(u,p,l,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,p){}createSynthesizerConfig(u){const p=super.createSynthesizerConfig(u);return p.avatarEnabled=!0,p}async speak(u,p){const l=t.createNoDashGuid(),d=new t.Deferred;return this.synthesisRequestQueue.enqueue(new i.SynthesisRequest(l,u,p,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return Dr.AvatarSynthesizer=n,Dr}var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.AvatarVideoFormat=Rt.Coordinate=void 0;class YP{constructor(e,t){this.x=e,this.y=t}}Rt.Coordinate=YP;class eR{constructor(e="H264",t=2e6,s=1920,c=1080){this.codec=e,this.bitrate=t,this.width=s,this.height=c}setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}}Rt.AvatarVideoFormat=eR;var zr={},gc;function tR(){if(gc)return zr;gc=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.AvatarWebRTCConnectionResult=void 0;const r=E();let e=class extends r.SynthesisResult{constructor(s,c,a,i,n){super(c,a,i,n),this.privSDPAnswer=s}get SDPAnswer(){return this.privSDPAnswer}};return zr.AvatarWebRTCConnectionResult=e,zr}var Lr={},mc;function rR(){if(mc)return Lr;mc=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Diagnostics=void 0;const r=ie(),e=M();let t=class{static SetLoggingLevel(c){this.privListener=new r.ConsoleLoggingListener(c),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(c){if(typeof window>"u")this.privListener&&(this.privListener.logPath=c);else throw new Error("File system logging not available in browser.")}static set onLogOutput(c){this.privListener&&(this.privListener.logCallback=c)}};return Lr.Diagnostics=t,t.privListener=void 0,Lr}var Sc;function E(){return Sc||(Sc=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ip();Object.defineProperty(r,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var t=Je;Object.defineProperty(r,"AudioStreamFormat",{enumerable:!0,get:function(){return t.AudioStreamFormat}}),Object.defineProperty(r,"AudioFormatTag",{enumerable:!0,get:function(){return t.AudioFormatTag}});var s=Yu();Object.defineProperty(r,"AudioInputStream",{enumerable:!0,get:function(){return s.AudioInputStream}}),Object.defineProperty(r,"PullAudioInputStream",{enumerable:!0,get:function(){return s.PullAudioInputStream}}),Object.defineProperty(r,"PushAudioInputStream",{enumerable:!0,get:function(){return s.PushAudioInputStream}});var c=oe;Object.defineProperty(r,"AudioOutputStream",{enumerable:!0,get:function(){return c.AudioOutputStream}}),Object.defineProperty(r,"PullAudioOutputStream",{enumerable:!0,get:function(){return c.PullAudioOutputStream}}),Object.defineProperty(r,"PushAudioOutputStream",{enumerable:!0,get:function(){return c.PushAudioOutputStream}});var a=sp;Object.defineProperty(r,"CancellationReason",{enumerable:!0,get:function(){return a.CancellationReason}});var i=wi;Object.defineProperty(r,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return i.PullAudioInputStreamCallback}});var n=Ai;Object.defineProperty(r,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return n.PushAudioOutputStreamCallback}});var o=ki;Object.defineProperty(r,"KeywordRecognitionModel",{enumerable:!0,get:function(){return o.KeywordRecognitionModel}});var u=Mi;Object.defineProperty(r,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var p=My();Object.defineProperty(r,"RecognitionEventArgs",{enumerable:!0,get:function(){return p.RecognitionEventArgs}});var l=op;Object.defineProperty(r,"OutputFormat",{enumerable:!0,get:function(){return l.OutputFormat}});var d=Oy();Object.defineProperty(r,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=Oi;Object.defineProperty(r,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var v=Ny();Object.defineProperty(r,"SpeechRecognitionResult",{enumerable:!0,get:function(){return v.SpeechRecognitionResult}});var g=zy();Object.defineProperty(r,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var f=Pt;Object.defineProperty(r,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return f.LanguageUnderstandingModel}});var S=Ly();Object.defineProperty(r,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return S.SpeechRecognitionEventArgs}}),Object.defineProperty(r,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return S.ConversationTranscriptionEventArgs}}),Object.defineProperty(r,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return S.MeetingTranscriptionEventArgs}});var I=jy();Object.defineProperty(r,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return I.SpeechRecognitionCanceledEventArgs}});var k=By();Object.defineProperty(r,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return k.TranslationRecognitionEventArgs}});var L=$y();Object.defineProperty(r,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return L.TranslationSynthesisEventArgs}});var B=up();Object.defineProperty(r,"TranslationRecognitionResult",{enumerable:!0,get:function(){return B.TranslationRecognitionResult}});var U=Di;Object.defineProperty(r,"TranslationSynthesisResult",{enumerable:!0,get:function(){return U.TranslationSynthesisResult}});var ee=pp;Object.defineProperty(r,"ResultReason",{enumerable:!0,get:function(){return ee.ResultReason}});var W=Fy();Object.defineProperty(r,"SpeechConfig",{enumerable:!0,get:function(){return W.SpeechConfig}}),Object.defineProperty(r,"SpeechConfigImpl",{enumerable:!0,get:function(){return W.SpeechConfigImpl}});var Ce=xy();Object.defineProperty(r,"SpeechTranslationConfig",{enumerable:!0,get:function(){return Ce.SpeechTranslationConfig}}),Object.defineProperty(r,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return Ce.SpeechTranslationConfigImpl}});var gt=dp();Object.defineProperty(r,"PropertyCollection",{enumerable:!0,get:function(){return gt.PropertyCollection}});var Dn=Ni;Object.defineProperty(r,"PropertyId",{enumerable:!0,get:function(){return Dn.PropertyId}});var Nn=Vy();Object.defineProperty(r,"Recognizer",{enumerable:!0,get:function(){return Nn.Recognizer}});var ye=Uy();Object.defineProperty(r,"SpeechRecognizer",{enumerable:!0,get:function(){return ye.SpeechRecognizer}});var Mo=Hy();Object.defineProperty(r,"IntentRecognizer",{enumerable:!0,get:function(){return Mo.IntentRecognizer}});var Yp=fp;Object.defineProperty(r,"VoiceProfileType",{enumerable:!0,get:function(){return Yp.VoiceProfileType}});var el=Wy();Object.defineProperty(r,"TranslationRecognizer",{enumerable:!0,get:function(){return el.TranslationRecognizer}});var tl=Ky();Object.defineProperty(r,"Translations",{enumerable:!0,get:function(){return tl.Translations}});var rl=Cp;Object.defineProperty(r,"NoMatchReason",{enumerable:!0,get:function(){return rl.NoMatchReason}});var nl=Jy();Object.defineProperty(r,"NoMatchDetails",{enumerable:!0,get:function(){return nl.NoMatchDetails}});var il=zi;Object.defineProperty(r,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return il.TranslationRecognitionCanceledEventArgs}});var sl=Qy();Object.defineProperty(r,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return sl.IntentRecognitionCanceledEventArgs}});var ol=An;Object.defineProperty(r,"CancellationDetailsBase",{enumerable:!0,get:function(){return ol.CancellationDetailsBase}});var al=Zy();Object.defineProperty(r,"CancellationDetails",{enumerable:!0,get:function(){return al.CancellationDetails}});var cl=Rp;Object.defineProperty(r,"CancellationErrorCode",{enumerable:!0,get:function(){return cl.CancellationErrorCode}});var ul=Yy();Object.defineProperty(r,"ConnectionEventArgs",{enumerable:!0,get:function(){return ul.ConnectionEventArgs}});var pl=eP();Object.defineProperty(r,"ServiceEventArgs",{enumerable:!0,get:function(){return pl.ServiceEventArgs}});var ll=mp();Object.defineProperty(r,"Connection",{enumerable:!0,get:function(){return ll.Connection}});var dl=Li;Object.defineProperty(r,"PhraseListGrammar",{enumerable:!0,get:function(){return dl.PhraseListGrammar}});var hl=lo();Object.defineProperty(r,"DialogServiceConfig",{enumerable:!0,get:function(){return hl.DialogServiceConfig}});var vl=tP();Object.defineProperty(r,"BotFrameworkConfig",{enumerable:!0,get:function(){return vl.BotFrameworkConfig}});var fl=rP();Object.defineProperty(r,"CustomCommandsConfig",{enumerable:!0,get:function(){return fl.CustomCommandsConfig}});var gl=iP();Object.defineProperty(r,"DialogServiceConnector",{enumerable:!0,get:function(){return gl.DialogServiceConnector}});var ml=ji;Object.defineProperty(r,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return ml.ActivityReceivedEventArgs}});var Sl=Bi;Object.defineProperty(r,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Sl.TurnStatusReceivedEventArgs}});var Cl=_p;Object.defineProperty(r,"ServicePropertyChannel",{enumerable:!0,get:function(){return Cl.ServicePropertyChannel}});var yl=Ep;Object.defineProperty(r,"ProfanityOption",{enumerable:!0,get:function(){return yl.ProfanityOption}});var Pl=cP();Object.defineProperty(r,"BaseAudioPlayer",{enumerable:!0,get:function(){return Pl.BaseAudioPlayer}});var Rl=qi;Object.defineProperty(r,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return Rl.ConnectionMessageEventArgs}});var _l=gp();Object.defineProperty(r,"ConnectionMessage",{enumerable:!0,get:function(){return _l.ConnectionMessage}});var El=Fi;Object.defineProperty(r,"VoiceProfile",{enumerable:!0,get:function(){return El.VoiceProfile}});var Oo=lP();Object.defineProperty(r,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return Oo.VoiceProfileEnrollmentResult}}),Object.defineProperty(r,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return Oo.VoiceProfileEnrollmentCancellationDetails}});var Do=dP();Object.defineProperty(r,"VoiceProfileResult",{enumerable:!0,get:function(){return Do.VoiceProfileResult}}),Object.defineProperty(r,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return Do.VoiceProfileCancellationDetails}});var Il=hP();Object.defineProperty(r,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return Il.VoiceProfilePhraseResult}});var Tl=vP();Object.defineProperty(r,"VoiceProfileClient",{enumerable:!0,get:function(){return Tl.VoiceProfileClient}});var bl=fP();Object.defineProperty(r,"SpeakerRecognizer",{enumerable:!0,get:function(){return bl.SpeakerRecognizer}});var wl=gP();Object.defineProperty(r,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return wl.SpeakerIdentificationModel}});var Al=mP();Object.defineProperty(r,"SpeakerVerificationModel",{enumerable:!0,get:function(){return Al.SpeakerVerificationModel}});var kl=SP();Object.defineProperty(r,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return kl.AutoDetectSourceLanguageConfig}});var Ml=xi;Object.defineProperty(r,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return Ml.AutoDetectSourceLanguageResult}});var Ol=Vi;Object.defineProperty(r,"SourceLanguageConfig",{enumerable:!0,get:function(){return Ol.SourceLanguageConfig}});var gs=yP();Object.defineProperty(r,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return gs.SpeakerRecognitionResult}}),Object.defineProperty(r,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return gs.SpeakerRecognitionResultType}}),Object.defineProperty(r,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return gs.SpeakerRecognitionCancellationDetails}});var Se=go();Object.defineProperty(r,"Conversation",{enumerable:!0,get:function(){return Se.Conversation}}),Object.defineProperty(r,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Se.ConversationExpirationEventArgs}}),Object.defineProperty(r,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Se.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(r,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Se.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(r,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Se.ConversationTranslationEventArgs}}),Object.defineProperty(r,"ConversationTranslationResult",{enumerable:!0,get:function(){return Se.ConversationTranslationResult}}),Object.defineProperty(r,"ConversationTranslator",{enumerable:!0,get:function(){return Se.ConversationTranslator}}),Object.defineProperty(r,"ConversationTranscriber",{enumerable:!0,get:function(){return Se.ConversationTranscriber}}),Object.defineProperty(r,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Se.ConversationTranscriptionResult}}),Object.defineProperty(r,"Meeting",{enumerable:!0,get:function(){return Se.Meeting}}),Object.defineProperty(r,"MeetingTranscriber",{enumerable:!0,get:function(){return Se.MeetingTranscriber}}),Object.defineProperty(r,"Participant",{enumerable:!0,get:function(){return Se.Participant}}),Object.defineProperty(r,"ParticipantChangedReason",{enumerable:!0,get:function(){return Se.ParticipantChangedReason}}),Object.defineProperty(r,"User",{enumerable:!0,get:function(){return Se.User}});var Dl=mo();Object.defineProperty(r,"Synthesizer",{enumerable:!0,get:function(){return Dl.Synthesizer}});var Nl=ao;Object.defineProperty(r,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Nl.SpeechSynthesisOutputFormat}});var zl=LP();Object.defineProperty(r,"SpeechSynthesizer",{enumerable:!0,get:function(){return zl.SpeechSynthesizer}});var Ll=Hi;Object.defineProperty(r,"SynthesisResult",{enumerable:!0,get:function(){return Ll.SynthesisResult}});var jl=BP();Object.defineProperty(r,"SpeechSynthesisResult",{enumerable:!0,get:function(){return jl.SpeechSynthesisResult}});var Bl=Wi;Object.defineProperty(r,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Bl.SpeechSynthesisEventArgs}});var $l=Ki;Object.defineProperty(r,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return $l.SpeechSynthesisWordBoundaryEventArgs}});var ql=Ji;Object.defineProperty(r,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return ql.SpeechSynthesisBookmarkEventArgs}});var Fl=Gi;Object.defineProperty(r,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Fl.SpeechSynthesisVisemeEventArgs}});var xl=Dp;Object.defineProperty(r,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return xl.SpeechSynthesisBoundaryType}});var Vl=VP();Object.defineProperty(r,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Vl.SynthesisVoicesResult}});var Ul=Np;Object.defineProperty(r,"VoiceInfo",{enumerable:!0,get:function(){return Ul.VoiceInfo}});var Hl=Qi;Object.defineProperty(r,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Hl.SpeakerAudioDestination}});var Wl=KP();Object.defineProperty(r,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Wl.ConversationTranscriptionCanceledEventArgs}});var Kl=JP();Object.defineProperty(r,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Kl.MeetingTranscriptionCanceledEventArgs}});var Jl=zp;Object.defineProperty(r,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Jl.PronunciationAssessmentGradingSystem}});var Gl=Lp;Object.defineProperty(r,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Gl.PronunciationAssessmentGranularity}});var Ql=GP();Object.defineProperty(r,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Ql.PronunciationAssessmentConfig}});var Xl=QP();Object.defineProperty(r,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Xl.PronunciationAssessmentResult}});var Zl=vo;Object.defineProperty(r,"LanguageIdMode",{enumerable:!0,get:function(){return Zl.LanguageIdMode}});var Yl=XP();Object.defineProperty(r,"AvatarConfig",{enumerable:!0,get:function(){return Yl.AvatarConfig}});var ed=$p;Object.defineProperty(r,"AvatarEventArgs",{enumerable:!0,get:function(){return ed.AvatarEventArgs}});var td=ZP();Object.defineProperty(r,"AvatarSynthesizer",{enumerable:!0,get:function(){return td.AvatarSynthesizer}});var No=Rt;Object.defineProperty(r,"AvatarVideoFormat",{enumerable:!0,get:function(){return No.AvatarVideoFormat}}),Object.defineProperty(r,"Coordinate",{enumerable:!0,get:function(){return No.Coordinate}});var rd=tR();Object.defineProperty(r,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return rd.AvatarWebRTCConnectionResult}});var nd=rR();Object.defineProperty(r,"Diagnostics",{enumerable:!0,get:function(){return nd.Diagnostics}});var id=so;Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return id.LogLevel}})}(As)),As}var Cc;function nR(){if(Cc)return zt;Cc=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.ProxyInfo=void 0;const r=E();let e=class Fp{constructor(s,c,a,i){this.privProxyHostName=s,this.privProxyPort=c,this.privProxyUserName=a,this.privProxyPassword=i}static fromParameters(s){return new Fp(s.getProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(s.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPort),10),s.getProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName),s.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(s){return this.fromParameters(s.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return zt.ProxyInfo=e,zt}var xp={};const iR=new Set(["json","buffer","string"]);var sR=r=>(...e)=>{const t=new Set;let s,c,a,i="";return e.forEach(n=>{if(typeof n=="string")if(n.toUpperCase()===n)if(s){const o=`Can't set method to ${n}, already set to ${s}.`;throw new Error(o)}else s=n;else if(n.startsWith("http:")||n.startsWith("https:"))i=n;else if(iR.has(n))c=n;else throw new Error(`Unknown encoding, ${n}`);else if(typeof n=="number")t.add(n);else if(typeof n=="object")if(Array.isArray(n)||n instanceof Set)n.forEach(o=>t.add(o));else{if(a)throw new Error("Cannot set headers twice.");a=n}else throw new Error(`Unknown type: ${typeof n}`)}),s||(s="GET"),t.size===0&&t.add(200),r(t,s,c,a,i)};const oR=sR;class So extends Error{constructor(e,...t){super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,So),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let s;Object.defineProperty(this,"responseBody",{get:()=>(s||(s=this.arrayBuffer()),s)}),this.headers={};for(const[a,i]of e.headers.entries())this.headers[a.toLowerCase()]=i}}const aR=(r,e,t,s,c)=>async(a,i,n={})=>{a=c+(a||"");let o=new URL(a);if(s||(s={}),o.username&&(s.Authorization="Basic "+btoa(o.username+":"+o.password),o=new URL(o.protocol+"//"+o.host+o.pathname+o.search)),o.protocol!=="https:"&&o.protocol!=="http:")throw new Error(`Unknown protocol, ${o.protocol}`);if(i&&!(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="string"))if(typeof i=="object")i=JSON.stringify(i),s["Content-Type"]="application/json";else throw new Error("Unknown body type.");n=new Headers({...s||{},...n});const u=await fetch(o,{method:e,headers:n,body:i});if(u.statusCode=u.status,!r.has(u.status))throw new So(u);return t==="json"?u.json():t==="buffer"?u.arrayBuffer():t==="string"?u.text():u};var cR=oR(aR);(function(r){var e=x&&x.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0}),r.RestMessageAdapter=r.RestRequestType=void 0;const t=e(cR),s=M();var c;(function(i){i.Get="GET",i.Post="POST",i.Delete="DELETE",i.File="file"})(c=r.RestRequestType||(r.RestRequestType={}));class a{constructor(n){if(!n)throw new s.ArgumentNullError("configParams");this.privHeaders=n.headers,this.privIgnoreCache=n.ignoreCache}static extractHeaderValue(n,o){let u="";try{const p=o.trim().split(/[\r\n]+/),l={};p.forEach(d=>{const h=d.split(": "),v=h.shift().toLowerCase(),g=h.join(": ");l[v]=g}),u=l[n.toLowerCase()]}catch{}return u}set options(n){this.privHeaders=n.headers,this.privIgnoreCache=n.ignoreCache}setHeaders(n,o){this.privHeaders[n]=o}request(n,o,u={},p=null){const l=new s.Deferred,d=n===c.File?"POST":n,h=(g,f={})=>{const S=g;return{data:JSON.stringify(f),headers:JSON.stringify(g.headers),json:f,ok:g.statusCode>=200&&g.statusCode<300,status:g.statusCode,statusText:f.error?f.error.message:S.statusText?S.statusText:S.statusMessage}},v=g=>{const f=t.default(o,d,this.privHeaders,200,201,202,204,400,401,402,403,404),S=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;f(S,g).then(async I=>{if(n===c.Delete||I.statusCode===204)l.resolve(h(I));else try{const k=await I.json();l.resolve(h(I,k))}catch{l.resolve(h(I))}}).catch(I=>{l.reject(I)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),n===c.Post&&p&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),v(p),l.promise}queryParams(n={}){return Object.keys(n).map(o=>encodeURIComponent(o)+"="+encodeURIComponent(n[o])).join("&")}}r.RestMessageAdapter=a})(xp);var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.RestConfigBase=void 0;class Ve{static get requestOptions(){return Ve.privDefaultRequestOptions}static get configParams(){return Ve.privDefaultParams}static get restErrors(){return Ve.privRestErrors}}Mn.RestConfigBase=Ve;Ve.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};Ve.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};Ve.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var yc;function ie(){return yc||(yc=1,function(r){var e=x&&x.__createBinding||(Object.create?function(s,c,a,i){i===void 0&&(i=a),Object.defineProperty(s,i,{enumerable:!0,get:function(){return c[a]}})}:function(s,c,a,i){i===void 0&&(i=a),s[i]=c[a]}),t=x&&x.__exportStar||function(s,c){for(var a in s)a!=="default"&&!c.hasOwnProperty(a)&&e(c,s,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ei,r),t(Xu,r),t(sy(),r),t(oy(),r),t(Ii,r),t(Ti,r),t(Tn,r),t(bi,r),t(nR(),r),t(xp,r),t(Mn,r)}(Ts)),Ts}var Pc;function uR(){if(Pc)return Ot;Pc=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.IntentConnectionFactory=void 0;const r=ie(),e=E(),t=ke(),s=b(),c=ne;let a=class extends t.ConnectionFactoryBase{create(n,o,u){let p=n.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!p){const v=n.parameters.getProperty(e.PropertyId.SpeechServiceConnection_IntentRegion),g=t.ConnectionFactoryBase.getHostSuffix(v);p=n.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+v+".sr.speech"+g)+"/speech/recognition/interactive/cognitiveservices/v1"}const l={format:"simple",language:n.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(n,l,p);const d={};o.token!==void 0&&o.token!==""&&(d[o.headerName]=o.token),d[c.HeaderNames.ConnectionId]=u,n.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const h=n.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(p,l,d,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(n),h,u)}getSpeechRegionFromIntentRegion(n){switch(n){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return n}}};return Ot.IntentConnectionFactory=a,Ot}var ct={},Rc;function pR(){if(Rc)return ct;Rc=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.VoiceProfileConnectionFactory=ct.SpeakerRecognitionConnectionFactory=void 0;const r=ie(),e=E(),t=ke(),s=b(),c=ne;class a extends t.ConnectionFactoryBase{create(u,p,l,d){let h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const S=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region),I=t.ConnectionFactoryBase.getHostSuffix(S),k=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`wss://${S}.spr-frontend.speech${I}`),L=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${k}/speaker/ws/${this.scenarioToPath(L)}/${l}`}const v={format:"simple",language:u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,v,h);const g={};p.token!==void 0&&p.token!==""&&(g[p.headerName]=p.token),g[c.HeaderNames.ConnectionId]=d,g[c.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,h);const f=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(h,v,g,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),f,d)}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let i=class extends a{create(u,p,l){return super.create(u,p,"recognition",l)}};ct.SpeakerRecognitionConnectionFactory=i;class n extends a{create(u,p,l){return super.create(u,p,"profile",l)}}return ct.VoiceProfileConnectionFactory=n,ct}var Xi={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionEndedEvent=r.RecognitionCompletionStatus=r.RecognitionStartedEvent=r.ConnectingToServiceEvent=r.ListeningStartedEvent=r.RecognitionTriggeredEvent=r.SpeechRecognitionEvent=void 0;const e=M();class t extends e.PlatformEvent{constructor(p,l,d,h=e.EventType.Info){super(p,h),this.privRequestId=l,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}r.SpeechRecognitionEvent=t;class s extends t{constructor(p,l,d,h){super("RecognitionTriggeredEvent",p,l),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}r.RecognitionTriggeredEvent=s;class c extends t{constructor(p,l,d,h){super("ListeningStartedEvent",p,l),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}r.ListeningStartedEvent=c;class a extends t{constructor(p,l,d){super("ConnectingToServiceEvent",p,d),this.privAuthFetchEventid=l}get authFetchEventid(){return this.privAuthFetchEventid}}r.ConnectingToServiceEvent=a;class i extends t{constructor(p,l,d,h,v){super("RecognitionStartedEvent",p,v),this.privAudioSourceId=l,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}r.RecognitionStartedEvent=i;var n;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(n=r.RecognitionCompletionStatus||(r.RecognitionCompletionStatus={}));class o extends t{constructor(p,l,d,h,v,g,f,S){super("RecognitionEndedEvent",p,v,f===n.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=l,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=f,this.privError=S,this.privServiceTag=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}r.RecognitionEndedEvent=o})(Xi);var jr={},$e={};Object.defineProperty($e,"__esModule",{value:!0});$e.SpeechConnectionMessage=void 0;const Ns=M(),ze=ne;class Co extends Ns.ConnectionMessage{constructor(e,t,s,c,a,i,n,o){if(!t)throw new Ns.ArgumentNullError("path");if(!s)throw new Ns.ArgumentNullError("requestId");const u={};if(u[ze.HeaderNames.Path]=t,u[ze.HeaderNames.RequestId]=s,u[ze.HeaderNames.RequestTimestamp]=new Date().toISOString(),c&&(u[ze.HeaderNames.ContentType]=c),i&&(u[ze.HeaderNames.RequestStreamId]=i),n)for(const p in n)p&&(u[p]=n[p]);o?super(e,a,u,o):super(e,a,u),this.privPath=t,this.privRequestId=s,this.privContentType=c,this.privStreamId=i,this.privAdditionalHeaders=n}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,s=null,c=null,a=null;const i={};if(e.headers)for(const n in e.headers)n&&(n.toLowerCase()===ze.HeaderNames.Path.toLowerCase()?t=e.headers[n]:n.toLowerCase()===ze.HeaderNames.RequestId.toLowerCase()?s=e.headers[n]:n.toLowerCase()===ze.HeaderNames.ContentType.toLowerCase()?c=e.headers[n]:n.toLowerCase()===ze.HeaderNames.RequestStreamId.toLowerCase()?a=e.headers[n]:i[n]=e.headers[n]);return new Co(e.messageType,t,s,c,e.body,a,i,e.id)}}$e.SpeechConnectionMessage=Co;var _c;function lR(){if(_c)return jr;_c=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.ServiceRecognizerBase=void 0;const r=ie(),e=M(),t=E(),s=b(),c=$e;let a=class vn{constructor(n,o,u,p,l){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!n)throw new e.ArgumentNullError("authentication");if(!o)throw new e.ArgumentNullError("connectionFactory");if(!u)throw new e.ArgumentNullError("audioSource");if(!p)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=p.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=n,this.privConnectionFactory=o,this.privAudioSource=u,this.privRecognizerConfig=p,this.privIsDisposed=!1,this.privRecognizer=l,this.privRequestSession=new s.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new s.DynamicGrammarBuilder,this.privSpeechContext=new s.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new s.AgentConfig,this.privRecognizerConfig.parameters.getProperty(t.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=e.Timeout.setTimeout:typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const v=h;(v.statusCode===1003||v.statusCode===1007||v.statusCode===1002||v.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(t.CancellationReason.Error,v.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${v.reason} websocket error code: ${v.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=e.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const n=this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(n!==void 0){const o=n.split(","),u=this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),p=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:p},output:{interimResults:{mode:"Always"}},targetLanguages:o}),u!==void 0){const l={};for(const d of o)l[d]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:l})}}}setSpeechSegmentationTimeoutJson(){const n=this.privRecognizerConfig.parameters.getProperty(t.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(n!==void 0){const o=this.recognitionMode===s.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===s.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(n,10),p=this.privSpeechContext.getSection("phraseDetection");p.mode=o,p[o]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",p)}}setLanguageIdJson(){const n=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let p;this.privRecognizerConfig.languageIdMode==="Continuous"?p="DetectContinuous":p="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:p,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const l=this.privRecognizerConfig.sourceLanguageModels;l!==void 0&&(n.customModels=l,n.onInterim={action:"None"},n.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(n.onInterim={action:"Translate"},n.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",n)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(s.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple]).toLowerCase()===t.OutputFormat[t.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(n){this.privRecognizerConfig.parameters.setProperty(t.PropertyId.ConversationTranslator_Token,n)}set voiceProfileType(n){this.privRecognizerConfig.parameters.setProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,n)}set authentication(n){this.privAuthentication=n}isDisposed(){return this.privIsDisposed}async dispose(n){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(n)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(n,o,u){if(this.recognizeOverride!==void 0){await this.recognizeOverride(n,o,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=n,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=o,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const p=this.connectImpl();let l;try{const v=await this.audioSource.attach(this.privRequestSession.audioNodeId),g=await this.audioSource.format,f=await this.audioSource.deviceInfo;this.privIsLiveAudio=f.type&&f.type===s.type.Microphones,l=new r.ReplayableAudioNode(v,g.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(l,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:f}}catch(v){throw await this.privRequestSession.onStopRecognizing(),v}try{await p}catch(v){await this.cancelRecognitionLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,v);return}const d=new t.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(l).catch(async v=>{await this.cancelRecognitionLocal(t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,v)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(n,o){this.connectImpl().then(()=>{try{n&&n()}catch(u){o&&o(u)}},u=>{try{o&&o(u)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(n){}async sendNetworkMessage(n,o){const u=typeof o=="string"?e.MessageType.Text:e.MessageType.Binary,p=typeof o=="string"?"application/json":"";return(await this.fetchConnection()).send(new c.SpeechConnectionMessage(u,n,this.privRequestSession.requestId,p,o))}set activityTemplate(n){this.privActivityTemplate=n}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(n){this.privExpectContentAssessmentResponse=n}async sendTelemetryData(){const n=this.privRequestSession.getTelemetry();if(vn.telemetryDataEnabled!==!0||this.privIsDisposed||n===null)return;if(vn.telemetryData)try{vn.telemetryData(n)}catch{}await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",n))}async cancelRecognitionLocal(n,o,u){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n,o,u))}async receiveMessage(){try{if(this.privIsDisposed)return;let n=await this.fetchConnection();const o=await n.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!o)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=c.SpeechConnectionMessage.fromConnectionMessage(o);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const p=s.SpeechDetected.fromJSON(u.textBody),l=new t.RecognitionEventArgs(p.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,l);break;case"speech.enddetected":let d;u.textBody.length>0?d=u.textBody:d="{ Offset: 0 }";const h=s.SpeechDetected.fromJSON(d),v=new t.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,v);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(t.CancellationReason.EndOfStream,t.CancellationErrorCode.NoError,void 0));const g=new t.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,g);return}else n=await this.fetchConnection(),await this.sendPrePayloadJSON(n);break;default:await this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const o=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(o)}sendSpeechContext(n,o){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(o&&this.privRequestSession.onSpeechContext(),u)return n.send(new c.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}async sendPrePayloadJSON(n,o=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(n);await this.sendSpeechContext(n,o),await this.sendWaveHeader(n)}async sendWaveHeader(n){const o=await this.audioSource.format;return n.send(new c.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",o.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(n=>n.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(n,o,u){if(o.onSpeechContext(),vn.telemetryDataEnabled!==!0){const l={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(l)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const p=JSON.parse(u);p.context.DisableReferenceChannel="True",p.context.MicSpec="1_0_0",u=JSON.stringify(p)}if(u)return n.send(new c.SpeechConnectionMessage(e.MessageType.Text,"speech.config",o.requestId,"application/json",u))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(n=>n.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(n){const o=await this.audioSource.format;this.privAverageBytesPerMs=o.avgBytesPerSec/1e3;let u=Date.now();const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),l=o.avgBytesPerSec/1e3*parseInt(p,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const v=await this.fetchConnection(),g=await n.read();if(this.privRequestSession.isSpeechEnded)return;let f,S;if(!g||g.isEnd?(f=null,S=0):(f=g.buffer,this.privRequestSession.onAudioSent(f.byteLength),l>=this.privRequestSession.bytesSent?S=0:S=Math.max(0,u-Date.now())),S!==0&&await this.delay(S),f!==null&&(u=Date.now()+f.byteLength*1e3/(o.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(v.send(new c.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,f)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),g!=null&&g.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let n=!1;this.privAuthFetchEventId=e.createNoDashGuid();const o=this.privRequestSession.sessionId;this.privConnectionId=o!==void 0?o:e.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,p="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(n?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(g=>{this.connectionEvents.onEvent(g)});const v=await h.open();if(v.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(v.statusCode),Promise.resolve(h);v.statusCode===1006&&(n=!0),u=v.statusCode,p=v.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(u,p),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${p}`)}delay(n){return new Promise(o=>this.privSetTimeout(o,n))}writeBufferToConsole(n){let o="Buffer Size: ";if(n===null)o+="null";else{const u=new Uint8Array(n);o+=`${n.byteLength}\r
`;for(let p=0;p<n.byteLength;p++)o+=u[p].toString(16).padStart(2,"0")+" ",(p+1)%16===0&&(console.info(o),o="")}console.info(o)}async sendFinalAudio(){await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const n=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(n):(await this.sendSpeechServiceConfig(n,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(n,!1),n)}};return jr.ServiceRecognizerBase=a,a.telemetryDataEnabled=!0,jr}var Br={},Ec;function dR(){if(Ec)return Br;Ec=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.ConversationServiceRecognizer=void 0;const r=E(),e=b();let t=class extends e.ServiceRecognizerBase{constructor(c,a,i,n,o){super(c,a,i,n,o),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(c){}handleRecognizedCallback(c,a,i){}handleRecognizingCallback(c,a,i){}async processSpeechMessages(c){let a=!1;switch(c.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(c.textBody),a=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(c.textBody),a=!0;break}return a}cancelRecognition(c,a,i,n,o){}async handleSpeechPhrase(c){const a=e.SimpleSpeechPhrase.fromJSON(c),i=e.EnumTranslation.implTranslateRecognitionResult(a.RecognitionStatus);let n;const o=new r.PropertyCollection;o.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,c);const u=a.Offset+this.privRequestSession.currentTurnAudioOffset;let p=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+a.Offset+a.Duration),r.ResultReason.Canceled===i){const l=e.EnumTranslation.implTranslateCancelResult(a.RecognitionStatus),d=e.EnumTranslation.implTranslateCancelErrorCode(a.RecognitionStatus);await this.cancelRecognitionLocal(l,d,e.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&i===r.ResultReason.NoMatch&&a.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])n=new r.SpeechRecognitionResult(this.privRequestSession.requestId,i,a.DisplayText,a.Duration,u,a.Language,a.LanguageDetectionConfidence,a.SpeakerId,void 0,c,o);else{const l=e.DetailedSpeechPhrase.fromJSON(c),d=l.Offset+this.privRequestSession.currentTurnAudioOffset,h=l.getJsonWithCorrectedOffsets(d);n=new r.SpeechRecognitionResult(this.privRequestSession.requestId,i,l.Text,l.Duration,d,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,h,o),p=n.offset}this.handleRecognizedCallback(n,p,this.privRequestSession.sessionId)}}handleSpeechHypothesis(c){const a=e.SpeechHypothesis.fromJSON(c),i=a.Offset+this.privRequestSession.currentTurnAudioOffset,n=new r.PropertyCollection;n.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,c);const o=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,a.Text,a.Duration,i,a.Language,a.LanguageDetectionConfidence,a.SpeakerId,void 0,c,n);this.privRequestSession.onHypothesis(i),this.handleRecognizingCallback(o,a.Duration,this.privRequestSession.sessionId)}};return Br.ConversationServiceRecognizer=t,Br}var zs={},Ic;function hR(){return Ic||(Ic=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognizerConfig=r.SpeechResultFormat=r.RecognitionMode=void 0;const e=E(),t=b();var s;(function(a){a[a.Interactive=0]="Interactive",a[a.Conversation=1]="Conversation",a[a.Dictation=2]="Dictation"})(s=r.RecognitionMode||(r.RecognitionMode={})),function(a){a[a.Simple=0]="Simple",a[a.Detailed=1]="Detailed"}(r.SpeechResultFormat||(r.SpeechResultFormat={}));class c{constructor(i,n){this.privSpeechServiceConfig=i||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=n,this.privMaxRetryCount=parseInt(n.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=n.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(i){this.privRecognitionMode=i,this.privRecognitionActivityTimeout=i===s.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=s[i]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==s.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const i=[];let n=!1;if(this.autoDetectSourceLanguages!==void 0)for(const o of this.autoDetectSourceLanguages.split(",")){const u=o+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),p=this.parameters.getProperty(u,void 0);p!==void 0?(i.push({language:o,endpoint:p}),n=!0):i.push({language:o,endpoint:""})}return n?i:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(i){this.privEnableSpeakerId=i}}r.RecognizerConfig=c}(zs)),zs}var Vp={};Object.defineProperty(Vp,"__esModule",{value:!0});var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.WebsocketMessageFormatter=void 0;const Re=M(),Tc=`\r
`;class vR{toConnectionMessage(e){const t=new Re.Deferred;try{if(e.messageType===Re.MessageType.Text){const s=e.textContent;let c={},a=null;if(s){const i=s.split(`\r
\r
`);i&&i.length>0&&(c=this.parseHeaders(i[0]),i.length>1&&(a=i[1]))}t.resolve(new Re.ConnectionMessage(e.messageType,a,c,e.id))}else if(e.messageType===Re.MessageType.Binary){const s=e.binaryContent;let c={},a=null;if(!s||s.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const i=new DataView(s),n=i.getInt16(0);if(s.byteLength<n+2)throw new Error("Invalid binary message format. Header content missing.");let o="";for(let u=0;u<n;u++)o+=String.fromCharCode(i.getInt8(u+2));c=this.parseHeaders(o),s.byteLength>n+2&&(a=s.slice(2+n)),t.resolve(new Re.ConnectionMessage(e.messageType,a,c,e.id))}}catch(s){t.reject(`Error formatting the message. Error: ${s}`)}return t.promise}fromConnectionMessage(e){const t=new Re.Deferred;try{if(e.messageType===Re.MessageType.Text){const s=`${this.makeHeaders(e)}${Tc}${e.textBody?e.textBody:""}`;t.resolve(new Re.RawWebsocketMessage(Re.MessageType.Text,s,e.id))}else if(e.messageType===Re.MessageType.Binary){const s=this.makeHeaders(e),c=e.binaryBody,a=this.stringToArrayBuffer(s),i=new Int8Array(a),n=i.byteLength,o=new Int8Array(2+n+(c?c.byteLength:0));if(o[0]=n>>8&255,o[1]=n&255,o.set(i,2),c){const p=new Int8Array(c);o.set(p,2+n)}const u=o.buffer;t.resolve(new Re.RawWebsocketMessage(Re.MessageType.Binary,u,e.id))}}catch(s){t.reject(`Error formatting the message. ${s}`)}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const s in e.headers)s&&(t+=`${s}: ${e.headers[s]}${Tc}`);return t}parseHeaders(e){const t={};if(e){const s=e.match(/[^\r\n]+/g);if(t){for(const c of s)if(c){const a=c.indexOf(":"),i=a>0?c.substr(0,a).trim().toLowerCase():c,n=a>0&&c.length>a+1?c.substr(a+1).trim():"";t[i]=n}}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),s=new DataView(t);for(let c=0;c<e.length;c++)s.setUint8(c,e.charCodeAt(c));return t}}Zi.WebsocketMessageFormatter=vR;var $r={},bc;function fR(){if(bc)return $r;bc=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.SpeechConnectionFactory=void 0;const r=ie(),e=b(),t=E(),s=ke(),c=b(),a=ne,i=Ae;let n=class extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(u,p,l){let d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),v=s.ConnectionFactoryBase.getHostSuffix(h),g=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),f={},S=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),I=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(S?(!d||d.search(i.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(f[i.QueryParameterNames.CustomSpeechDeploymentId]=S):I&&(!d||d.search(i.QueryParameterNames.Language)===-1)&&(f[i.QueryParameterNames.Language]=I),(!d||d.search(i.QueryParameterNames.Format)===-1)&&(f[i.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(f[i.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,f,d),!d)switch(u.recognitionMode){case c.RecognitionMode.Conversation:u.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?d=g+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${g}${this.universalUri}${u.recognitionEndpointVersion}`:d=g+this.conversationRelativeUri;break;case c.RecognitionMode.Dictation:d=g+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${g}${this.universalUri}${u.recognitionEndpointVersion}`:d=g+this.interactiveRelativeUri;break}const k={};p.token!==void 0&&p.token!==""&&(k[p.headerName]=p.token),k[a.HeaderNames.ConnectionId]=l;const L=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",B=new r.WebsocketConnection(d,f,k,new c.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),L,l),U=B.uri;return u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,U),B}};return $r.SpeechConnectionFactory=n,$r}var qr={},wc;function gR(){if(wc)return qr;wc=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.ConversationTranscriberConnectionFactory=void 0;const r=ie(),e=E(),t=b(),s=ke(),c=b(),a=ne,i=Ae;let n=class extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(u,p,l){let d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),v=s.ConnectionFactoryBase.getHostSuffix(h),g=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),f={},S=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),I=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);S?(!d||d.search(i.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(f[i.QueryParameterNames.CustomSpeechDeploymentId]=S):I&&(!d||d.search(i.QueryParameterNames.Language)===-1)&&(f[i.QueryParameterNames.Language]=I),u.autoDetectSourceLanguages!==void 0&&(f[i.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,f,d),d||(d=`${g}${this.universalUri}`);const k={};p.token!==void 0&&p.token!==""&&(k[p.headerName]=p.token),k[a.HeaderNames.ConnectionId]=l;const L=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",B=new r.WebsocketConnection(d,f,k,new c.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),L,l),U=B.uri;return u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,U),B}setV2UrlParams(u,p,l){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,i.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,i.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,i.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,i.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,i.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,i.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,i.QueryParameterNames.StableIntermediateThreshold]]).forEach((v,g)=>{this.setUrlParameter(g,v,u,p,l)});const h=JSON.parse(u.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(v=>{p[v]=h[v]})}};return qr.ConversationTranscriberConnectionFactory=n,qr}var Fr={},Ac;function mR(){if(Ac)return Fr;Ac=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.TranscriberConnectionFactory=void 0;const r=ie(),e=E(),t=ke(),s=b(),c=ne,a=Ae;let i=class extends t.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(o,u,p){let l=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),h=t.ConnectionFactoryBase.getHostSuffix(d),v="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,g=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,v),f={};this.setQueryParams(f,o,l),l||(l=g);const S={};u.token!==void 0&&u.token!==""&&(S[u.headerName]=u.token),S[c.HeaderNames.ConnectionId]=p,o.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,l);const I=o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(l,f,S,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(o),I,p)}setQueryParams(o,u,p){const l=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);l&&!(a.QueryParameterNames.CustomSpeechDeploymentId in o)&&(o[a.QueryParameterNames.CustomSpeechDeploymentId]=l),d&&!(a.QueryParameterNames.Language in o)&&(o[a.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",v=u.parameters.getProperty(s.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(h||v)&&(o[a.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,o,p)}};return Fr.TranscriberConnectionFactory=i,Fr}var xr={},kc;function SR(){if(kc)return xr;kc=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.TranslationConnectionFactory=void 0;const r=ie(),e=kn,t=E(),s=ke(),c=b(),a=ne,i=Ae;let n=class extends s.ConnectionFactoryBase{create(u,p,l){const d=this.getEndpointUrl(u),h={};u.autoDetectSourceLanguages!==void 0&&(h[i.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,u,d);const v={};p.token!==void 0&&p.token!==""&&(v[p.headerName]=p.token),v[a.HeaderNames.ConnectionId]=l,u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,d);const g=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(d,h,v,new c.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),g,l)}getEndpointUrl(u,p){const l=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),d=s.ConnectionFactoryBase.getHostSuffix(l);let h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(u.autoDetectSourceLanguages!==void 0?h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),p===!0?h:e.StringUtils.formatString(h,{region:l})}setQueryParams(u,p,l){u.from=p.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=p.parameters.getProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=p.recognitionMode===c.RecognitionMode.Interactive?"interactive":p.recognitionMode===c.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(p,u,l),this.setUrlParameter(t.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,i.QueryParameterNames.StableTranslation,p,u,l);const d=p.parameters.getProperty(t.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(u.voice=d,u.features="texttospeech")}};return xr.TranslationConnectionFactory=n,xr}var Vr={},Mc;function CR(){if(Mc)return Vr;Mc=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.EnumTranslation=void 0;const r=E(),e=b();let t=class{static implTranslateRecognitionResult(c,a=!1){let i=r.ResultReason.Canceled;switch(c){case e.RecognitionStatus.Success:i=r.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:i=a?r.ResultReason.RecognizedSpeech:r.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:i=r.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:i=r.ResultReason.Canceled;break}return i}static implTranslateCancelResult(c){let a=r.CancellationReason.EndOfStream;switch(c){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:a=r.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:a=r.CancellationReason.Error;break}return a}static implTranslateCancelErrorCode(c){let a=r.CancellationErrorCode.NoError;switch(c){case e.RecognitionStatus.Error:a=r.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:a=r.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:a=r.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:a=r.CancellationErrorCode.Forbidden;break;default:a=r.CancellationErrorCode.NoError;break}return a}static implTranslateErrorDetails(c){let a="The speech service encountered an internal error and could not continue.";switch(c){case r.CancellationErrorCode.Forbidden:a="The recognizer is using a free subscription that ran out of quota.";break;case r.CancellationErrorCode.BadRequestParameters:a="Invalid parameter or unsupported audio format in the request.";break;case r.CancellationErrorCode.TooManyRequests:a="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return a}};return Vr.EnumTranslation=t,Vr}var Up={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionStatus=r.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(r.SynthesisStatus||(r.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(r.RecognitionStatus||(r.RecognitionStatus={}))})(Up);var Ur={},Oc;function yR(){if(Oc)return Ur;Oc=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.TranslationSynthesisEnd=void 0;const r=b();let e=class Hp{constructor(s){this.privSynthesisEnd=JSON.parse(s),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(s){return new Hp(s)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Ur.TranslationSynthesisEnd=e,Ur}var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.TranslationHypothesis=void 0;const PR=z,RR=Pi;class Kn{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=RR.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new Kn(JSON.parse(e))}static fromTranslationResponse(e){PR.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const t=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,t.Translation=e,new Kn(t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return(e=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:e.Language}}Yi.TranslationHypothesis=Kn;var Hr={},Dc;function _R(){if(Dc)return Hr;Dc=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.TranslationPhrase=void 0;const r=z,e=b(),t=Pi;let s=class Js{constructor(a){this.privTranslationPhrase=a,this.privTranslationPhrase.RecognitionStatus=e.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=t.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(a){return new Js(JSON.parse(a))}static fromTranslationResponse(a){r.Contracts.throwIfNullOrUndefined(a,"translationResponse");const i=a.SpeechPhrase;return a.SpeechPhrase=void 0,i.Translation=a,i.Text=i.DisplayText,new Js(i)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var a;return(a=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:a.Language}get Confidence(){var a;return(a=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:a.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return Hr.TranslationPhrase=s,Hr}var Wr={},Nc;function ER(){if(Nc)return Wr;Nc=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.TranslationServiceRecognizer=void 0;const r=M(),e=E(),t=b();let s=class extends t.ConversationServiceRecognizer{constructor(a,i,n,o,u){super(a,i,n,o,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(p=>{p.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(a){const i=new e.PropertyCollection;let n=await this.processSpeechMessages(a);if(n)return!0;const o=async p=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),p.RecognitionStatus===t.RecognitionStatus.Success){const l=this.fireEventForResult(p,i);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,l)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(l.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const l=t.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),d=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,l,p.Text,p.Duration,this.privRequestSession.currentTurnAudioOffset+p.Offset,p.Language,p.Confidence,void 0,a.textBody,i);if(l===e.ResultReason.Canceled){const h=t.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),v=t.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,v,t.EnumTranslation.implTranslateErrorDetails(v))}else{if(!(this.privRequestSession.isSpeechEnded&&l===e.ResultReason.NoMatch&&p.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){const h=new e.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0}},u=(p,l)=>{const d=this.fireEventForResult(p,l);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}n=!0};switch(a.messageType===r.MessageType.Text&&i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"translation.hypothesis":u(t.TranslationHypothesis.fromJSON(a.textBody),i);break;case"translation.response":const p=JSON.parse(a.textBody);if(p.SpeechPhrase)await o(t.TranslationPhrase.fromTranslationResponse(p));else{const d=JSON.parse(a.textBody);d.SpeechHypothesis&&u(t.TranslationHypothesis.fromTranslationResponse(d),i)}break;case"translation.phrase":await o(t.TranslationPhrase.fromJSON(a.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(a.binaryBody,this.privRequestSession.sessionId),n=!0;break;case"audio.end":case"translation.synthesis.end":const l=t.TranslationSynthesisEnd.fromJSON(a.textBody);switch(l.SynthesisStatus){case t.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),h=new e.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,l.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case t.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}n=!0;break}return n}cancelRecognition(a,i,n,o,u){const p=new e.PropertyCollection;if(p.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[o]),this.privTranslationRecognizer.canceled){const l=new e.TranslationRecognitionCanceledEventArgs(a,n,u,o,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new e.TranslationRecognitionResult(void 0,i,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,p);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(a,i,n){try{const o=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(a),i,n);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,o)}catch{}}handleRecognizedCallback(a,i,n){try{const o=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(a),i,n);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,o)}catch{}}fireEventForResult(a,i){let n;if(a.Translation.Translations!==void 0){n=new e.Translations;for(const v of a.Translation.Translations)n.set(v.Language,v.Text||v.DisplayText)}let o,u;a instanceof t.TranslationPhrase?(a.Translation&&a.Translation.TranslationStatus===r.TranslationStatus.Success?o=e.ResultReason.TranslatedSpeech:o=e.ResultReason.RecognizedSpeech,u=a.Confidence):o=e.ResultReason.TranslatingSpeech;const p=a.Language,l=a.Offset+this.privRequestSession.currentTurnAudioOffset,d=new e.TranslationRecognitionResult(n,this.privRequestSession.requestId,o,a.Text,a.Duration,l,p,u,a.Translation.FailureReason,JSON.stringify(a),i);return new e.TranslationRecognitionEventArgs(d,l,this.privRequestSession.sessionId)}sendSynthesisAudio(a,i){const n=a===void 0?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,o=new e.TranslationSynthesisResult(n,a),u=new e.TranslationSynthesisEventArgs(o,i);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return Wr.TranslationServiceRecognizer=s,Wr}var es={};Object.defineProperty(es,"__esModule",{value:!0});es.SpeechDetected=void 0;class yo{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new yo(e)}get Offset(){return this.privSpeechStartDetected.Offset}}es.SpeechDetected=yo;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.SpeechHypothesis=void 0;class Po{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new Po(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}ts.SpeechHypothesis=Po;var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.SpeechKeyword=void 0;class Ro{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new Ro(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}rs.SpeechKeyword=Ro;var Kr={},zc;function IR(){if(zc)return Kr;zc=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.SpeechServiceRecognizer=void 0;const r=E(),e=b();let t=class extends e.ServiceRecognizerBase{constructor(c,a,i,n,o){super(c,a,i,n,o),this.privSpeechRecognizer=o}async processTypeSpecificMessages(c){let a;const i=new r.PropertyCollection;i.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,c.textBody);let n=!1;switch(c.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const o=e.SpeechHypothesis.fromJSON(c.textBody),u=o.Offset+this.privRequestSession.currentTurnAudioOffset;a=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,o.Text,o.Duration,u,o.Language,o.LanguageDetectionConfidence,void 0,void 0,c.textBody,i),this.privRequestSession.onHypothesis(u);const p=new r.SpeechRecognitionEventArgs(a,o.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,p)}catch{}n=!0;break;case"speech.phrase":const l=e.SimpleSpeechPhrase.fromJSON(c.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),r.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),v=e.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,v,e.EnumTranslation.implTranslateErrorDetails(v))}else{if(!(this.privRequestSession.isSpeechEnded&&d===r.ResultReason.NoMatch&&l.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])a=new r.SpeechRecognitionResult(this.privRequestSession.requestId,d,l.DisplayText,l.Duration,l.Offset+this.privRequestSession.currentTurnAudioOffset,l.Language,l.LanguageDetectionConfidence,void 0,void 0,c.textBody,i);else{const v=e.DetailedSpeechPhrase.fromJSON(c.textBody),g=v.Offset+this.privRequestSession.currentTurnAudioOffset,f=v.getJsonWithCorrectedOffsets(g);a=new r.SpeechRecognitionResult(this.privRequestSession.requestId,d,v.RecognitionStatus===e.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,g,v.Language,v.LanguageDetectionConfidence,void 0,void 0,f,i)}const h=new r.SpeechRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0;break}return n}cancelRecognition(c,a,i,n,o){const u=new r.PropertyCollection;if(u.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[n]),this.privSpeechRecognizer.canceled){const p=new r.SpeechRecognitionCanceledEventArgs(i,o,n,void 0,c);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new r.SpeechRecognitionResult(a,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,u);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return Kr.SpeechServiceRecognizer=t,Kr}var Jr={},Lc;function TR(){if(Lc)return Jr;Lc=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.ConversationTranscriptionServiceRecognizer=void 0;const r=E(),e=b();let t=class extends e.ServiceRecognizerBase{constructor(c,a,i,n,o){super(c,a,i,n,o),this.privConversationTranscriber=o,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const c=this.privSpeechContext.getSection("phraseDetection");c.mode="Conversation";const a={};a.mode="Anonymous",a.audioSessionId=this.privDiarizationSessionId,a.audioOffsetMs=0,c.speakerDiarization=a,this.privSpeechContext.setSection("phraseDetection",c)}}async processTypeSpecificMessages(c){let a;const i=new r.PropertyCollection;i.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,c.textBody);let n=!1;switch(c.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const o=e.SpeechHypothesis.fromJSON(c.textBody),u=o.Offset+this.privRequestSession.currentTurnAudioOffset;a=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,o.Text,o.Duration,u,o.Language,o.LanguageDetectionConfidence,void 0,void 0,c.textBody,i),this.privRequestSession.onHypothesis(u);const p=new r.ConversationTranscriptionEventArgs(a,o.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,p)}catch{}n=!0;break;case"speech.phrase":const l=e.SimpleSpeechPhrase.fromJSON(c.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),r.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),v=e.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,v,e.EnumTranslation.implTranslateErrorDetails(v))}else if(!(this.privRequestSession.isSpeechEnded&&d===r.ResultReason.NoMatch&&l.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])a=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,d,l.DisplayText,l.Duration,l.Offset+this.privRequestSession.currentTurnAudioOffset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,c.textBody,i);else{const v=e.DetailedSpeechPhrase.fromJSON(c.textBody),g=v.Offset+this.privRequestSession.currentTurnAudioOffset,f=v.getJsonWithCorrectedOffsets(g);a=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,d,v.RecognitionStatus===e.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,g,v.Language,v.LanguageDetectionConfidence,l.SpeakerId,void 0,f,i)}const h=new r.ConversationTranscriptionEventArgs(a,a.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}n=!0;break}return n}cancelRecognition(c,a,i,n,o){if(new r.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[n]),this.privConversationTranscriber.canceled){const p=new r.ConversationTranscriptionCanceledEventArgs(i,o,n,void 0,c);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,p)}catch{}}}};return Jr.ConversationTranscriptionServiceRecognizer=t,Jr}var Gr={},jc;function bR(){if(jc)return Gr;jc=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.TranscriptionServiceRecognizer=void 0;const r=M(),e=E(),t=b(),s=$e;let c=class extends t.ConversationServiceRecognizer{constructor(i,n,o,u,p){super(i,n,o,u,p),this.privTranscriberRecognizer=p,this.sendPrePayloadJSONOverride=l=>this.sendTranscriptionStartJSON(l),this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(i,n){if(this.privRequestSession.isRecognizing){const o=await this.fetchConnection();await this.sendSpeechEvent(o,this.createSpeechEventPayload(i,n))}}async sendMeetingSpeechEventAsync(i,n){if(this.privRequestSession.isRecognizing){const o=await this.fetchConnection();await this.sendSpeechEvent(o,this.createMeetingSpeechEventPayload(i,n))}}processTypeSpecificMessages(i){return this.processSpeechMessages(i)}handleRecognizedCallback(i,n,o){try{const u=new e.SpeechRecognitionEventArgs(i,n,o);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(i)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(i,n,o){try{const u=new e.SpeechRecognitionEventArgs(i,n,o);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(i,n,o,u,p){const l=new e.PropertyCollection;if(l.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new e.MeetingTranscriptionCanceledEventArgs(o,p,u,void 0,i);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(o,p,u,void 0,i);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new e.SpeechRecognitionResult(n,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,p,void 0,l);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(i){if(await this.sendSpeechContext(i,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const n=this.privTranscriberRecognizer.getMeetingInfo(),o=this.createMeetingSpeechEventPayload(n,"start");await this.sendSpeechEvent(i,o)}else{const n=this.privTranscriberRecognizer.getConversationInfo(),o=this.createSpeechEventPayload(n,"start");await this.sendSpeechEvent(i,o)}await this.sendWaveHeader(i)}sendSpeechEvent(i,n){const o=JSON.stringify(n);if(o)return i.send(new s.SpeechConnectionMessage(r.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",o))}createSpeechEventPayload(i,n){const o={id:"meeting",name:n,meeting:i.conversationProperties};return o.meeting.id=i.id,o.meeting.attendees=i.participants,o}createMeetingSpeechEventPayload(i,n){const o={id:"meeting",name:n,meeting:i.meetingProperties};return o.meeting.id=i.id,o.meeting.attendees=i.participants,o}};return Gr.TranscriptionServiceRecognizer=c,Gr}var Qr={},Bc;function wR(){if(Bc)return Qr;Bc=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.DetailedSpeechPhrase=void 0;const r=b();let e=class Wp{constructor(s){this.privDetailedSpeechPhrase=JSON.parse(s),this.privDetailedSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(s){return new Wp(s)}getJsonWithCorrectedOffsets(s){if(this.privDetailedSpeechPhrase.NBest){let c;for(const a of this.privDetailedSpeechPhrase.NBest)if(a.Words&&a.Words[0]){c=a.Words[0].Offset;break}if(c&&c<s){const a=s-c;for(const i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(const n of i.Words)n.Offset+=a;if(i.DisplayWords)for(const n of i.DisplayWords)n.Offset+=a}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return Qr.DetailedSpeechPhrase=e,Qr}var Xr={},$c;function AR(){if($c)return Xr;$c=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.SimpleSpeechPhrase=void 0;const r=b();let e=class Kp{constructor(s){this.privSimpleSpeechPhrase=JSON.parse(s),this.privSimpleSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(s){return new Kp(s)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return Xr.SimpleSpeechPhrase=e,Xr}var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.AddedLmIntent=void 0;class kR{constructor(e,t){this.modelImpl=e,this.intentName=t}}ns.AddedLmIntent=kR;var Zr={},qc;function MR(){if(qc)return Zr;qc=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.IntentServiceRecognizer=void 0;const r=M(),e=E(),t=b();let s=class extends t.ServiceRecognizerBase{constructor(a,i,n,o,u){super(a,i,n,o,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1}setIntents(a,i){this.privAddedLmIntents=a,this.privUmbrellaIntent=i,this.privIntentDataSent=!0}processTypeSpecificMessages(a){let i,n,o=!1;const u=new e.PropertyCollection;switch(a.messageType===r.MessageType.Text&&u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"speech.hypothesis":const l=t.SpeechHypothesis.fromJSON(a.textBody);if(i=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,e.ResultReason.RecognizingIntent,l.Text,l.Duration,l.Offset+this.privRequestSession.currentTurnAudioOffset,l.Language,l.LanguageDetectionConfidence,void 0,a.textBody,u),this.privRequestSession.onHypothesis(i.offset),n=new e.IntentRecognitionEventArgs(i,l.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,n)}catch{}o=!0;break;case"speech.phrase":const d=t.SimpleSpeechPhrase.fromJSON(a.textBody);i=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,a.textBody,u),n=new e.IntentRecognitionEventArgs(i,i.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(i)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||e.ResultReason.NoMatch===n.result.reason?(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),h()):this.privPendingIntentArgs=n,o=!0;break;case"response":if(n=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,n===void 0){if(a.textBody==="")return;n=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const v=t.IntentResponse.fromJSON(a.textBody);if(v!==null&&v.topScoringIntent&&v.topScoringIntent.intent){let g=this.privAddedLmIntents[v.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(g=this.privUmbrellaIntent),g){const f=g===void 0||g.intentName===void 0?v.topScoringIntent.intent:g.intentName;let S=n.result.reason;f!==void 0&&(S=e.ResultReason.RecognizedIntent);const I=n.result.properties!==void 0?n.result.properties:new e.PropertyCollection;I.setProperty(e.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,a.textBody),n=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult(f,n.result.resultId,S,n.result.text,n.result.duration,n.result.offset,void 0,void 0,n.result.errorDetails,n.result.json,I),n.offset,n.sessionId)}}if(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(n.result)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}o=!0;break}const p=new r.Deferred;return p.resolve(o),p.promise}cancelRecognition(a,i,n,o,u){const p=new e.PropertyCollection;if(p.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[o]),this.privIntentRecognizer.canceled){const l=new e.IntentRecognitionCanceledEventArgs(n,u,o,void 0,void 0,a);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new e.IntentRecognitionResult(void 0,i,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,p);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return Zr.IntentServiceRecognizer=s,Zr}var is={};Object.defineProperty(is,"__esModule",{value:!0});is.IntentResponse=void 0;class _o{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new _o(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}is.IntentResponse=_o;var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});var ss={},os={};Object.defineProperty(os,"__esModule",{value:!0});os.ServiceTelemetryListener=void 0;const Le=M(),Fc=Xi;class OR{constructor(e,t,s){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=s,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof Fc.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof Le.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Le.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Le.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Le.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Le.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Fc.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof Le.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof Le.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Le.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Le.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},s=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],s}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}os.ServiceTelemetryListener=OR;Object.defineProperty(ss,"__esModule",{value:!0});ss.RequestSession=void 0;const Ct=M(),Bn=Xi,DR=os;class NR{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=Ct.createNoDashGuid(),this.privAudioNodeId=Ct.createNoDashGuid(),this.privTurnDeferral=new Ct.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new DR.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new Bn.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,t){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?await this.onComplete():this.onEvent(new Bn.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new Bn.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,t){if(e===200){this.onEvent(new Bn.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=Ct.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new Ct.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),Ct.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}ss.RequestSession=NR;var as={};Object.defineProperty(as,"__esModule",{value:!0});as.SpeechContext=void 0;class zR{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e,t,s=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),s&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),t&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:t},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}as.SpeechContext=zR;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.DynamicGrammarBuilder=void 0;class LR{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const t=[];this.privPhrases.forEach(s=>{t.push({Text:s})}),e.Groups=[{Type:"Generic",Items:t}]}return e}}cs.DynamicGrammarBuilder=LR;var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});var Yr={},us={},ps={},Eo={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MessageDataStreamType=r.ActivityPayloadResponse=void 0;class e{constructor(s){this.privActivityResponse=JSON.parse(s)}static fromJSON(s){return new e(s)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}r.ActivityPayloadResponse=e,function(t){t[t.None=0]="None",t[t.TextToSpeechAudio=1]="TextToSpeechAudio"}(r.MessageDataStreamType||(r.MessageDataStreamType={}))})(Eo);Object.defineProperty(ps,"__esModule",{value:!0});ps.DialogServiceTurnState=void 0;const jR=Ge,BR=oe,$R=Eo;class qR{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===$R.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=BR.AudioOutputStream.createPullStream(),this.privAudioStream.format=t!==void 0?t:jR.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}ps.DialogServiceTurnState=qR;Object.defineProperty(us,"__esModule",{value:!0});us.DialogServiceTurnStateManager=void 0;const xc=ae,FR=ps;class xR{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new xc.InvalidOperationError("Service error: There is already a turn with id:"+e);const t=new FR.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new xc.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}}us.DialogServiceTurnStateManager=xR;var Vc;function VR(){if(Vc)return Yr;Vc=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.DialogServiceAdapter=void 0;const r=ie(),e=ht,t=M(),s=Ge,c=E(),a=us,i=b(),n=Eo,o=$e;let u=class extends i.ServiceRecognizerBase{constructor(l,d,h,v,g){super(l,d,h,v,g),this.privEvents=new t.EventSource,this.privDialogServiceConnector=g,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new a.DialogServiceTurnStateManager,this.recognizeOverride=(f,S,I)=>this.listenOnce(f,S,I),this.postConnectImplOverride=f=>this.dialogConnectImpl(f),this.configConnectionOverride=f=>this.configConnection(f),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(f=>{f.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(l){const d=t.createGuid(),h=t.createNoDashGuid(),v={context:{interactionId:d},messagePayload:JSON.parse(l),version:.5},g=JSON.stringify(v);await(await this.fetchConnection()).send(new o.SpeechConnectionMessage(t.MessageType.Text,"agent",h,"application/json",g))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(l){const d=new c.PropertyCollection;l.messageType===t.MessageType.Text&&d.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,l.textBody);let h,v;switch(l.path.toLowerCase()){case"speech.phrase":const f=i.SimpleSpeechPhrase.fromJSON(l.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+f.Offset+f.Duration),f.RecognitionStatus!==i.RecognitionStatus.TooManyRequests&&f.RecognitionStatus!==i.RecognitionStatus.Error){const U=this.fireEventForResult(f,d);if(this.privLastResult=U.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,U)}catch{}}v=!0;break;case"speech.hypothesis":const S=i.SpeechHypothesis.fromJSON(l.textBody),I=S.Offset+this.privRequestSession.currentTurnAudioOffset;h=new c.SpeechRecognitionResult(this.privRequestSession.requestId,c.ResultReason.RecognizingSpeech,S.Text,S.Duration,I,S.Language,S.LanguageDetectionConfidence,void 0,void 0,l.textBody,d),this.privRequestSession.onHypothesis(I);const k=new c.SpeechRecognitionEventArgs(h,S.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,k)}catch{}v=!0;break;case"speech.keyword":const L=i.SpeechKeyword.fromJSON(l.textBody);h=new c.SpeechRecognitionResult(this.privRequestSession.requestId,L.Status==="Accepted"?c.ResultReason.RecognizedKeyword:c.ResultReason.NoMatch,L.Text,L.Duration,L.Offset,void 0,void 0,void 0,void 0,l.textBody,d),L.Status!=="Accepted"&&(this.privLastResult=h);const B=new c.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,B)}catch{}v=!0;break;case"audio":{const U=l.requestId.toUpperCase(),ee=this.privTurnStateManager.GetTurn(U);try{l.binaryBody?ee.audioStream.write(l.binaryBody):ee.endAudioStream()}catch{}}v=!0;break;case"response":this.handleResponseMessage(l),v=!0;break}const g=new t.Deferred;return g.resolve(v),g.promise}async cancelRecognition(l,d,h,v,g){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const f=new c.PropertyCollection;f.setProperty(i.CancellationErrorCodePropertyName,c.CancellationErrorCode[v]);const S=new c.SpeechRecognitionCanceledEventArgs(h,g,v,void 0,l);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,S)}catch{}if(this.privSuccessCallback){const I=new c.SpeechRecognitionResult(void 0,c.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,f);try{this.privSuccessCallback(I),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(l,d,h){this.privRecognizerConfig.recognitionMode=l,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(c.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const v=this.connectImpl(),g=this.sendPreAudioMessages(),f=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),S=await this.privDialogAudioSource.format,I=await this.privDialogAudioSource.deviceInfo,k=new r.ReplayableAudioNode(f,S.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(k,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:I};try{await v,await g}catch(U){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.ConnectionFailure,U),Promise.resolve()}const L=new c.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,L),this.sendAudio(k).then(()=>{},async U=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.RuntimeError,U)})}dialogConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}receiveDialogMessageOverride(){const l=new t.Deferred,d=async()=>{try{const h=this.isDisposed(),v=!this.isDisposed()&&this.terminateMessageLoop;if(h||v){l.resolve(void 0);return}const f=await(await this.fetchConnection()).read();if(!f)return d();const S=o.SpeechConnectionMessage.fromConnectionMessage(f);switch(S.path.toLowerCase()){case"turn.start":{const W=S.requestId.toUpperCase(),Ce=this.privRequestSession.requestId.toUpperCase();W!==Ce?this.privTurnStateManager.StartTurn(W):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const k=i.SpeechDetected.fromJSON(S.textBody),L=new c.RecognitionEventArgs(k.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,L);break;case"speech.enddetected":let B;S.textBody.length>0?B=S.textBody:B="{ Offset: 0 }";const U=i.SpeechDetected.fromJSON(B);this.privRequestSession.onServiceRecognized(U.Offset+this.privRequestSession.currentTurnAudioOffset);const ee=new c.RecognitionEventArgs(U.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,ee);break;case"turn.end":{const W=S.requestId.toUpperCase(),Ce=this.privRequestSession.requestId.toUpperCase();if(W!==Ce)this.privTurnStateManager.CompleteTurn(W);else{const gt=new c.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,gt),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(Dn){this.privErrorCallback&&this.privErrorCallback(Dn)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(S)||this.serviceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(S.path.toLowerCase(),S.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,l.resolve()}};return d().catch(h=>{t.Events.instance.onEvent(new t.BackgroundEvent(h))}),l.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(l){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.RuntimeError,l)}return Promise.resolve()}async configConnection(l){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(l,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(l),l)}async sendPreAudioMessages(){const l=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(l,!0),await this.sendAgentContext(l),await this.sendWaveHeader(l)}sendAgentConfig(l){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(c.PropertyId.Conversation_DialogType)===c.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,l.send(new o.SpeechConnectionMessage(t.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(l){const d=t.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(c.PropertyId.Conversation_Speech_Activity_Template),g=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return l.send(new o.SpeechConnectionMessage(t.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",g))}fireEventForResult(l,d){const h=i.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),v=l.Offset+this.privRequestSession.currentTurnAudioOffset,g=new c.SpeechRecognitionResult(this.privRequestSession.requestId,h,l.DisplayText,l.Duration,v,l.Language,l.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(l),d);return new c.SpeechRecognitionEventArgs(g,v,this.privRequestSession.sessionId)}handleResponseMessage(l){const d=JSON.parse(l.textBody);switch(d.messageType.toLowerCase()){case"message":const h=l.requestId.toUpperCase(),v=n.ActivityPayloadResponse.fromJSON(l.textBody),g=this.privTurnStateManager.GetTurn(h);if(v.conversationId){const I=this.agentConfig.get();I.botInfo.conversationId=v.conversationId,this.agentConfig.set(I)}const f=g.processActivityPayload(v,s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),S=new c.ActivityReceivedEventArgs(v.messagePayload,f);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,S)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new c.TurnStatusReceivedEventArgs(l.textBody))}catch{}break;default:t.Events.instance.onEvent(new t.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(l){this.privEvents.onEvent(l),t.Events.instance.onEvent(l)}addKeywordContextData(){const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(l===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),v=l.split(";"),g=d===void 0?[]:d.split(";"),f=h===void 0?[]:h.split(";"),S=[];for(let I=0;I<v.length;I++){const k={};k.text=v[I],I<g.length&&(k.offset=Number(g[I])),I<f.length&&(k.duration=Number(f[I])),S.push(k)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:S,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return Yr.DialogServiceAdapter=u,Yr}var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.AgentConfig=void 0;class UR{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}ls.AgentConfig=UR;var Ls={},en={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.ConversationConnectionConfig=void 0;const HR=Mn;class fe extends HR.RestConfigBase{static get host(){return fe.privHost}static get apiVersion(){return fe.privApiVersion}static get clientAppId(){return fe.privClientAppId}static get defaultLanguageCode(){return fe.privDefaultLanguageCode}static get restPath(){return fe.privRestPath}static get webSocketPath(){return fe.privWebSocketPath}static get transcriptionEventKeys(){return fe.privTranscriptionEventKeys}}wt.ConversationConnectionConfig=fe;fe.privHost="dev.microsofttranslator.com";fe.privRestPath="/capito/room";fe.privApiVersion="2.0";fe.privDefaultLanguageCode="en-US";fe.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";fe.privWebSocketPath="/capito/translate";fe.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var Uc;function WR(){if(Uc)return en;Uc=1,Object.defineProperty(en,"__esModule",{value:!0}),en.ConversationManager=void 0;const r=ie(),e=z,t=E(),s=wt;let c=class{constructor(){this.privRequestParams=s.ConversationConnectionConfig.configParams,this.privErrors=s.ConversationConnectionConfig.restErrors,this.privHost=s.ConversationConnectionConfig.host,this.privApiVersion=s.ConversationConnectionConfig.apiVersion,this.privRestPath=s.ConversationConnectionConfig.restPath,this.privRestAdapter=new r.RestMessageAdapter({})}createOrJoin(i,n,o,u){try{e.Contracts.throwIfNullOrUndefined(i,"args");const p=i.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,s.ConversationConnectionConfig.defaultLanguageCode),l=i.getProperty(t.PropertyId.ConversationTranslator_Name,"conversation_host"),d=i.getProperty(t.PropertyId.ConversationTranslator_Host,this.privHost),h=i.getProperty(t.PropertyId.ConversationTranslator_CorrelationId),v=i.getProperty(t.PropertyId.SpeechServiceConnection_Key),g=i.getProperty(t.PropertyId.SpeechServiceConnection_Region),f=i.getProperty(t.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(p,"languageCode"),e.Contracts.throwIfNullOrWhitespace(l,"nickname"),e.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const S={};S[this.privRequestParams.apiVersion]=this.privApiVersion,S[this.privRequestParams.languageCode]=p,S[this.privRequestParams.nickname]=l;const I={};h&&(I[this.privRequestParams.correlationId]=h),I[this.privRequestParams.clientAppId]=s.ConversationConnectionConfig.clientAppId,n!==void 0?S[this.privRequestParams.roomId]=n:(e.Contracts.throwIfNullOrUndefined(g,this.privErrors.authInvalidSubscriptionRegion),I[this.privRequestParams.subscriptionRegion]=g,v?I[this.privRequestParams.subscriptionKey]=v:f?I[this.privRequestParams.authorization]=`Bearer ${f}`:e.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionKey));const k={};k.headers=I,this.privRestAdapter.options=k;const L=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(r.RestRequestType.Post,L,S,null).then(B=>{const U=r.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,B.headers);if(!B.ok){if(u){let W=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",B.status.toString()),Ce;try{Ce=JSON.parse(B.data),W+=` [${Ce.error.code}: ${Ce.error.message}]`}catch{W+=` [${B.data}]`}U&&(W+=` ${U}`),u(W)}return}const ee=JSON.parse(B.data);if(ee&&(ee.requestId=U),o){try{o(ee)}catch(W){u&&u(W)}o=void 0}}).catch(()=>{})}catch(p){if(u)if(p instanceof Error){const l=p;u(l.name+": "+l.message)}else u(p)}}leave(i,n){return new Promise((o,u)=>{try{e.Contracts.throwIfNullOrUndefined(i,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","token"));const p=i.getProperty(t.PropertyId.ConversationTranslator_Host,this.privHost),l=i.getProperty(t.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=n;const h={};l&&(h[this.privRequestParams.correlationId]=l);const v={};v.headers=h,this.privRestAdapter.options=v;const g=`https://${p}${this.privRestPath}`;this.privRestAdapter.request(r.RestRequestType.Delete,g,d,null).then(f=>{f.ok,o()}).catch(()=>{})}catch(p){if(p instanceof Error){const l=p;u(l.name+": "+l.message)}else u(p)}})}};return en.ConversationManager=c,en}var ut={},tn={},ds={},On={};Object.defineProperty(On,"__esModule",{value:!0});On.ConversationConnectionMessage=void 0;const KR=M();class JR extends KR.ConnectionMessage{constructor(e,t,s,c){super(e,t,s,c);const a=JSON.parse(this.textBody);a.type!==void 0&&(this.privConversationMessageType=a.type)}get conversationMessageType(){return this.privConversationMessageType}}On.ConversationConnectionMessage=JR;Object.defineProperty(ds,"__esModule",{value:!0});ds.ConversationWebsocketMessageFormatter=void 0;const pt=M(),Hc=On;class GR{toConnectionMessage(e){const t=new pt.Deferred;try{if(e.messageType===pt.MessageType.Text){const s=new Hc.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(s)}else e.messageType===pt.MessageType.Binary&&t.resolve(new Hc.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(s){t.reject(`Error formatting the message. Error: ${s}`)}return t.promise}fromConnectionMessage(e){const t=new pt.Deferred;try{if(e.messageType===pt.MessageType.Text){const s=`${e.textBody?e.textBody:""}`;t.resolve(new pt.RawWebsocketMessage(pt.MessageType.Text,s,e.id))}}catch(s){t.reject(`Error formatting the message. ${s}`)}return t.promise}}ds.ConversationWebsocketMessageFormatter=GR;var Wc;function QR(){if(Wc)return tn;Wc=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.ConversationConnectionFactory=void 0;const r=ie(),e=M(),t=z,s=E(),c=ke(),a=wt,i=ds;let n=class extends c.ConnectionFactoryBase{create(u,p,l){const d=u.parameters.getProperty(s.PropertyId.ConversationTranslator_Host,a.ConversationConnectionConfig.host),h=u.parameters.getProperty(s.PropertyId.ConversationTranslator_CorrelationId,e.createGuid()),v=`wss://${d}${a.ConversationConnectionConfig.webSocketPath}`,g=u.parameters.getProperty(s.PropertyId.ConversationTranslator_Token,void 0);t.Contracts.throwIfNullOrUndefined(g,"token");const f={};f[a.ConversationConnectionConfig.configParams.apiVersion]=a.ConversationConnectionConfig.apiVersion,f[a.ConversationConnectionConfig.configParams.token]=g,f[a.ConversationConnectionConfig.configParams.correlationId]=h;const S=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(v,f,{},new i.ConversationWebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),S,l)}};return tn.ConversationConnectionFactory=n,tn}var rn={},hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.ConversationRequestSession=void 0;const js=M();class XR{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=js.createNoDashGuid(),this.privRequestCompletionDeferral=new js.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=js.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach()}}onComplete(){}}hs.ConversationRequestSession=XR;var me={},Kc;function Qp(){if(Kc)return me;Kc=1,Object.defineProperty(me,"__esModule",{value:!0}),me.ConversationReceivedTranslationEventArgs=me.ParticipantsListEventArgs=me.ParticipantAttributeEventArgs=me.ParticipantEventArgs=me.LockRoomEventArgs=me.MuteAllEventArgs=void 0;const r=E();class e extends r.SessionEventArgs{constructor(o,u){super(u),this.privIsMuted=o}get isMuted(){return this.privIsMuted}}me.MuteAllEventArgs=e;class t extends r.SessionEventArgs{constructor(o,u){super(u),this.privIsLocked=o}get isMuted(){return this.privIsLocked}}me.LockRoomEventArgs=t;class s extends r.SessionEventArgs{constructor(o,u){super(u),this.privParticipant=o}get participant(){return this.privParticipant}}me.ParticipantEventArgs=s;class c extends r.SessionEventArgs{constructor(o,u,p,l){super(l),this.privKey=u,this.privValue=p,this.privParticipantId=o}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}me.ParticipantAttributeEventArgs=c;class a extends r.SessionEventArgs{constructor(o,u,p,l,d,h,v,g,f){super(f),this.privRoomId=o,this.privSessionToken=u,this.privTranslateTo=p,this.privProfanityFilter=l,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=v,this.privParticipants=g}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}me.ParticipantsListEventArgs=a;class i{constructor(o,u,p){this.privPayload=u,this.privCommand=o,this.privSessionId=p}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return me.ConversationReceivedTranslationEventArgs=i,me}var je={};Object.defineProperty(je,"__esModule",{value:!0});je.ConversationTranslatorCommandTypes=je.ConversationTranslatorMessageTypes=je.InternalParticipants=void 0;class ZR{constructor(e=[],t){this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(e===void 0)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(t=>t.id===e)}getParticipant(e){return this.participants.find(t=>t.id===e)}deleteParticipant(e){this.participants=this.participants.filter(t=>t.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}}je.InternalParticipants=ZR;je.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};je.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var Xp={},vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.CommandResponsePayload=void 0;const YR=r=>JSON.parse(r);class Io{constructor(e){this.privCommandResponse=YR(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new Io(e)}}vs.CommandResponsePayload=Io;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.ParticipantPayloadResponse=_t.ParticipantsListPayloadResponse=void 0;const e_=r=>JSON.parse(r),t_=r=>JSON.parse(r);class To{constructor(e){this.privParticipantsPayloadResponse=e_(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new To(e)}}_t.ParticipantsListPayloadResponse=To;class bo{constructor(e){this.privParticipantPayloadResponse=t_(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new bo(e)}}_t.ParticipantPayloadResponse=bo;var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.TextResponsePayload=Et.SpeechResponsePayload=void 0;const r_=r=>JSON.parse(r),n_=r=>JSON.parse(r);class wo{constructor(e){this.privSpeechResponse=r_(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new wo(e)}}Et.SpeechResponsePayload=wo;class Ao{constructor(e){this.privTextResponse=n_(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new Ao(e)}}Et.TextResponsePayload=Ao;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=vs;Object.defineProperty(r,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var t=_t;Object.defineProperty(r,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return t.ParticipantsListPayloadResponse}}),Object.defineProperty(r,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return t.ParticipantPayloadResponse}});var s=Et;Object.defineProperty(r,"SpeechResponsePayload",{enumerable:!0,get:function(){return s.SpeechResponsePayload}}),Object.defineProperty(r,"TextResponsePayload",{enumerable:!0,get:function(){return s.TextResponsePayload}})})(Xp);var Jc;function i_(){if(Jc)return rn;Jc=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.ConversationServiceAdapter=void 0;const r=M(),e=E(),t=b(),s=On,c=hs,a=Qp(),i=je,n=Xp;let o=class extends t.ServiceRecognizerBase{constructor(p,l,d,h,v){super(p,l,d,h,v),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=v,this.privConversationAuthentication=p,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=g=>this.conversationConnectImpl(g),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new c.ConversationRequestSession(r.createNoDashGuid()),this.privConversationConnectionFactory=l,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(p){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(p),await super.dispose(p)}async sendMessage(p){return(await this.fetchConnection()).send(new s.ConversationConnectionMessage(r.MessageType.Text,p))}async sendMessageAsync(p){await(await this.fetchConnection()).send(new s.ConversationConnectionMessage(r.MessageType.Text,p))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(p,l,d,h,v){this.terminateMessageLoop=!0;const g=new e.ConversationTranslationCanceledEventArgs(d,v,h,void 0,p);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,g)}catch{}}async conversationConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const p=new r.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return p.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,v=d.conversationMessageType.toLowerCase();let g=!1;try{switch(v){case"info":case"participant_command":case"command":const f=n.CommandResponsePayload.fromJSON(d.textBody);switch(f.command.toLowerCase()){case"participantlist":const U=n.ParticipantsListPayloadResponse.fromJSON(d.textBody),ee=U.participants.map(ye=>({avatar:ye.avatar,displayName:ye.nickname,id:ye.participantId,isHost:ye.ishost,isMuted:ye.ismuted,isUsingTts:ye.usetts,preferredLanguage:ye.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new a.ParticipantsListEventArgs(U.roomid,U.token,U.translateTo,U.profanityFilter,U.roomProfanityFilter,U.roomLocked,U.muteAll,ee,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(f.participantId,i.ConversationTranslatorCommandTypes.setTranslateToLanguages,f.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(f.participantId,i.ConversationTranslatorCommandTypes.setProfanityFiltering,f.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(f.participantId,i.ConversationTranslatorCommandTypes.setMute,f.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new a.MuteAllEventArgs(f.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(f.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(f.participantId,i.ConversationTranslatorCommandTypes.setUseTTS,f.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new a.LockRoomEventArgs(f.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(f.participantId,i.ConversationTranslatorCommandTypes.changeNickname,f.value,h));break;case"joinsession":const W=n.ParticipantPayloadResponse.fromJSON(d.textBody),Ce={avatar:W.avatar,displayName:W.nickname,id:W.participantId,isHost:W.ishost,isMuted:W.ismuted,isUsingTts:W.usetts,preferredLanguage:W.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new a.ParticipantEventArgs(Ce,h));break;case"leavesession":const gt={id:f.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new a.ParticipantEventArgs(gt,h));break;case"disconnectsession":const Dn={id:f.participantId};break;case"token":const Nn=new t.CognitiveTokenAuthentication(()=>{const ye=f.token;return Promise.resolve(ye)},()=>{const ye=f.token;return Promise.resolve(ye)});this.authentication=Nn,this.privConversationServiceConnector.onToken(Nn);break;default:break}break;case"partial":case"final":const S=n.SpeechResponsePayload.fromJSON(d.textBody),I=v==="final"?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,k=new e.ConversationTranslationResult(S.participantId,this.getTranslations(S.translations),S.language,S.id,I,S.recognition,void 0,void 0,d.textBody,void 0);S.isFinal?((k.text!==void 0&&k.text.length>0||S.id===this.privLastPartialUtteranceId)&&(g=!0),g&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new a.ConversationReceivedTranslationEventArgs(i.ConversationTranslatorMessageTypes.final,k,h))):k.text!==void 0&&(this.privLastPartialUtteranceId=S.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new a.ConversationReceivedTranslationEventArgs(i.ConversationTranslatorMessageTypes.partial,k,h)));break;case"translated_message":const L=n.TextResponsePayload.fromJSON(d.textBody),B=new e.ConversationTranslationResult(L.participantId,this.getTranslations(L.translations),L.language,void 0,void 0,L.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new a.ConversationReceivedTranslationEventArgs(i.ConversationTranslatorMessageTypes.instantMessage,B,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return p.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const p=this.receiveConversationMessageOverride();try{return await p}catch(l){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,l),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(p=>p.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(p=>p),this.privConnectionConfigPromise)}getTranslations(p){let l;if(p!==void 0){l=new e.Translations;for(const d of p)l.set(d.lang,d.translation)}return l}};return rn.ConversationServiceAdapter=o,rn}var Gc;function s_(){if(Gc)return ut;Gc=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.ConversationTranslatorRecognizer=ut.ConversationRecognizerFactory=void 0;const r=b(),e=M(),t=z,s=E(),c=QR(),a=i_();class i{static fromConfig(u,p,l){return new n(u,p,l)}}ut.ConversationRecognizerFactory=i;let n=class extends s.Recognizer{constructor(u,p,l){const d=p;t.Contracts.throwIfNull(d,"speechConfig");const h=u;t.Contracts.throwIfNull(h,"conversationImpl"),super(l,d.properties,new c.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=s.Connection.fromRecognizer(this),this.privProperties.getProperty(s.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,p,l){try{t.Contracts.throwIfDisposed(this.privIsDisposed),t.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(p,l)}catch(d){if(l)if(d instanceof Error){const h=d;l(h.name+": "+h.message)}else l(d)}}disconnect(u,p){try{t.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},l=>{p&&p(l)})}catch(l){if(p)if(l instanceof Error){const d=l;p(d.name+": "+d.message)}else p(l);this.dispose(!0).catch(d=>{e.Events.instance.onEvent(new e.BackgroundEvent(d))})}}sendRequest(u,p,l){try{t.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,p,l)}catch(d){if(l)if(d instanceof Error){const h=d;l(h.name+": "+h.message)}else l(d);this.dispose(!0).catch(h=>{e.Events.instance.onEvent(new e.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new r.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,p,l,d){const h=l;return new a.ConversationServiceAdapter(u,p,h,d,this)}sendMessage(u,p,l){const d=this.privReco;((v,g,f)=>{v!==void 0?v.then(()=>{try{g&&g()}catch(S){f&&f(`'Unhandled error on promise callback: ${S}'`)}},S=>{try{f&&f(S)}catch{}}):f&&f("Null promise")})(d.sendMessageAsync(u),p,l),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return ut.ConversationTranslatorRecognizer=n,ut}var nn={},Qc;function o_(){if(Qc)return nn;Qc=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.TranscriberRecognizer=void 0;const r=M(),e=z,t=E(),s=b();let c=class extends t.Recognizer{constructor(i,n){const o=i;e.Contracts.throwIfNull(o,"speechTranslationConfig");const u=n;e.Contracts.throwIfNull(u,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(o.speechRecognitionLanguage,t.PropertyId[t.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,o.properties,new s.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(t.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){e.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,i)}set conversation(i){e.Contracts.throwIfNullOrUndefined(i,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=i}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(i){e.Contracts.throwIfNullOrUndefined(i,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=i}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(i,n){r.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),i,n)}stopContinuousRecognitionAsync(i,n){r.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),i,n)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(i,n){const o=this.privReco;e.Contracts.throwIfNullOrUndefined(o,"serviceRecognizer"),await o.sendSpeechEventAsync(i,n)}async pushMeetingEvent(i,n){const o=this.privReco;e.Contracts.throwIfNullOrUndefined(o,"serviceRecognizer"),await o.sendMeetingSpeechEventAsync(i,n)}async enforceAudioGating(){const o=(await this.audioConfig.format).channels;if(o===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(o!==8)throw new Error(`Unsupported audio configuration: Detected ${o}-channel audio`)}connectMeetingCallbacks(i){this.isMeetingRecognizer=!0,this.canceled=(n,o)=>{i.canceled&&i.canceled(i,o)},this.recognizing=(n,o)=>{i.transcribing&&i.transcribing(i,o)},this.recognized=(n,o)=>{i.transcribed&&i.transcribed(i,o)},this.sessionStarted=(n,o)=>{i.sessionStarted&&i.sessionStarted(i,o)},this.sessionStopped=(n,o)=>{i.sessionStopped&&i.sessionStopped(i,o)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(i){this.privDisposedRecognizer||(i&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(i))}createRecognizerConfig(i){return new s.RecognizerConfig(i,this.properties)}createServiceRecognizer(i,n,o,u){const p=o;return new s.TranscriptionServiceRecognizer(i,n,p,u,this)}};return nn.TranscriberRecognizer=c,nn}var Xc;function a_(){return Xc||(Xc=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=WR();Object.defineProperty(r,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var t=wt;Object.defineProperty(r,"ConversationConnectionConfig",{enumerable:!0,get:function(){return t.ConversationConnectionConfig}});var s=s_();Object.defineProperty(r,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return s.ConversationRecognizerFactory}});var c=o_();Object.defineProperty(r,"TranscriberRecognizer",{enumerable:!0,get:function(){return c.TranscriberRecognizer}});var a=Qp();Object.defineProperty(r,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(r,"LockRoomEventArgs",{enumerable:!0,get:function(){return a.LockRoomEventArgs}}),Object.defineProperty(r,"MuteAllEventArgs",{enumerable:!0,get:function(){return a.MuteAllEventArgs}}),Object.defineProperty(r,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return a.ParticipantAttributeEventArgs}}),Object.defineProperty(r,"ParticipantEventArgs",{enumerable:!0,get:function(){return a.ParticipantEventArgs}}),Object.defineProperty(r,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return a.ParticipantsListEventArgs}});var i=je;Object.defineProperty(r,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return i.ConversationTranslatorCommandTypes}}),Object.defineProperty(r,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return i.ConversationTranslatorMessageTypes}}),Object.defineProperty(r,"InternalParticipants",{enumerable:!0,get:function(){return i.InternalParticipants}})}(Ls)),Ls}var ko={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SynthesisAudioMetadata=r.MetadataType=void 0,function(t){t.WordBoundary="WordBoundary",t.Bookmark="Bookmark",t.Viseme="Viseme",t.SentenceBoundary="SentenceBoundary",t.SessionEnd="SessionEnd",t.AvatarSignal="TalkingAvatarSignal"}(r.MetadataType||(r.MetadataType={}));class e{constructor(s){this.privSynthesisAudioMetadata=JSON.parse(s)}static fromJSON(s){return new e(s)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}r.SynthesisAudioMetadata=e})(ko);var sn={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.SynthesisStartedEvent=Me.ConnectingToSynthesisServiceEvent=Me.SynthesisTriggeredEvent=Me.SpeechSynthesisEvent=void 0;const Zc=M();class fs extends Zc.PlatformEvent{constructor(e,t,s=Zc.EventType.Info){super(e,s),this.privRequestId=t}get requestId(){return this.privRequestId}}Me.SpeechSynthesisEvent=fs;class c_ extends fs{constructor(e,t,s){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=s}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Me.SynthesisTriggeredEvent=c_;class u_ extends fs{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}Me.ConnectingToSynthesisServiceEvent=u_;class p_ extends fs{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}Me.SynthesisStartedEvent=p_;var Yc;function l_(){if(Yc)return sn;Yc=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.SynthesisTurn=void 0;const r=M(),e=oe,t=E(),s=ko,c=Me;let a=class Gs{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=r.createNoDashGuid(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(n){this.privStreamId=n}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(n){this.privAudioOutputFormat=n}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const n=new t.PropertyCollection;return n.setProperty(t.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),n}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const n=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(n),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(n,o,u,p){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=n,this.privRawText=o,this.privIsSSML=u,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",p!==void 0&&(this.privTurnAudioDestination=p,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new c.SynthesisTriggeredEvent(this.requestId,void 0,p===void 0?void 0:p.id()))}onPreConnectionStart(n){this.privAuthFetchEventId=n,this.onEvent(new c.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(n){n&&this.onComplete()}onConnectionEstablishCompleted(n){if(n===200){this.onEvent(new c.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else n===403&&this.onComplete()}onServiceResponseMessage(n){const o=JSON.parse(n);this.streamId=o.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(n){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred;const o=JSON.parse(n);o.webrtc&&(this.privWebRTCSDP=o.webrtc.connectionString)}onAudioChunkReceived(n){this.isSynthesizing&&(this.privAudioOutputStream.write(n),this.privBytesReceived+=n.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(n))}onTextBoundaryEvent(n){this.updateTextOffset(n.Data.text.Text,n.Type)}onVisemeMetadataReceived(n){n.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=n.Data.AnimationChunk)}onSessionEnd(n){this.privAudioDuration=n.Data.Offset}async constructSynthesisResult(){const n=await this.getAllReceivedAudioWithHeader();return new t.SpeechSynthesisResult(this.requestId,t.ResultReason.SynthesizingAudioCompleted,n,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const n=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",n}onEvent(n){r.Events.instance.onEvent(n)}static isXmlTag(n){return n.length>=2&&n[0]==="<"&&n[n.length-1]===">"}updateTextOffset(n,o){o===s.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(n,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+n.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Gs.isXmlTag(n)&&this.updateTextOffset(n,o))):(this.privSentenceOffset=this.privRawText.indexOf(n,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+n.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Gs.isXmlTag(n)&&this.updateTextOffset(n,o)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(n){return this.privRawText.indexOf("<",n+1)>this.privRawText.indexOf(">",n+1)}};return sn.SynthesisTurn=a,sn}var on={},eu;function d_(){if(eu)return on;eu=1,Object.defineProperty(on,"__esModule",{value:!0}),on.SynthesisAdapterBase=void 0;const r=M(),e=E(),t=b(),s=$e;let c=class{constructor(i,n,o,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!i)throw new r.ArgumentNullError("authentication");if(!n)throw new r.ArgumentNullError("connectionFactory");if(!o)throw new r.ArgumentNullError("synthesizerConfig");this.privAuthentication=i,this.privConnectionFactory=n,this.privSynthesizerConfig=o,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new t.SynthesisTurn,this.privConnectionEvents=new r.EventSource,this.privServiceEvents=new r.EventSource,this.privSynthesisContext=new t.SynthesisContext,this.privAgentConfig=new t.AgentConfig,this.connectionEvents.attach(p=>{if(p.name==="ConnectionClosedEvent"){const l=p;l.statusCode!==1e3&&this.cancelSynthesisLocal(e.CancellationReason.Error,l.statusCode===1007?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${l.reason} websocket error code: ${l.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(i){this.privActivityTemplate=i}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(i){this.privAudioOutputFormat=i,this.privSynthesisTurn.audioOutputFormat=i,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=i),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=i)}isDisposed(){return this.privIsDisposed}async dispose(i){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(i)}async connect(){await this.connectImpl()}async sendNetworkMessage(i,n){const o=typeof n=="string"?r.MessageType.Text:r.MessageType.Binary,u=typeof n=="string"?"application/json":"";return(await this.fetchConnection()).send(new s.SpeechConnectionMessage(o,i,this.privSynthesisTurn.requestId,u,n))}async Speak(i,n,o,u,p,l){let d;if(n?d=i:d=this.privSynthesizer.buildSsml(i),this.speakOverride!==void 0)return this.speakOverride(d,o,u,p);this.privSuccessCallback=u,this.privErrorCallback=p,this.privSynthesisTurn.startNewSynthesis(o,i,n,l);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,o),this.onSynthesisStarted(o),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new s.SpeechConnectionMessage(r.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(i,n,o,u){const p=new e.PropertyCollection;p.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[o]);const l=new e.SpeechSynthesisResult(i,e.ResultReason.Canceled,void 0,u,p);if(this.onSynthesisCancelled(l),this.privSuccessCallback)try{this.privSuccessCallback(l)}catch{}}cancelSynthesisLocal(i,n,o){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,i,n,o))}processTypeSpecificMessages(i){return!0}async receiveMessage(){try{const n=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!n)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const o=s.SpeechConnectionMessage.fromConnectionMessage(n);if(o.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(o.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(o.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(o.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===o.streamId.toLowerCase()&&o.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(o.binaryBody),this.onSynthesizing(o.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(o.binaryBody));break;case"audio.metadata":const u=t.SynthesisAudioMetadata.fromJSON(o.textBody).Metadata;for(const l of u)switch(l.Type){case t.MetadataType.WordBoundary:case t.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(l);const d=new e.SpeechSynthesisWordBoundaryEventArgs(l.Data.Offset,l.Data.Duration,l.Data.text.Text,l.Data.text.Length,l.Type===t.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,l.Data.text.BoundaryType);this.onWordBoundary(d);break;case t.MetadataType.Bookmark:const h=new e.SpeechSynthesisBookmarkEventArgs(l.Data.Offset,l.Data.Bookmark);this.onBookmarkReached(h);break;case t.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(l),l.Data.IsLastAnimation){const v=new e.SpeechSynthesisVisemeEventArgs(l.Data.Offset,l.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(v)}break;case t.MetadataType.AvatarSignal:this.onAvatarEvent(l);break;case t.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(l);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let p;try{p=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(p)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.onSynthesisCompleted(p);break;default:this.processTypeSpecificMessages(o)||this.privServiceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(o.path.toLowerCase(),o.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(i){this.setSynthesisContextSynthesisSection();const n=this.synthesisContext.toJSON();if(n)return i.send(new s.SpeechConnectionMessage(r.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",n))}setSpeechConfigSynthesisSection(){}connectImpl(i=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(o=>o.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=r.createNoDashGuid(),this.privConnectionId=r.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const n=i?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=n.then(async o=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,o,this.privConnectionId);u.events.attach(l=>{this.connectionEvents.onEvent(l)});const p=await u.open();return p.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(p.statusCode),Promise.resolve(u)):p.statusCode===403&&!i?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(p.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${p.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${p.reason}`))},o=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(o)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(i,n){if(n)return i.send(new s.SpeechConnectionMessage(r.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",n))}sendSsmlMessage(i,n,o){return i.send(new s.SpeechConnectionMessage(r.MessageType.Text,"ssml",o,"application/ssml+xml",n))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(i=>i.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const i=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(i):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(i,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),i)}onAvatarEvent(i){}onSynthesisStarted(i){}onSynthesizing(i){}onSynthesisCancelled(i){}onSynthesisCompleted(i){}onWordBoundary(i){}onVisemeReceived(i){}onBookmarkReached(i){}};return on.SynthesisAdapterBase=c,c.telemetryDataEnabled=!0,on}var an={},tu;function h_(){if(tu)return an;tu=1,Object.defineProperty(an,"__esModule",{value:!0}),an.AvatarSynthesisAdapter=void 0;const r=E(),e=b();let t=class extends e.SynthesisAdapterBase{constructor(c,a,i,n,o){super(c,a,i,void 0),this.privAvatarSynthesizer=n,this.privSynthesizer=n,this.privAvatarConfig=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var c,a,i,n,o,u,p,l,d,h,v,g,f,S,I,k;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(c=this.privAvatarConfig.videoFormat)==null?void 0:c.bitrate,codec:(a=this.privAvatarConfig.videoFormat)==null?void 0:a.codec,crop:{bottomRight:{x:(o=(n=(i=this.privAvatarConfig.videoFormat)==null?void 0:i.cropRange)==null?void 0:n.bottomRight)==null?void 0:o.x,y:(l=(p=(u=this.privAvatarConfig.videoFormat)==null?void 0:u.cropRange)==null?void 0:p.bottomRight)==null?void 0:l.y},topLeft:{x:(v=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:v.x,y:(S=(f=(g=this.privAvatarConfig.videoFormat)==null?void 0:g.cropRange)==null?void 0:f.topLeft)==null?void 0:S.y}},resolution:{height:(I=this.privAvatarConfig.videoFormat)==null?void 0:I.height,width:(k=this.privAvatarConfig.videoFormat)==null?void 0:k.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(c){if(this.privAvatarSynthesizer.avatarEventReceived){const a=new r.AvatarEventArgs(c.Data.Offset,c.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,a)}catch{}}}};return an.AvatarSynthesisAdapter=t,an}var cn={},ru;function v_(){if(ru)return cn;ru=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.SpeechSynthesisAdapter=void 0;const r=E(),e=b();let t=class extends e.SynthesisAdapterBase{constructor(c,a,i,n,o){super(c,a,i,o),this.privSpeechSynthesizer=n,this.privSynthesizer=n}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(c){const a=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(c,r.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,a)}onSynthesizing(c){if(this.privSpeechSynthesizer.synthesizing)try{const a=this.privSynthesisTurn.audioOutputFormat.addHeader(c),i=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(this.privSynthesisTurn.requestId,r.ResultReason.SynthesizingAudio,a));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,i)}catch{}}onSynthesisCancelled(c){if(this.privSpeechSynthesizer.SynthesisCanceled){const a=new r.SpeechSynthesisEventArgs(c);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,a)}catch{}}}onSynthesisCompleted(c){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new r.SpeechSynthesisEventArgs(c))}catch{}}onWordBoundary(c){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,c)}catch{}}onVisemeReceived(c){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,c)}catch{}}onBookmarkReached(c){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,c)}catch{}}};return cn.SpeechSynthesisAdapter=t,cn}var un={},nu;function f_(){if(nu)return un;nu=1,Object.defineProperty(un,"__esModule",{value:!0}),un.SynthesisRestAdapter=void 0;const r=ie(),e=E(),t=ke(),s=ne;let c=class{constructor(i,n){let o=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!o){const p=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),l=t.ConnectionFactoryBase.getHostSuffix(p);o=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${p}.tts.speech${l}`)}this.privUri=`${o}/cognitiveservices/voices/list`;const u=r.RestConfigBase.requestOptions;this.privRestAdapter=new r.RestMessageAdapter(u),this.privAuthentication=n}getVoicesList(i){return this.privRestAdapter.setHeaders(s.HeaderNames.ConnectionId,i),this.privAuthentication.fetch(i).then(n=>(this.privRestAdapter.setHeaders(n.headerName,n.token),this.privRestAdapter.request(r.RestRequestType.Get,this.privUri)))}};return un.SynthesisRestAdapter=c,un}var Bs={},iu;function g_(){return iu||(iu=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SynthesizerConfig=r.SynthesisServiceType=void 0;const e=b();var t;(function(c){c[c.Standard=0]="Standard",c[c.Custom=1]="Custom"})(t=r.SynthesisServiceType||(r.SynthesisServiceType={}));class s{constructor(a,i){this.privSynthesisServiceType=t.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=a||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=i}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(a){this.privSynthesisServiceType=a}set synthesisVideoSection(a){this.privSpeechServiceConfig.Context.synthesis={video:a}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}r.SynthesizerConfig=s}(Bs)),Bs}var pn={},su;function m_(){if(su)return pn;su=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.SynthesisContext=void 0;const r=E();let e=class{constructor(){this.privContext={}}setSection(s,c){this.privContext[s]=c}set audioOutputFormat(s){this.privAudioOutputFormat=s}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(s){const c=this.buildSynthesisContext(s);this.setSection("synthesis",c)}buildSynthesisContext(s){return{audio:{metadataOptions:{bookmarkEnabled:!!(s!=null&&s.bookmarkReached),punctuationBoundaryEnabled:s==null?void 0:s.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(s!=null&&s.wordBoundary)),sentenceBoundaryEnabled:s==null?void 0:s.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(s!=null&&s.visemeReceived),wordBoundaryEnabled:s==null?void 0:s.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(s!=null&&s.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:s==null?void 0:s.autoDetectSourceLanguage}}}};return pn.SynthesisContext=e,pn}var ln={},ou;function S_(){if(ou)return ln;ou=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.SpeakerRecognitionConfig=void 0;const r=b();let e=class{constructor(s,c){this.privContext=s||new r.Context(null),this.privParameters=c}get parameters(){return this.privParameters}get Context(){return this.privContext}};return ln.SpeakerRecognitionConfig=e,ln}var dn={},au;function C_(){if(au)return dn;au=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.SpeakerServiceRecognizer=void 0;const r=ie(),e=M(),t=E(),s=b(),c=$e;let a=class extends s.ServiceRecognizerBase{constructor(n,o,u,p,l){super(n,o,u,p,l),this.privSpeakerRecognizer=l,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(n){let o=!1;const u=new t.PropertyCollection;switch(n.messageType===e.MessageType.Text&&u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,n.textBody),n.path.toLowerCase()){case"speaker.response":const l=JSON.parse(n.textBody);let d;l.status.statusCode.toLowerCase()!=="success"?d=new t.SpeakerRecognitionResult(l,t.ResultReason.Canceled,t.CancellationErrorCode.ServiceError,l.status.reason):d=new t.SpeakerRecognitionResult(l,t.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),o=!0;break}const p=new e.Deferred;return p.resolve(o),p.promise}cancelRecognition(n,o,u,p,l){if(new t.PropertyCollection().setProperty(s.CancellationErrorCodePropertyName,t.CancellationErrorCode[p]),this.privResultDeferral){const h=new t.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:l,reason:l}},t.ResultReason.Canceled,p,l);try{this.privResultDeferral.resolve(h)}catch(v){this.privResultDeferral.reject(v)}}}async recognizeSpeakerOnce(n){this.privSpeakerModel=n,this.voiceProfileType=n.scenario,this.privResultDeferral||(this.privResultDeferral=new e.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(t.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const o=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(n)),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),l=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new r.ReplayableAudioNode(p,l.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await o,await u}catch(f){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,f)}const v=new t.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(h).then(()=>{},f=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,f)}),this.privResultDeferral.promise}async sendPreAudioMessages(n){const o=await this.fetchConnection();await this.sendSpeakerRecognition(o,n)}async sendSpeakerRecognition(n,o){const u=JSON.stringify(o);return n.send(new c.SpeechConnectionMessage(e.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(n){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:n.profileIds,scenario:n.scenario}}};return dn.SpeakerServiceRecognizer=a,dn}var hn={},cu;function y_(){if(cu)return hn;cu=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.VoiceServiceRecognizer=void 0;const r=ie(),e=M(),t=E(),s=b(),c=$e;let a=class extends s.ServiceRecognizerBase{constructor(n,o,u,p,l){super(n,o,u,p,l),this.privDeferralMap=new e.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(n){this.privSpeakerAudioSource=n}processTypeSpecificMessages(n){let o=!1;const u=new t.PropertyCollection;switch(n.messageType===e.MessageType.Text&&u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,n.textBody),n.path.toLowerCase()){case"speaker.profiles":const l=JSON.parse(n.textBody);switch(l.operation.toLowerCase()){case"create":this.handleCreateResponse(l,n.requestId);break;case"delete":case"reset":this.handleResultResponse(l,n.requestId);break;case"fetch":const g=JSON.parse(n.textBody);this.handleFetchResponse(g,n.requestId);break}o=!0;break;case"speaker.phrases":const d=JSON.parse(n.textBody);this.handlePhrasesResponse(d,n.requestId),o=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(n.textBody),v=new t.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(n.requestId)&&this.privDeferralMap.complete(n.requestId,v),this.privRequestSession.onSpeechEnded(),o=!0;break}const p=new e.Deferred;return p.resolve(o),p.promise}cancelRecognition(n,o,u,p,l){new t.PropertyCollection().setProperty(s.CancellationErrorCodePropertyName,t.CancellationErrorCode[p]);const h=new t.VoiceProfileEnrollmentResult(t.ResultReason.Canceled,l,l);this.privDeferralMap.getId(o)&&this.privDeferralMap.complete(o,h)}async createProfile(n,o){this.voiceProfileType=n.toString();const u=this.connectImpl();try{const p=new e.Deferred;return await u,await this.sendCreateProfile(p,n,o),this.receiveMessage(),p.promise}catch(p){throw p}}async resetProfile(n){return this.voiceProfileType=n.profileType.toString(),this.sendCommonRequest("reset",n.profileType,n)}async deleteProfile(n){return this.voiceProfileType=n.profileType.toString(),this.sendCommonRequest("delete",n.profileType,n)}async retrieveEnrollmentResult(n){return this.voiceProfileType=n.profileType.toString(),this.privExpectedProfileId=n.profileId,this.sendCommonRequest("fetch",n.profileType,n)}async getAllProfiles(n){return this.voiceProfileType=n.toString(),this.sendCommonRequest("fetch",n)}async getActivationPhrases(n,o){this.voiceProfileType=n.toString();const u=this.connectImpl();try{const p=new e.Deferred;return await u,await this.sendPhrasesRequest(p,n,o),this.receiveMessage(),p.promise}catch(p){throw p}}async enrollProfile(n){this.voiceProfileType=n.profileType.toString();const o=new e.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(t.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),p=this.sendPreAudioMessages(n,o),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,v=new r.ReplayableAudioNode(l,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(v,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await p}catch(S){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,S)}const g=new t.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,g),this.receiveMessage(),this.sendAudio(v).then(()=>{},S=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,S)}),o.promise}async sendPreAudioMessages(n,o){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(n.profileType),n)}async sendPhrasesRequest(n,o,u){const p=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,n);const l=this.scenarioFrom(o),d={locale:u,scenario:l};return p.send(new c.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(n,o,u){const p=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,n);const l=o===t.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":o===t.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:l};return p.send(new c.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(n,o,u=void 0){const p=this.connectImpl();try{const l=new e.Deferred;this.privRequestSession.onSpeechContext(),await p;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,l),await this.sendBaseRequest(d,n,this.scenarioFrom(o),u),this.receiveMessage(),l.promise}catch(l){throw l}}async sendBaseRequest(n,o,u,p){const l={scenario:u};return p?l.profileIds=[p.profileId]:l.maxPageSize=-1,n.send(new c.SpeechConnectionMessage(e.MessageType.Text,`speaker.profile.${o}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(l)))}extractSpeakerContext(n){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:n.profileIds,scenario:n.scenario}}handlePhrasesResponse(n,o){if(this.privDeferralMap.getId(o))if(n.status.statusCode.toLowerCase()!=="success"){const u=t.ResultReason.Canceled,p=new t.VoiceProfilePhraseResult(u,n.status.statusCode,n.passPhraseType,[]);this.privDeferralMap.complete(o,p)}else if(n.phrases&&n.phrases.length>0){const u=t.ResultReason.EnrollingVoiceProfile,p=new t.VoiceProfilePhraseResult(u,n.status.statusCode,n.passPhraseType,n.phrases);this.privDeferralMap.complete(o,p)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${o} not found`)}handleCreateResponse(n,o){if(n.profiles&&n.profiles.length>0)if(this.privDeferralMap.getId(o)){const u=n.profiles.map(p=>p.profileId);this.privDeferralMap.complete(o,u)}else throw new Error(`Voice Profile create request for requestID ${o} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(n,o){if(this.privDeferralMap.getId(o)){const u=n.operation.toLowerCase()==="delete"?t.ResultReason.DeletedVoiceProfile:t.ResultReason.ResetVoiceProfile,p=n.status.statusCode.toLowerCase()==="success"?u:t.ResultReason.Canceled,l=new t.VoiceProfileResult(p,`statusCode: ${n.status.statusCode}, errorDetails: ${n.status.reason}`);this.privDeferralMap.complete(o,l)}else throw new Error(`Voice Profile create request for requestID ${o} not found`)}handleFetchResponse(n,o){if(this.privDeferralMap.getId(o)&&n.profiles[0]){if(this.privExpectedProfileId&&n.profiles.length===1&&n.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=n.profiles[0],p=new t.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),n.status.reason);this.privDeferralMap.complete(o,p)}else if(n.profiles.length>0){const u=n.profiles,p=[];for(const l of u)p.push(new t.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(l.enrollmentStatus),JSON.stringify(l),n.status.reason));this.privDeferralMap.complete(o,p)}}else throw new Error(`Voice Profile fetch request for requestID ${o} not found`)}enrollmentReasonFrom(n){switch(n.toLowerCase()){case"enrolled":return t.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return t.ResultReason.Canceled;default:return t.ResultReason.EnrollingVoiceProfile}}scenarioFrom(n){return n===t.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":n===t.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return hn.VoiceServiceRecognizer=a,hn}var Zp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.type=r.connectivity=r.Device=r.OS=r.System=r.Context=r.SpeechServiceConfig=void 0;class e{constructor(n){this.context=n}serialize(){return JSON.stringify(this,(n,o)=>{if(o&&typeof o=="object"&&!Array.isArray(o)){const u={};for(const p in o)Object.hasOwnProperty.call(o,p)&&(u[p&&p.charAt(0).toLowerCase()+p.substring(1)]=o[p]);return u}return o})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(n){this.recognition=n.toLowerCase()}}r.SpeechServiceConfig=e;class t{constructor(n){this.system=new s,this.os=n}}r.Context=t;class s{constructor(){const n="1.36.0";this.name="SpeechSDK",this.version=n,this.build="JavaScript",this.lang="JavaScript"}}r.System=s;class c{constructor(n,o,u){this.platform=n,this.name=o,this.version=u}}r.OS=c;class a{constructor(n,o,u){this.manufacturer=n,this.model=o,this.version=u}}r.Device=a,function(i){i.Bluetooth="Bluetooth",i.Wired="Wired",i.WiFi="WiFi",i.Cellular="Cellular",i.InBuilt="InBuilt",i.Unknown="Unknown"}(r.connectivity||(r.connectivity={})),function(i){i.Phone="Phone",i.Speaker="Speaker",i.Car="Car",i.Headset="Headset",i.Thermostat="Thermostat",i.Microphones="Microphones",i.Deskphone="Deskphone",i.RemoteControl="RemoteControl",i.Unknown="Unknown",i.File="File",i.Stream="Stream"}(r.type||(r.type={}))})(Zp);var uu;function b(){return uu||(uu=1,function(r){var e=x&&x.__createBinding||(Object.create?function(a,i,n,o){o===void 0&&(o=n),Object.defineProperty(a,o,{enumerable:!0,get:function(){return i[n]}})}:function(a,i,n,o){o===void 0&&(o=n),a[o]=i[n]}),t=x&&x.__exportStar||function(a,i){for(var n in a)n!=="default"&&!i.hasOwnProperty(n)&&e(i,a,n)};Object.defineProperty(r,"__esModule",{value:!0}),r.AutoDetectSourceLanguagesOpenRangeOptionName=r.ForceDictationPropertyName=r.ServicePropertiesPropertyName=r.CancellationErrorCodePropertyName=r.OutputFormatPropertyName=void 0,t(ri,r),t(_i,r),t(bt,r),t(Gu,r),t(Qu,r),t(uR(),r),t(pR(),r),t(Xi,r),t(lR(),r),t(dR(),r),t(hR(),r),t(Vp,r),t(Zi,r),t(fR(),r),t(gR(),r),t(mR(),r),t(SR(),r),t(qp(),r),t(CR(),r),t(Up,r),t(yR(),r),t(Yi,r),t(_R(),r),t(ER(),r),t(es,r),t(ts,r),t(rs,r),t(IR(),r),t(TR(),r),t(bR(),r),t(wR(),r),t(AR(),r),t(ns,r),t(MR(),r),t(is,r),t(Jp,r),t(ss,r),t(as,r),t(cs,r),t(Gp,r),t(VR(),r),t(ls,r),t(a_(),r),t(ko,r),t(l_(),r),t(d_(),r);var s=h_();Object.defineProperty(r,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return s.AvatarSynthesisAdapter}});var c=v_();Object.defineProperty(r,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return c.SpeechSynthesisAdapter}}),t(f_(),r),t(g_(),r),t(m_(),r),t(S_(),r),t(C_(),r),t(y_(),r),t(Zp,r),r.OutputFormatPropertyName="OutputFormat",r.CancellationErrorCodePropertyName="CancellationErrorCode",r.ServicePropertiesPropertyName="ServiceProperties",r.ForceDictationPropertyName="ForceDictation",r.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(Ss)),Ss}(function(r){var e=x&&x.__createBinding||(Object.create?function(c,a,i,n){n===void 0&&(n=i),Object.defineProperty(c,n,{enumerable:!0,get:function(){return a[i]}})}:function(c,a,i,n){n===void 0&&(n=i),c[n]=a[i]}),t=x&&x.__exportStar||function(c,a){for(var i in c)i!=="default"&&!a.hasOwnProperty(i)&&e(a,c,i)};Object.defineProperty(r,"__esModule",{value:!0});const s=b();new s.AgentConfig,t(E(),r)})(Fn);function P_(r,e){return new Promise((t,s)=>{const c=Fn.SpeechConfig.fromSubscription("13b2f831ad854c13962db4ddfbbe6647","eastus");c.speechSynthesisVoiceName="ja-JP-ShioriNeural";var a=new Fn.SpeechSynthesizer(c);a.speakTextAsync(r,function(i){let n=!0;i.reason===Fn.ResultReason.SynthesizingAudioCompleted||(console.error("Speech synthesis canceled, "+i.errorDetails+`
Did you set the speech resource key and region values?`),n=!1);const o=setTimeout(()=>{e&&e(),clearTimeout(o)},i.audioDuration/1e4);a=null,n?t(n):s(n)},function(i){console.error("err - "+i),a.close(),a=null,s(!1)})})}const R_=["innerHTML"],__=["src"],E_={__name:"GrammerContent",props:{sentence:String,trans:String,inline:Boolean,id:String,center:Boolean},setup(r){const e=r,t=F(null),s=F(null),c=F(!0),a=F(!1);Sd(()=>{mt.value=!1});const i=()=>{c.value=!t.value||isFinite(t.value.duration)},n=D(()=>{const{sentence:p,trans:l="",center:d}=e;return`<div ${d?'style="justify-content: center;"':""}><p>${p}</p>${o.value&&l?'<img alt="speak" class="bunpou-speak" src="https://foruda.gitee.com/images/1712595434454521309/3ebc063a_78758.png" />':""}<div class="bunpou-loading ${a.value?"":"hidden"}">
    <span></span><span></span><span></span><span></span><span></span>
  </div></div>${l?`<p style="margin-top: 6px;line-height:1.5;${d?"text-align: center;":""}">${l}</p>`:""}`.replace(/\[([^\[]*)\/([\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FF]*)\]/g,h=>{const[v,g]=h.replace(/\[|\]/g,"").split("/");return`<ruby><rb>${v}</rb><rt>${g}</rt></ruby>`}).replace(/\*\*(.*?)\*\*/g,'<strong style="color: #fb923c">$1</strong>')}),o=D(()=>!e.id||c.value),u=async()=>{mt.value||(mt.value=!0,s.value?t.value.play():(a.value=!0,await P_(e.sentence.replace(/\[([^\[]*)\/([\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FF]*)\]/g,p=>{const[l,d]=p.replace(/\[|\]/g,"").split("/");return l}).replace(/\<del\>.*?\<\/del\>/g,"").replace(/\<\/{0,1}u\>/g,"").replace(/[^\u3000-\u303F\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FF\uFF00-\uFFEF\u4E00-\u9FAF\u3400-\u4DBF]|[\(|](.*?)[|\)]/g,""),()=>{mt.value=!1}),a.value=!1))};return(p,l)=>(m(),y(Q,null,[R("div",{innerHTML:n.value,class:G(["grammer-container",r.inline?"grammer-container-inline":""]),onClick:u},null,10,R_),o.value?(m(),y("audio",{key:0,ref_key:"audio",ref:t,src:s.value,onCanplay:i,onEnded:l[0]||(l[0]=d=>mt.value=!1),onError:l[1]||(l[1]=d=>mt.value=!1)},null,40,__)):T("",!0)],64))}},I_={class:"bunpou-start"},T_=Cd('<div class="busuanzi"><span id="busuanzi_container_site_pv">  <strong id="busuanzi_value_site_pv" class="busuanzi_value"><i class="loading"></i></strong>  </span><span class="division"></span><span id="busuanzi_container_site_uv">  <strong id="busuanzi_value_site_uv" class="busuanzi_value"><i class="loading"></i></strong>  </span></div>',1),b_={__name:"Visitors",setup(r){const e=F(!0),t=Un(gn(),"page"),s=()=>{const c=document.createElement("script");c.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",c.async=!0,c.onload=()=>{setTimeout(()=>{e.value=!1},1e3)},document.body.appendChild(c)};return Oe(()=>{s()}),Ie(t,()=>{s()}),(c,a)=>{const i=He("grammer-content");return m(),y(Q,null,[R("div",I_,[A(i,{id:"start",sentence:"**[/][/]!**",trans:"",center:""})]),T_],64)}}},w_={__name:"GiscusComment",setup(r){const e=Un(gn(),"isDark"),t=Un(gn(),"page"),s=F(),c=F("noborder_dark"),a=F(!0),i=()=>{const u=document.createElement("script"),p={"data-repo":"luhaifeng666/bunpou","data-repo-id":"R_kgDOJszpjg","data-category":"Q&A","data-category-id":"DIC_kwDOJszpjs4CaJ8g","data-mapping":"pathname","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-lang":"zh-CN","data-theme":c.value,crossorigin:"anonymous",async:!0};u.src="https://giscus.app/client.js",Object.entries(p).forEach(([l,d])=>{u.setAttribute(l,d)}),s.value&&(s.value.innerHTML=""),s.value.appendChild(u)},n=u=>{var l;c.value=u?"noborder_dark":"light";const p=document.querySelector("iframe.giscus-frame");p&&((l=p.contentWindow)==null||l.postMessage({giscus:{setConfig:{theme:`https://giscus.app/themes/${c.value}.css`}}},"https://giscus.app"))},o=u=>{u.origin==="https://beaudar.lipk.org"&&n()};return Ie(t,u=>{u.relativePath&&u.relativePath!=="index.md"&&i()}),Ie(e,n,{immediate:!0}),Oe(()=>{a.value=["luhaifeng666.github.io","localhost"].includes(window.location.hostname),i(),window.addEventListener("message",o)}),Gn(()=>{window.removeEventListener("message",o)}),(u,p)=>a.value?(m(),y("section",{key:0,ref_key:"comments",ref:s,style:{"margin-top":"40px"}},null,512)):T("",!0)}},A_={__name:"BaiduCount",setup(r){const e=Un(gn(),"page"),t=F(),s=F(!1),c=()=>{if(s.value){const a=document.createElement("script");a.src="https://hm.baidu.com/hm.js?b1dde12f85d5564e11ddfea63a559b6f",t.value&&(t.value.innerHTML=""),t.value.appendChild(a)}};return Ie(e,a=>{a.relativePath&&c()}),Oe(()=>{s.value=!["localhost","127.0.0.1"].includes(location.hostname),c()}),(a,i)=>s.value?(m(),y("section",{key:0,ref_key:"account",ref:t,style:{width:"0",height:"0"}},null,512)):T("",!0)}},YE={extends:Lo,Layout(){return zn(Lo.Layout,null,{"doc-before":zn(A_),"doc-after":()=>zn(w_),"home-features-after":()=>zn(b_)})},enhanceApp(r){r.app.component("GrammerContent",E_)}};export{YE as R,M_ as V,sg as c,V as u};
